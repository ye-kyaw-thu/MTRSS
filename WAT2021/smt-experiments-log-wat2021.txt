####################
### experiment 1 ###
####################

PBSMT config ဖိုင်ရဲ့ setting တချို့ကို အောက်ပါအတိုငင်း ပြောင်းခဲ့...  

max-sentence-length = 80
#max-sentence-length = 200

# order of the language model
order = 5

#max-phrase-length = 5
max-phrase-length = 10

### Result

en-my SMT
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl/baseline/en-my/tuning/tmp.1$ perl /home/ye/exp/smt/scripts/moses-script/multi-bleu.perl /home/ye/exp/smt/wat2021/exp-syl/data/dev.my < ./run23.out
BLEU = 16.79, 50.0/24.1/11.6/5.9 (BP=0.992, ratio=0.992, hyp_len=58185, ref_len=58631)

Evaluation on my-en SMT...
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl/baseline/my-en/evaluation$ perl /home/ye/exp/smt/scripts/moses-script/multi-bleu.perl ./test.reference.txt.1 < ./test.cleaned.1
BLEU = 2.49, 28.0/5.7/1.1/0.2 (BP=1.000, ratio=1.337, hyp_len=30670, ref_len=22937)

my-en ရလဒ်က တော်တော်ကို နည်းတယ်။  
လက်တွေ့ ရှင်းရမယ့် ပြဿနာက အများကြီးပဲ....
- စာကြောင်းတွေက ရှည်တာတွေများတယ် (sentence length problem)  
- အင်္ဂလိပ်စာကြောင်းတွေကို ဘာသာပြန်ထားတာမှာ တလွဲတွေ ပြန်ထားတာတွေလည်း အများကြီးပဲ... မြန်မာလူမျိုး တစ်ယောက်အနေနဲ့ ကြည့်ရင် ဖတ်ကြည့်လည်း တစ်ခေါက် ဖတ်ပြီး နားမလည်တာမျိုး၊ သဘာဝ မကျတဲ့ ဗမာစာကြောင်းတွေ လည်း ပါနေတာမျိုး... (e.g. containing not natural Myanmar sentences)  
- စာလုံးပေါင်းမှားတာတွေလည်း ရှိတယ် (corpus တစ်ခုဆောက်တဲ့အခါမှာ ခက်ခဲတဲ့ အပိုင်းတွေပါ...)  

####################
### experiment 2 ###
####################

Setting တချို့ကို အောက်ပါအတိုင်း ပြောင်းလဲခဲ့

//Filename: run-baseline.pl မှာ
my @configs = `find /home/ye/exp/smt/wat2021/exp-syl2/*/ -name "config.baseline.*" | sort`;

//Filename: run.sh မှာ exp ရဲ့ path ကော၊ data ရဲ့ path ကော update လုပ်ခဲ့
perl ./generate_configs.pl /home/ye/exp/smt/wat2021/exp-syl2/ /home/ye/exp/smt/wat2021/exp-syl2/data/

//Filename: config.baseline မှာ
myrk-data = /home/ye/exp/smt/wat2021/exp-syl2/data/

#max-sentence-length = 80
max-sentence-length = 100

# order of the language model
order = 6

#max-phrase-length = 5
max-phrase-length = 12

### BLEU
#
#nist-bleu = $moses-script-dir/generic/mteval-v13a.pl
#nist-bleu-c = "$moses-script-dir/generic/mteval-v13a.pl -c"
nist-bleu = $moses-script-dir/generic/mteval-v14.pl
nist-bleu-c = "$moses-script-dir/generic/mteval-v14.pl -c"

multi-bleu = $moses-script-dir/generic/multi-bleu.perl
============

binary LM လုပ်တဲ့နေရာမှာ error ပေးပြီး ရပ်သွားတယ်။
#max-sentence-length = 80
max-sentence-length = 100

# order of the language model
order = 8

#max-phrase-length = 5
max-phrase-length = 5

အဲဒါကြောင့် LM ရဲ့ length ကို လျှော့ကြည့်တယ်။
အဲဒါနဲ့လည်း အဆင်မပြေဘူး အဲဒါနဲ့


-----
LM binarize မှာ fail ဖြစ်နေတယ်...

Ref: https://kentonmurray.com/blogs/tuningmosestype.html
Moses EMS with KenLM needs ''type = 8''
I spent quite a bit of time today debugging why my Moses MT pipeline was crashing during the tuning stage. I was using EMS (Experiment Management System) as opposed to running scripts individually like I often do. Generally, I use KenLM for building large n-gram language models. In EMS, in the Language Model Section ([LM]), I had set all of the required paths, or so I had thought. However, later in the pipeline, during tuning, it would crash. Looking at the logs, I saw that the automatically generated config file (moses.ini) had a feature called ''IRSTLM''. It took me a while to figure out that the issue was not at all in the tuning part of my EMS pipeline, but rather that I had not added the line ''tuning = 8'' in the LM section. Without that, it defaults to 9, which is the code for IRSTLM. I was able to resolve this after finding this thread here, but hopefully this post can save others some time.

order = 6 ထားပြီး max-phrase-length = 12 ထားပြီးပြန် run ခဲ့...

### Result

2nd time experiment result:
en-my SMT
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl2/baseline/en-my/evaluation$ cat test.multi-bleu.1 
BLEU = 16.86, 50.1/23.9/11.5/5.9 (BP=1.000, ratio=1.001, hyp_len=59959, ref_len=59897)

my-en SMT
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl2/baseline/my-en/evaluation$ cat test.multi-bleu.1 
BLEU = 2.53, 28.4/5.9/1.1/0.2 (BP=1.000, ratio=1.293, hyp_len=29668, ref_len=22937)

####################
### experiment 3 ###
####################

ဒီ experiment က ./backup/cleaning.sh ကို သုံးပြီး cleaning လုပ်ခြင်းအားဖြင့် BLEU score မှာ ဘယ်လောက် effect ဖြစ်သလဲ သိချင်လို့ စမ်းခဲ့တဲ့ experiment.
အင်္ဂလိပ်စာ ဒေတာအတွက်က remove-non-printing-char.perl, normalize-punctuation.perl, tokenizer.perl ကို သုံးခဲ့ပြီး
ဗမာစာ ဒေတာအတွက်က remove-non-printing-char.perl နဲ့ normalize-punctuation.perl ကိုပဲ သုံးခဲ့။

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl3/baseline/en-my/evaluation$ cat test.multi-bleu.1 
BLEU = 19.29, 53.7/26.5/13.5/7.2 (BP=1.000, ratio=1.010, hyp_len=60302, ref_len=59718)

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl3/baseline/my-en/evaluation$ cat test.multi-bleu.1 
BLEU = 8.80, 41.3/12.7/5.4/2.1 (BP=1.000, ratio=1.153, hyp_len=32209, ref_len=27929)

####################
### experiment 4 ###
####################

Note for me, I checked the test.my data file and found followings:

syllable break လုပ်ထားတဲ့ မြန်မာစာဘက်မှာ အောက်ပါလိုမျိုး ကွင်းစကွင်းပိတ် က မဖြတ်ထားတာရှိ။
အ ဆို ပါ မြေ င လျင် ဟာ ဖ လို ရက်စ် ပင် လယ် အောက် ၃ ၇ ကီ လို မီ တာ (၂ ၃ မိုင်) ၌ ဖြစ် ခဲ့ တာ ဟု ဒေ သ ဆိုင် ရာ မိုး လေ ဝ သ နှ င့် ဇ လ ဗေ ဒ အ ရာ ရှိ များ က အဲ့ ဆိုး ဆီး ယေ့ တတ် ပ ရက်စ် သ တင်း ဌာ န သို့ အ စီ ရင် ခံ တင် ပြ ခဲ့ ပါ တယ် ။

ပြီးတော့ လက်ရှိမှာက အင်္ဂလိပ်စာဘက်မှာက နံပါတ်တွေက တွဲလျက်ရှိတယ်။ e.g. 37 ဒါပေမဲ့ ဗမာစာဘက်မှာက ၃ ၇ ဆိုပြီး ရှိနေတယ်။
ထိုနည်းလည်းကောင်း ဗမာစာဘက်မှာ ရှိတဲ့ အင်္ဂလိပ်စာလုံးတွေက character segmentation လုပ်ထားပြီးတော့ အင်္ဂလိပ်စာဘက်က တော့ အဲဒီလို လုပ်ထားတာမဟုတ်လို့ အဲဒီအချက်ကိုလည်း စဉ်းစားဖို့ လိုအပ်တယ်။ ဥပမာ ဘိစ် လုစ် ၏ အ ဓိ က အ ပိုဒ် ကို M o n s t e r D i s c o H e l l . c o m 
(ဒီကိစ္စက ညှိဖို့ အတွက်ဆိုရင်တော့ အင်္ဂလိပ်စာဘက်ကို sylbreak မှာ မထည့်ရင် ရလိမ့်မယ်။)

သ ည့်, မြ င့်, စ ဥ် ,  အာ ., ပြ ည့်, ဧ ည့်, ကင် ဂျူံ အီလ်, ဆ င့်, ပြ န့်, ပ င့်, အ ကျ ဥ်း ထောင်, နှ င့်, 
ဒီ ခ ရီး စဉ် ဟာ ၁ ၉ ၈ ၂ ခု နှစ် တွင် ပုပ် ရ ဟန်း မင်း ကြီး ဂျွန် ပေါလ် I I ၏ ခ ရီး စဉ် က တည်း က ဗြိ တိန် သို့ ပ ထ မ ဆုံး လော ကီ ခ ရီး စဉ် ဖြစ် ပါ လိ မ့် မည် ။
ဖွဲ့ ဖြိုး တိုး တတ် မှု
အ စွန် ရောက် အ ယူ ဝါ ဒ
သက် ဆိုင် ရာ နိုင် ငံ ခြား သား အ နည်း ငယ် ကို အ ဆို ပါ နိုင် ငံ တွင် နေ ထိုင် ပြီး လည် ပတ် ရန် ခွ င့် ပြု ထား သော ကြော င့် ၊ ကမ္ဘာ့ အ ပြင် ဖက် သို့ ကြီး မား စွာ နား မ လည် နိုင် ပြီး သို ဝှက် ခြင်း တွေ က လည်း ၎င်း တွင် ကျန် ရှိ ဆဲ ရှိ ပါ သည် ။
ပြူ တင်း ပေါက် အ နား က စား ပွဲ ကို ကြိုက် ပါ သ လား ။
ခေါင်း လျော် ရည် လို ချင် တယ် ။

*** Experiment 4 မှာ လောလောဆယ် လုပ်ဖို့စဉ်းစားနေတာက sylbreak မှာ English စာလုံးတွေ၊ ဂဏန်းတွေကို မဖြတ်ပဲ လုပ်တဲ့ ပုံစံကို စဉ်းစားနေတယ်။ အဲဒီလို လုပ်လိုက်ခြင်းအားဖြင် ဆိုကြပါစို့ BLEU score က တက်လာတယ်ဆိုရင် ဒါလည်း လုပ်ဖို့ လိုအပ်တယ်။
ပြောရရင် source နဲ့ target အကြားရဲ့ sentence length or number of words ကလည်း အရေးကြီးတယ်။ အဲဒါကြောင့် score က အပြောင်းအလဲ ရှိလာနိုင်တယ်။ 

*** ဒီ experiment မှာက sylbreak ကို update လုပ်တယ်။ အောက်ပါ အချက်တွေကို

- အင်္ဂလိပ်စာလုံးတွေကို မထိဘူး။
- ကွင်းစကွင်းပိတ် ကိုလည်း တစ်လုံးချင်း ဖြတ်တယ်
- မြန်မာ နံပါတ်တွေကိုလည်း မဖြတ်ပဲ ထားကြည့်တယ်။
- နံပါတ် တွေအကြားမှာ ရှိတဲ့ space ကိုလည်း ဖြုတ်တယ်။
- ဒဿမ နံပါတ် သို့မဟုတ် နာရီလိုမျိုး နံပါတ်အကြားမှာရှိတဲ့ : ကိစ္စနဲ့ comma ခံထားတဲ့ ဂဏန်းတွေကိုလည်း အင်္ဂလိပ်စာ ဘက်အခြမ်းနဲ့ ညီအောင် ညှိခဲ့
(ဥပမာ ၀.၈၀ ဆိုရင် ကြားထဲမှာ ဘာ space မှ မရှိစေဘူး။ ထိုနည်းလည်းကောင်းပဲ ၁၂:၀၀ နဲ့ ၅၁,၀၀၀ ဆိုရင်လည်း အဲဒီအတိုင်းပဲ ထားခဲ့)

*** အောက်ပါ စာကြောင်းလိုမျိုးတွေအတွက် အင်္ဂလိပ် ဒေတာဘက်အခြမ်းနဲ့ ညှိပြီးသား ဖြစ်သွားပြီ။

မြောက် ပိုင်း ရီ ဒင်း ရဲ ဌာ န ကို ၂၀၀၄ ခု နှစ် ဩ ဂုတ် လ မ တိုင် ခင် က တစ် ကြိမ် အိမ် သို့ ခေါ် ခဲ့ ပြီး ဖြစ် သည် ။
မီး တောင် ပေါက် ကွဲ ခြင်း သည် ဒေ သ စံ တော် ချိန် နေ့ လည် ၁:၃၀ နာ ရီ ခ န့် တွင် ဖြစ် ပွား ခဲ့ သည် ဟု ၊ အ မေ ရိ ကန် ပြည် ထောင် စု ဘူ မိ ဗေ ဒ ဆိုင် ရာ ဌာ န က ထုတ် ပြန် ခဲ့ သည် ။
မီး တောင် သည် သော ကြာ နေ့ တွင် လေး ကြိမ် ပေါက် ကွဲ ခဲ့ ပြီး ၊ ပြာ မှုန် က လေ ထဲ သို့ ၅၁,၀၀၀ ပေ ထိ ဖုံး အုပ် နေ သည် ။
မီး တောင် သည် ၁၉၈၉-၉၀ ခု နှစ် မှ လေး လ တာ ကာ လ တစ် ခု က တည်း က မ ပေါက် ကွဲ ခဲ့ ခြင်း ဖြစ် သည် ။

sylbreak.pl ထဲမှာက 
============
      #Regular expression pattern for Myanmar syllable breaking
      #*** a consonant not after a subscript symbol AND a consonant is not followed by a-That character or a subscript symbol
#      $line =~ s/((?<!$ssSymbol)[$myConsonant](?![$aThat$ssSymbol])|[$enChar$otherChar])/$sep$1/g;
      $line =~ s/((?<!$ssSymbol)[$myConsonant](?![$aThat$ssSymbol])|[$otherChar])/$sep$1/g;

      $line =~ s/^\s+|\s+$//g;
      $line =~ s/\s+/ /g;


      #နံပါတ် တွေအကြားမှာ ရှိတဲ့ space ကိုလည်း ဖြုတ်တယ်။
      $line =~ s/([၀-၉])\s+([၀-၉])/$1$2/g;      
      #ဒဿမ နံပါတ် သို့မဟုတ် နာရီလိုမျိုး နံပါတ်အကြားမှာရှိတဲ့ : ကိစ္စနဲ့ comma ခံထားတဲ့ ဂဏန်းတွေကိုလည်း အင်္ဂလိပ်စာ ဘက်အခြမ်းနဲ့ ညီအောင် ညှိခဲ့      
      $line =~ s/([၀-၉])\s+([.:,-][၀-၉])/$1$2/g;       
      $line =~ s/([က-အ|ဣ-ဧ|ဩ-ဲ|ံ-ဿ|၊-၏|\p{P}|\s|\`|\$|\~])([$enChar])/$1$sep$2/g;
      print "$line\n";      
=============

ပြီးတော့
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/data/preparation$ mv sylbreak.pl sylbreak4mt.pl
ဖိုင်နာမည်ပြောင်းသိမ်းခဲ့...

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/data/preparation$ ./clean-my-data-arg.sh ucsy-wat2021.my
ucsy-wat2021.my.syl:
  238014  6293792 60856941 ucsy-wat2021.my.syl
ucsy-wat2021.my.syl.escaped:
  238014  6293792 60881609 ucsy-wat2021.my.syl.escaped
ucsy-wat2021.my.syl.escaped.print:
  238014  6285996 60863967 ucsy-wat2021.my.syl.escaped.print
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/data/preparation$ cp ucsy-wat2021.my.syl.escaped.print train.my
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/data/preparation$ cp train.my ../

တော်တော်များများ ပြေလည်သွားပေမဲ့ အောက်ပါ ပြဿနာက ရှင်းဖို့ ကျန်နေသေးတယ်။

သူ မ စာ ရော ဖတ် နိုင် သ လား ။
  သူ အဲ ဒီ ကို သွား သ လား
  
*** အထက်ပါ ဒုတိယစာကြောင်းရဲ့ ရှေ့မှာ space ရှိနေတာကို မြင်ရလိမ့်မယ်။ ခန့်မှန်းတာက non-printable char တွေကို ဖျက်ပြီး ကျန်ခဲ့တဲ့ space ဖြစ်နိုင်တယ်။
အဲဒါကြောင့် clean-space.pl ကိုသုံးပြီးတော့ space ပိုနေတဲ့ ပြဿနာတွေကို ရှင်းကြည့်တယ်။

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/data/preparation$ perl ./clean-space.pl ./train.my > ./train.my.clean
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/data/preparation$ cp train.my.clean ../train.my 

သို့သော် clean-space.pl နဲ့ ရှင်းလိုက်တဲ့အခါမှာ စာကြောင်းတွေက တော်တော်လျော့သွားတာကို တွေ့ရတယ်။
checking လုပ်ကြည့်တဲ့အခါ အောက်ပါအတိုင်း အပြောင်းအလဲဖြစ်တယ်။

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/data/preparation$ wc ucsy-wat2021.my
  238013   238014 54801350 ucsy-wat2021.my
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/data/preparation$ wc ucsy-wat2021.my.syl
  238014  6293792 60856941 ucsy-wat2021.my.syl
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/data/preparation$ wc ucsy-wat2021.my.syl.escaped
  238014  6293792 60881609 ucsy-wat2021.my.syl.escaped
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/data/preparation$ wc ucsy-wat2021.my.syl.escaped.print 
  238014  6285996 60863967 ucsy-wat2021.my.syl.escaped.print
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/data/preparation$ perl ./clean-space.pl ./ucsy-wat2021.my.syl.escaped.print > ./ucsy-wat2021.my.syl.escaped.print.clean
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/data/preparation$ wc ./ucsy-wat2021.my.syl.escaped.print.clean 
  237997  6285979 60847097 ./ucsy-wat2021.my.syl.escaped.print.clean

အောက်ပါ လိုင်းတွေကြောင့်လို့ ယူဆလို့ အောက်ပါ လိုင်းကို clean-space.pl ကနေ ဖြုတ်ပြီး clean-space2.pl အဖြစ် သိမ်းခဲ့။
        $line =~ s/^\*$//g;
        $line =~ s/^[0-9]*\t//g;

clean-space2.pl ကို သုံးပြီး ထပ် cleaning လုပ်ကြည့်ခဲ့။

သို့သော် ပြဿနာက ဆက်ရှိတယ်။ လိုင်းအရေအတွက်က ကွာနေတယ်။ စိတ်ဝင်စားဖို့ ကောင်းတာက အောက်ပါအတိုင်းတွေ့ရှိရ...

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/data/preparation$ wc ./ucsy-wat2021.my.syl.escaped.print
  238014  6285996 60863967 ./ucsy-wat2021.my.syl.escaped.print
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/data/preparation$ wc ./ucsy-wat2021.my.syl.escaped.print.clean2
  237997  6285979 60847097 ./ucsy-wat2021.my.syl.escaped.print.clean2
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/data/preparation$ tail ./ucsy-wat2021.my.syl.escaped.print
ဒါ က ဆ င့် ပါ ။
ဒါ က နီ ကယ်လ် ပါ ။ ၅ ဆ င့် တန် တယ် ။
ဒါ က ဒိုင်း ပါ ။ ၁၀ ဆ င့် တန် တယ် ။
ဒါ က ကွာ တာ ပါ ။ ၂၅ ဆ င့် တန် တယ် ။
ကျွန် တော် တို့ မှာ ဒေါ် လာ ဝက် နဲ့ ၁ ဒေါ် လာ အ ကြွေ စေ့ တွေ ရှိ တယ် ။
ဘယ် မှာ လဲ လို့ ရ နိုင် မ လဲ ။
စာ တိုက် ပုံး မှာ ပဲ လဲ လို့ ရ ပါ တယ် ။
အဲ ဒီ မှာ လဲ ပေး တဲ့ စက် ရှိ ပါ တယ် ။ အဲ ဒီ စက် က တစ် ဒေါ် လာ ကို အ ကြွေ စေ့ အ ဖြစ် လဲ ပေး ပါ တယ် ။
ကောင်း ပါ ပြီ ။ ကျွန် တော့် မှာ ရှိ တဲ့ အ သေး ဆုံး ငွေ စက္ကူ က တော့ ဆယ် ဒေါ် လာ တန် တွေ ပါ ။
ကျွန် တော့် မှာ တစ် ဒေါ် လာ ငွေ စက္ကူ တွေ ရှိ ပါ တယ် ။ လဲ ချင် သ လား ။
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/data/preparation$ tail ./ucsy-wat2021.my.syl.escaped.print.clean2
ဒါ က ဆ င့် ပါ ။
ဒါ က နီ ကယ်လ် ပါ ။ ၅ ဆ င့် တန် တယ် ။
ဒါ က ဒိုင်း ပါ ။ ၁၀ ဆ င့် တန် တယ် ။
ဒါ က ကွာ တာ ပါ ။ ၂၅ ဆ င့် တန် တယ် ။
ကျွန် တော် တို့ မှာ ဒေါ် လာ ဝက် နဲ့ ၁ ဒေါ် လာ အ ကြွေ စေ့ တွေ ရှိ တယ် ။
ဘယ် မှာ လဲ လို့ ရ နိုင် မ လဲ ။
စာ တိုက် ပုံး မှာ ပဲ လဲ လို့ ရ ပါ တယ် ။
အဲ ဒီ မှာ လဲ ပေး တဲ့ စက် ရှိ ပါ တယ် ။ အဲ ဒီ စက် က တစ် ဒေါ် လာ ကို အ ကြွေ စေ့ အ ဖြစ် လဲ ပေး ပါ တယ် ။
ကောင်း ပါ ပြီ ။ ကျွန် တော့် မှာ ရှိ တဲ့ အ သေး ဆုံး ငွေ စက္ကူ က တော့ ဆယ် ဒေါ် လာ တန် တွေ ပါ ။
ကျွန် တော့် မှာ တစ် ဒေါ် လာ ငွေ စက္ကူ တွေ ရှိ ပါ တယ် ။ လဲ ချင် သ လား ။
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/data/preparation$ wc ../train.en
  238014  3357260 17186660 ../train.en
  
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/data/preparation$ file ./ucsy-wat2021.my.syl.escaped.print
./ucsy-wat2021.my.syl.escaped.print: UTF-8 Unicode text, with very long lines
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/data/preparation$ file ./ucsy-wat2021.my.syl.escaped.print.clean2 
./ucsy-wat2021.my.syl.escaped.print.clean2: UTF-8 Unicode text, with very long lines

အထက်မှာ မြင်ရတဲ့အတိုင်း မြန်မာစာ ဖိုင် နှစ်ဖိုင်မှာက အဆုံး စာကြောင်းတွေက အတူတူပဲ။ သို့သော် လိုင်းအရေအတွက်က မတူဘူး ဖြစ်နေတယ်။
သေသေချာချာ ကြည့်ရင်တော့  no. of words နဲ့ no. of characters တွေလည်း မတူတာကို တွေ့ရလိမ့်မယ်။
238014  6285996 60863967 vs 237997  6285979 60847097

ဖြစ်နိုင်တာက Windows ရဲ့ end of line နဲ့ Linux ရဲ့ end of line ရောနေတဲ့ကိစ္စမျိုး?!?!

clean-space.pl ကို update လုပ်ခဲ့တယ်။ debug လုပ်ဖို့အတွက်။ 

    if (($line ne '') & ($line !~ /^\S*$/)) {
        chomp($line);
        $line =~ s/^\s+|\s+$//g;
        $line =~ s/ +/ /g;

        #if ($line !~ /^$/) {
        #   print "$line\n";
        #}
    } else {
       print "Line no $count: $line\n";
    }

နောက်ဆုံးတော့ ပြဿနာကို ရှာတွေ့ပြီ။ အောက်ပါအတိုင်း

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/data/preparation$ head -n 128557 ./ucsy-wat2021.my.syl.escaped.print | tail -n 2
၇၀၉၂၉
ဒါ ဆို ရင် ခင် ဗျား ဖုန်း မှား နေ ပြီ
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/data/preparation$ head -n 128557 ./ucsy-wat2021.my.syl.escaped.print | tail -n 3
ဟဲ လို ဆူ ဇန် နဲ့ စ ကား ပြော ချင် လို့ ပါ
၇၀၉၂၉
ဒါ ဆို ရင် ခင် ဗျား ဖုန်း မှား နေ ပြီ
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/data/preparation$ head -n 128557 ./ucsy-wat2021.my.syl.escaped.print.clean | tail -n 3
ဟဲ လို ဆူ ဇန် နဲ့ စ ကား ပြော ချင် လို့ ပါ
ဒါ ဆို ရင် ခင် ဗျား ဖုန်း မှား နေ ပြီ
ဘ ရိုင် ယန် နဲ့ စ ကား ပြော ပါ ရ စေ

စာလုံး တစ်လုံးတည်းနဲ့ တစ်ကြောင်းတည်း ဖြစ်တဲ့ စာကြောင်းတွေကို clean-space က ဖျက်ခဲ့သလား?!
Source code ကို ဝင် confirmation လုပ်တော့ ဟုတ်တယ်။ အဲဒါကြောင့် အောက်ပါအတိုင်း update လုပ်ခဲ့...

#    if (($line ne '') & ($line !~ /^\S*$/)) {
    if ($line ne '') {
    
ပြန် cleaning လုပ်ပြီး line အရေအတွက် စစ်တယ်။

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/data/preparation$ wc *.clean*
     4998    131170   1269390 50k.clean
   237997   6285979  60847097 train.my.clean
   237997   6285979  60847097 ucsy-wat2021.my.syl.escaped.print.clean
   237997   6285979  60847097 ucsy-wat2021.my.syl.escaped.print.clean2
   238014   6285996  60847350 ucsy-wat2021.my.syl.escaped.print.clean3

ရပြီ !!!

Training data ကို ပြန်ပြင်ဆင်...

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/data/preparation$ cp ucsy-wat2021.my.syl.escaped.print.clean3 train.my
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/data/preparation$ cp train.my ../

--------------

10K မြန်မာစာ စာကြောင်းတွေကို update လုပ်ထားတဲ့ sylbreak4mt.pl နဲ့ ဖြတ်တော့ တော်တော်များများပြဿနာတွေက ပြေလည်သွားပြီ။
သို့သော် UCSY က training data မှာက အင်္ဂလိပ်စာလုံးတွေမှာရှိတဲ့ word boundary ကိုပါ ဖြုတ်ထားတာမို့ အဲဒီ ပြဿနာကို ရှင်းဖို့ ကျန်နေသေးတယ်။
ဥပမာ အောက်ပါလို စာကြောင်းမျိုး...

CantoneseGuangzhouနဲ့တည်ခင်းတဲ့စားသောက်ဆိုင်မှာအမြဲတမ်းစွပ်ပြုတ်နဲ့စတယ်။
တွေ့ ဆုံ ဆွေး နွေး ပွဲ သို့ ကော့ခ် ဘ ဇား ခ ရိုင် အ တွင်း ရှိ ဒုက္ခ သည် စ ခန်း များ ၌ လုပ် ငန်း များ ဆောင် ရွက် နေ သ ည့် InternationalOrganizationforMigration ( IOM ) ၊ UnitedNationsHighCommissionerforRefugees ( ယူ အန် အိတ် ချ် စီ အာ ) အ ဖွဲ့ တို့ မှ ကိုယ် စား လှယ် များ တက် ရောက် ခဲ့ ကြ သည် ။
တိုင်း ဒေ သ ကြီး အ တွင်း ရှိ မြို့ နယ် ၁၈ မြို့ နယ် တွင် DigitalDeedsManagement စ နစ် အ သုံး ပြု ၍ စာ ချုပ် စာ တမ်း မှတ် ပုံ တင် ခြင်း လုပ် ငန်း များ အား ( ၁ - ၁၀ - ၂၀၁၆ ) ရက် နေ့ မှ စ ၍ အ သုံး ပြု ခဲ့ ရာ အ များ ပြည် သူ မှတ် ပုံ တင် သွင်း လာ သ ည့် စာ ချုပ် ပေါင်း ၅၂၁၇ စောင် ကို မှတ် ပုံ တင် ပေး နိုင် ခဲ့ သည် ။
InterrogatingHongNiang က အ ဆို ပြ ဇာတ် ပေါ့ ။
ဒါ ပေ မဲ့ နိုင် ငံ ခြား ကား ပို ကြိုက် တယ် ။ အ ထူး သ ဖြ င့် GonewiththewindRedandBlacK တို့ လို စာ ပေ ဇာတ် ကား တွေ ကြိုက် တယ် ။

အဲဒီ ပြဿနာကတော့ test data ထဲမှာ အင်္ဂလိပ်စာလုံး ပါလာမှပဲ ကြုံရမဲ့ ပြဿနာပေါ့။ သို့သော် ဖြေရှင်းရလိမ့်မယ်။

ပြီးတော့ အောက်ပါ ကိစ္စလည်း ရှိသေးတာကို တွေ့ရတယ်။

အဲလ် ဘတ် က“ အေး - သူ တို့ ဒီ နေ ရာ မှာ ဆေး လိပ် ဝယ် လို့ မ ရ ဘူး ။ တို့ မှာ စု ထား တဲ့ ငွေ ဘယ် လောက် ရှိ လဲ” ဟု မေး လိုက် သည် ။
၎င်း နေ ရာ သို့ လူ များ သည် ပျဉ် ပြား တစ် ချပ် မှ တစ် ဆ င့် ကျောက် ထ ရံ တစ် လျှောက် တိုက် ရိုက် သွား နိုင် ပြီး ကျောက် တုံး ပေါင်း ( ၁၀၂၁ ) ဖြ င့် မြှပ် နှံ ထား သော ဆံ ထုံး များ နှ င့် ဆံ တော် ကို ကြ ည့် ရှု ၍ ကျောက် ထွင်း လက် ရာ များ ကိုု ခံ စား နိုင် ပါ သည် ။
လ သေံ ပြောင်း သွား ပြီ ။

နောက် သေချာပေါက် MT ကို ဒုက္ခပေးမှာက အရမ်းရှည်တဲ့ အောက်ပါလိုမျိုး စာကြောင်းတွေ...
config.baseline မှာ အတိုင်းအတာတစ်ခုအထိ ထိန်းလို့ ရပေမဲ့....

ဤ အ ခန်း တွင် ပြဋ္ဌာန်း ပါ ရှိ သည် မှ တစ် ပါး ကုမ္ပ ဏီ ၏ ဒါ ရိုက် တာ သို့ မ ဟုတ် အ ရာ ရှိ ကို လည်း ကောင်း ကုမ္ပ ဏီ ၏ အ ရာ ရှိ တစ် ဦး ဖြစ် သည် ဖြစ် စေ မ ဖြစ် သည် ဖြစ် စေ စာ ရင်း စစ် အ ဖြစ် ခ န့် အပ် ထား သော အ ခြား သူ တစ် ဦး ဦး ကို လည်း ကောင်း၎င်း တို့ အ ပေါ် ဤ ဥ ပ ဒေ သို့ မ ဟုတ် အ ခြား သက် ဆိုင် ရာ ဥ ပ ဒေ တစ် ရပ် ရပ် အ ရ ကုမ္ပ ဏီ ၏ ဖွဲ့ စည်း ပုံ အ ခြေ ခံ စည်း မျဉ်း သို့ မ ဟုတ် ကုမ္ပ ဏီ နှ င့် အ ခြား နည်း ဖြ င့် ချုပ် ဆို ထား သ ည့် ပ ဋိ ညာဉ် စာ ချုပ် တစ် ရပ် ရပ် တို့ တွင် ဖော် ပြ ထား ခြင်း ရှိ သည် ဖြစ် စေ မ ရှိ သည် ဖြစ် စေ ကုမ္ပ ဏီ နှ င့် သက် ဆိုင် သော အ ပြစ် ရှိ စေ နိုင် မ ည့် ပေါ့ လျော့ မှု ပျက် ကွက် မှု တာ ဝန် ချိုး ဖောက် မှု သို့ မ ဟုတ် ယုံ ကြည် အပ် နှံ မှု ကို ဖောက် ဖျက် မှုု တို့ နှ င့် စပ် လျဉ်း ၍ ကုမ္ပ ဏီ သို့ တာ ဝန် ရှိ မှု တစ် ရပ် ရပ် မှ ကင်း လွတ် ခွ င့် ပြု နိုင် ရေး အ တွက် ဖော် ပြ ထား သ ည့် ပြဋ္ဌာန်း ချက် တစ် ရပ် ရပ် သည် ပျက် ပြယ် စေ ရ မည် ။

အ ဆို ပါ ခွဲ စိတ် ကု သ မှု အောင် မြင် စွာ ဆောင် ရွက် နိုင် ရန် ကျန်း မာ ရေး နှ င့် အား က စား ဝန် ကြီး ဌာ န ပြည် ထောင် စု ဝန် ကြီး ၏ ဦး ဆောင် လမ်း ညွှန် မှု ဖြ င့် အ မြဲ တမ်း အ တွင်း ဝန် ကု သ ရေး ဦး စီး ဌာ န ညွှန် ကြား ရေး မှူး ချုပ် ရန် ကုန် တိုင်း ဒေ သ ကြီး ကု သ ရေး ဦး စီး ဌာ န မှူး ရန် ကင်း က လေး ဆေး ရုံ အုပ် ကြီး တို့ မှ ကော် မ တီ များ အ သီး သီး အ ဖွဲ့ စည်း ၍ စ နစ် တ ကျ ကြို တင် စီ မံ ဆောင် ရွက် ခဲ့ ခြင်း ဖြစ် ပြီး ခွဲ စိတ် ကု သ ရာ တွင် ဒေါက် တာ မြ င့် မြ င့် ခိုင် ( ဆေး ရုံ အုပ် ကြီး ရန် ကင်း က လေး ဆေး ရုံ ကြီး ) ပါ မောက္ခ အောင် ရဲ ဦး ( နှ လုံး သွေး ကြော ခွဲ စိတ် အ ထူး ကု ဆ ရာ ဝန် ကြီး ) ပါ မောက္ခ ဝင်း ဝင်း ကျော် ( နှ လုံး သွေး ကြော ခွဲ စိတ် အ ထူး ကု ဆ ရာ ဝန် ကြီး ) ပါ မောက္ခ အောင် သူ ( နှ လုံး သွေး ကြော ခွဲ စိတ် အ ထူး ကု ဆ ရာ ဝန် ကြီး ) ပါ မောက္ခ အောင် ကြည် ( မေ့ ဆေး အ ထူး ကု ဆ ရာ ဝန် ကြီး ) ပါ မောက္ခ အေး အေး အေး ( နှ လုံး မေ့ ဆေး အ ထူး ကု ဆ ရာ ဝန် ကြီး ) ပါ မောက္ခ သီ တာ အောင် ( အ မျိုး သား သွေး ဌာ န ) ပါ မောက္ခ ဇော် သန်း ထွန်း ( သ မား တော် ကြီး ) ပါ မောက္ခ ကျော် ဇင် ဝေ ( က လေး အ ထူး ကု ဆ ရာ ဝန် ကြီး ) တွဲ ဖက် ပါ မောက္ခ ခင် ယဉ် ယဉ် ထွေး ( နှ လုံး မေ့ ဆေး အ ထူး ကု ဆ ရာ ဝန် ကြီး ) တွဲ ဖက် ပါ မောက္ခ သန်း ဦး ( ဓာတ် မှန် အ ထူး ကု ဆ ရာ ဝန် ကြီး ) ဒေါက် တာ လဲ့ လဲ့ ထွန်း ( အ ထူး ကု ဆ ရာ ဝန် ကြီး ရော ဂါ ဗေ ဒ ) ဒေါက် တာ ညီ ညီ ( နှ လုံး မေ့ ဆေး အ ထူး ကု ဆ ရာ ဝန် ကြီး ) ဒေါက် တာ ဉာဏ် လင်း အောင် ( နှ လုံး မေ့ ဆေး အ ထူး ကု ဆ ရာ ဝန် ) ဒေါက် တာ အောင် သိန်း ထွဋ် ( လက် ထောက် ဆ ရာ ဝန် က လေး နှ လုံး ) ဒေါက် တာ သ တိုး သိန်း ဇံ ( လက် ထောက် ဆ ရာ ဝန် က လေး နှ လုံး ) ဒေါက် တာ သန်း ထိုက် အောင် ( နှ လုံး အ ထူး ကု သ မား တော် ကြီး ) တို့ မှ အ နီး ကပ် ပါ ဝင် ဆောင် ရွက် ခဲ့ ကြ ခြင်း ဖြစ် သည် ။

ပုဒ် မ ၄၁၂ အ ရ အ ရေး ပေါ် အ ခြေ အ နေ ကြေ ညာ သ ည့် ကိစ္စ ရပ် တွင် - ( က ) အ ရေး ပေါ် အ ခြေ အ နေ ကြေ ညာ ချက် အ ကျိုး သက် ရောက် သ ည့် နယ် မြေ ဒေ သ အ တွင်း မူ လ အ ခြေ အ နေ သို့ အ မြန် ပြန် လည် ရောက် ရှိ စေ ခြင်း ငှာ ဒေ သ ဆိုင် ရာ အာ ဏာ ပိုင် အ ဖွဲ့ အ စည်း များ ယင်း အ ဖွဲ့ အ စည်း ဝင် များ နယ် ဘက် ဆိုင် ရာ ဝန် ထမ်း အ ဖွဲ့ အ စည်း များ ယင်း အ ဖွဲ့ အ စည်း ဝင် များ က တည် ဆဲ ဥ ပ ဒေ များ နှ င့် အ ညီ တာ ဝန် ထမ်း ဆောင် ရာ တွင် ထိ ရောက် မှု ရှိ စေ ရန် တပ် မ တော် ၏ အ ကူ အ ညီ ကို ရ ယူ ဆောင် ရွက် နိုင် သည် ( ခ ) နိုင် ငံ တော် သမ္မ တ သည် လို အပ် ပါ က စစ် အုပ် ချုပ် ရေး အ မိ န့် တစ် ရပ် ထုတ် ပြန် နိုင် သည် ၊ ယင်း စစ် အုပ် ချုပ် ရေး အ မိ န့် တွင် တပ် မ တော် ကာ ကွယ် ရေး ဦး စီး ချုပ် အား အုပ် ချုပ် ရေး ဆိုင် ရာ လုပ် ပိုင် ခွ င့် နှ င့် တာ ဝန် များ ကို လည်း ကောင်း ရပ် ရွာ အေး ချမ်း သာ ယာ ရေး နှ င့် တ ရား ဥ ပ ဒေ စိုး မိုး ရေး နှ င့် သက် ဆိုင် သ ည့် တ ရား စီ ရင် ရေး ဆိုင် ရာ လုပ် ပိုင် ခွ င့် နှ င့် တာ ဝန် များ ကို လည်း ကောင်း သတ် မှတ် ပေး ရ မည် ၊ တပ် မ တော် ကာ ကွယ် ရေး ဦး စီး ချုပ် သည် ယင်း လုပ် ပိုင် ခွ င့် နှ င့် တာ ဝန် များ ကိ မိ ကိုယ် တိုင် ကျ င့် သုံး ဆောင် ရွက် ခြင်း သို့ မ ဟုတ် သ င့် လျော် သ ည့် စစ် ဘက် အာ ဏာ ပိုင် တစ် ဦး ဦး ကို ကျ င့် သုံး ဆောင် ရွက် စေ ခြင်း ပြု နိုင် သည် ။

-----------
Experiment 4 ကို စ Run!!!

လောလောဆယ် လက်ရှိ မြန်မာစာဘက်အခြမ်းကိုပဲ cleaning လုပ်ထားတဲ့ ဒေတာနဲ့ run ကြည့်ပြီး BLEU score ဘယ်လောက် တက်/ကျ ဖြစ်လာမလဲ ကြည့်ချင်တယ်။
run ကြည့်တော့ အောက်ပါ ရလဒ်တွေကို ရရှိတယ်။

*** for en-my
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/baseline/en-my/tuning/tmp.1$ for i in {1..23}; do perl /home/ye/exp/smt/scripts/moses-script/multi-bleu.perl /home/ye/exp/smt/wat2021/exp-syl4/data/dev.my < ./run$i.out; done;
BLEU = 12.51, 60.8/29.1/14.7/7.4 (BP=0.597, ratio=0.660, hyp_len=38088, ref_len=57709)
BLEU = 3.53, 14.5/5.9/2.2/0.8 (BP=1.000, ratio=4.527, hyp_len=261255, ref_len=57709)
BLEU = 10.09, 32.8/14.8/6.8/3.2 (BP=1.000, ratio=1.852, hyp_len=106905, ref_len=57709)
BLEU = 17.81, 51.4/24.8/12.4/6.4 (BP=1.000, ratio=1.042, hyp_len=60158, ref_len=57709)
BLEU = 18.61, 54.5/26.7/13.5/7.0 (BP=0.966, ratio=0.967, hyp_len=55790, ref_len=57709)
BLEU = 18.72, 54.1/26.2/13.3/7.0 (BP=0.984, ratio=0.984, hyp_len=56790, ref_len=57709)
BLEU = 18.78, 53.3/25.9/13.1/6.9 (BP=1.000, ratio=1.006, hyp_len=58083, ref_len=57709)
BLEU = 19.05, 53.7/26.2/13.4/7.0 (BP=0.999, ratio=0.999, hyp_len=57667, ref_len=57709)
BLEU = 19.06, 53.7/26.2/13.4/7.0 (BP=1.000, ratio=1.000, hyp_len=57694, ref_len=57709)
BLEU = 18.64, 53.8/25.9/12.9/6.7 (BP=1.000, ratio=1.001, hyp_len=57793, ref_len=57709)
BLEU = 18.14, 53.5/25.6/12.6/6.4 (BP=0.994, ratio=0.994, hyp_len=57362, ref_len=57709)
BLEU = 18.79, 54.0/26.2/13.1/6.8 (BP=0.995, ratio=0.995, hyp_len=57449, ref_len=57709)
BLEU = 18.86, 54.1/26.2/13.2/6.9 (BP=0.996, ratio=0.996, hyp_len=57469, ref_len=57709)
BLEU = 18.97, 54.1/26.4/13.3/7.0 (BP=0.993, ratio=0.993, hyp_len=57289, ref_len=57709)
BLEU = 19.01, 54.0/26.3/13.3/7.0 (BP=0.996, ratio=0.996, hyp_len=57494, ref_len=57709)
BLEU = 18.99, 54.0/26.3/13.3/7.0 (BP=0.996, ratio=0.996, hyp_len=57501, ref_len=57709)
bash: ./run17.out: No such file or directory

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/baseline/en-my/evaluation$ cat test.multi-bleu.1 
BLEU = 18.79, 53.7/26.0/13.1/6.8 (BP=1.000, ratio=1.010, hyp_len=59498, ref_len=58895)

***for my-en

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/baseline/my-en/tuning/tmp.1$ for i in {1..22}; do perl /home/ye/exp/smt/scripts/moses-script/multi-bleu.perl /home/ye/exp/smt/wat2021/exp-syl4/data/dev.en < ./run$i.out; done;
BLEU = 8.24, 40.8/12.1/4.9/1.9 (BP=1.000, ratio=1.128, hyp_len=30826, ref_len=27318)
BLEU = 8.43, 41.4/12.3/5.0/2.0 (BP=1.000, ratio=1.103, hyp_len=30129, ref_len=27318)
BLEU = 0.53, 3.8/0.8/0.3/0.1 (BP=1.000, ratio=11.999, hyp_len=327794, ref_len=27318)
BLEU = 0.36, 4.6/0.8/0.2/0.0 (BP=1.000, ratio=10.588, hyp_len=289230, ref_len=27318)
BLEU = 6.44, 36.2/9.6/3.8/1.3 (BP=1.000, ratio=1.150, hyp_len=31418, ref_len=27318)
BLEU = 7.00, 39.5/10.8/4.0/1.4 (BP=1.000, ratio=1.180, hyp_len=32227, ref_len=27318)
BLEU = 7.30, 39.5/10.4/4.2/1.6 (BP=1.000, ratio=1.192, hyp_len=32555, ref_len=27318)
BLEU = 8.44, 41.9/12.3/5.1/1.9 (BP=1.000, ratio=1.089, hyp_len=29751, ref_len=27318)
BLEU = 8.55, 41.5/12.4/5.2/2.0 (BP=1.000, ratio=1.109, hyp_len=30293, ref_len=27318)
BLEU = 7.74, 41.0/11.6/4.6/1.7 (BP=1.000, ratio=1.089, hyp_len=29750, ref_len=27318)
BLEU = 7.88, 41.9/11.9/4.6/1.7 (BP=1.000, ratio=1.123, hyp_len=30668, ref_len=27318)
BLEU = 8.38, 41.3/12.1/5.0/2.0 (BP=1.000, ratio=1.091, hyp_len=29817, ref_len=27318)
BLEU = 8.51, 41.8/12.3/5.1/2.0 (BP=1.000, ratio=1.076, hyp_len=29407, ref_len=27318)
BLEU = 7.82, 41.0/11.8/4.7/1.6 (BP=1.000, ratio=1.095, hyp_len=29909, ref_len=27318)
BLEU = 8.30, 41.5/12.2/4.9/1.9 (BP=1.000, ratio=1.141, hyp_len=31162, ref_len=27318)
BLEU = 8.49, 41.7/12.3/5.1/2.0 (BP=1.000, ratio=1.099, hyp_len=30032, ref_len=27318)
BLEU = 8.18, 40.9/11.8/4.9/1.9 (BP=1.000, ratio=1.139, hyp_len=31122, ref_len=27318)
BLEU = 8.47, 41.0/12.1/5.1/2.0 (BP=1.000, ratio=1.134, hyp_len=30968, ref_len=27318)
BLEU = 8.60, 41.2/12.2/5.2/2.1 (BP=1.000, ratio=1.127, hyp_len=30776, ref_len=27318)
BLEU = 8.64, 41.3/12.3/5.2/2.1 (BP=1.000, ratio=1.123, hyp_len=30681, ref_len=27318)
BLEU = 8.65, 41.3/12.3/5.2/2.1 (BP=1.000, ratio=1.123, hyp_len=30676, ref_len=27318)
BLEU = 8.65, 41.3/12.3/5.2/2.1 (BP=1.000, ratio=1.123, hyp_len=30674, ref_len=27318)


(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/baseline/my-en/evaluation$ cat test.multi-bleu.1 
BLEU = 8.46, 41.1/12.0/5.0/2.1 (BP=1.000, ratio=1.141, hyp_len=31865, ref_len=27929)

####################
### experiment 5 ###
####################

ဗမာစာကြောင်းကို rev နဲ့ right-to-left ပြောင်းပေးပြီး translate လုပ်ကြည့်ရင်ကော။
ပြီးမှ left-to-right, right-to-left မော်ဒယ် နှစ်ခုကို ပြန် combine လုပ်ပြီး ကောင်းတဲ့ ရလဒ်ကို ယူရင်ကော?!

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl5/data$ cat 3.txt 
ဆစ် ဒ နီ က ရ န့် ဝစ်ခ် မြင်း ပြိုင် ကွင်း မှ မျိုး သ န့် ပြိုင် မြင်း ရှစ် ကောင် ဟာ မြင်း တုတ် ကွေး ရော ဂါ ကူး စက် ခံ ခဲ့ ရ တယ် ဆို တာ အ တည် ပြု ခဲ့ ပါ တယ် ။
ရ န့် ဝစ်ခ် ကို ပိတ် ထား ခဲ့ ပြီး ၂ လ အ ထိ ကြာ ကြာ ဆက် လက် ထိန်း သိမ်း ထား ရန် မျှော် လ င့် ပါ တယ် ။
အ လွန် ပြင်း ထန် သော တုတ် ကွေး ဟာ ရ န့် ဝစ်ခ် မှာ အ မြဲ ထား သော မြင်း ၇၀၀ ထဲ က အ များ စု ကို ကူး စက် လိ မ့် မည် လို့ ခ န့် မှန်း ထား ပါ တယ် ။
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl5/data$ rev 3.txt 
။ ်ယတ ါပ ့ဲခ ုြပ ်ညတ အ ာတ ုိဆ ်ယတ ရ ့ဲခ ံခ ်ကစ းူက ါဂ ာေရ းေွက ်တုတ း်ငြမ ာဟ ်ငာေက ်စှရ း်ငြမ ်ငုိြပ ့်န သ းုိျမ ှမ း်ငွက ်ငုိြပ း်ငြမ ်ခ်စဝ ့်န ရ က ီန ဒ ်စဆ
။ ်ယတ ါပ ့်င လ ်ာေှျမ ်နရ းာထ း်မိသ း်နိထ ်ကလ ်ကဆ ာြက ာြက ိထ အ လ ၂ းီြပ ့ဲခ းာထ ်တိပ ုိက ်ခ်စဝ ့်န ရ
။ ်ယတ ါပ းာထ း်နှမ ့်န ခ ့ုိလ ်ညမ ့်မ ိလ ်ကစ းူက ုိက ုစ းာျမ အ က ဲထ ၀၀၇ း်ငြမ ာေသ းာထ ဲြမ အ ာှမ ်ခ်စဝ ့်န ရ ာဟ းေွက ်တုတ ာေသ ်နထ း်ငြပ ်နွလ အ

Let's Try!

## make reverse

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl5/data$ ls
dev.en  dev.my  note.txt  test.en  test.my  test-sgm  train.en  train.my
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl5/data$ rev train.my > train.my.rev
rev (base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl5/data$ rev dev.my > dev.my.rev
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl5/data$ rev test.my > test.my.rev
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl5/data$ rm train.my
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl5/data$ rm dev.my
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl5/data$ rm test.my
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl5/data$ mv train.my.rev train.my
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl5/data$ mv dev.my.rev dev.my
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl5/data$ mv test.my.rev test.my
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl5/data$ ls
dev.en  dev.my  note.txt  test.en  test.my  test-sgm  train.en  train.my
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl5/data$ head -2 *.my
==> dev.my <==
;touq& ။ ်ညသ ့ဲခ းာထ ်နျခ ူသ ုိက ုခ ်စတ ်စှန အ ေွမ အ ာေသ းေပ ွဆ းုိှန ုိက ်ယွစ ်နရ းေရ ာသ ာဘ ့်င ှန းေရ းုိျမ ူလ ၊ း်ညလ ်ာေသ း်ညန း်မဝ ့ုိတ ်ာေတ ်နွျက ်ကွတ အ း်ငြခ းါပ းံုဆ ၏ ူသ ;touq&
။ ်ညသ ့ဲခ ့ုိပ း်ငတ သ း်ငာေြက းံုဆ ေသ း်ညလ းာျမ ွြက းေွသ ်စစ ာေသ းာြပ းာျမ ်နွလ အ ်ပထ ်ကာေန ်ကာေန းီြပ ့ဲခ းေပ းေြက ်ငထ ုဟ ်ညသ ့ဲခ ေစ ်ကုိခ ိထ ုိက ့ူသ ၊ ့်င ြဖ ်ညျက းံုဒ ုစ ်ငာေထ ်ညြပ ်နက ိရ ေမ အ ၊ ာေသ းာထ ်တှမ ်တသ ုခ ယ ့်င ြဖ ေန အ း်ငြခ ်တခ ်စပ ှမ ်ဉာယ ေလ ်စစ ာေသ ုိလ မ ်နရ း်နိထ က ူလ ၊ ိှရ း်ငုိပ ်ကာေြမ ်နတ စ ီရ ီဇ ်တဝ ၏ ံင ်ငုိန ်နတ စ္စက ါပ

==> test.my <==
။ ်ယတ ါပ ့ဲခ ုြပ ်ညတ အ ာတ ုိဆ ်ယတ ရ ့ဲခ ံခ ်ကစ းူက ါဂ ာေရ းေွက ်တုတ း်ငြမ ာဟ ်ငာေက ်စှရ း်ငြမ ်ငုိြပ ့်န သ းုိျမ ှမ း်ငွက ်ငုိြပ း်ငြမ ်ခ်စဝ ့်န ရ က ီန ဒ ်စဆ
။ ်ယတ ါပ ့်င လ ်ာေှျမ ်နရ းာထ း်မိသ း်နိထ ်ကလ ်ကဆ ာြက ာြက ိထ အ လ ၂ းီြပ ့ဲခ းာထ ်တိပ ုိက ်ခ်စဝ ့်န ရ

==> train.my <==
။ ီြပ းီြပ းာထ ့်င ွဖ ုှမ အ ့်င ြဖ ုှမ ်တသ ူလ ်ငွတ း်နခ စ ဲရ း်ငာေျခ ်မိြက
။ ်ညသ ိှရ ်ကျလ း်မစ ံုစ က းာျမ ဲရ
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl5/data$

## make SGM files for test data

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl5/data/test-sgm$ ./generate_sgms.pl 
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl5/data/test-sgm$ ls
generate_sgms.pl  ref2sgm.pl  src2sgm.pl  test.en.ref.sgm  test.en.src.sgm  test.my.ref.sgm  test.my.src.sgm

*** update paths of config.baseline and scripts...

## Train/Tune/Test

### English-Myanmar

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl5/baseline/en-my/tuning/tmp.1$ for i in {1..29}; do perl /home/ye/exp/smt/scripts/moses-script/multi-bleu.perl /home/ye/exp/smt/wat2021/exp-syl5/data/dev.my < ./run$i.out; done;
BLEU = 12.81, 60.5/29.3/15.2/7.9 (BP=0.597, ratio=0.660, hyp_len=38082, ref_len=57709)
BLEU = 3.48, 14.5/5.6/2.2/0.8 (BP=1.000, ratio=4.514, hyp_len=260527, ref_len=57709)
BLEU = 6.51, 22.6/9.8/4.3/1.9 (BP=1.000, ratio=2.721, hyp_len=157006, ref_len=57709)
BLEU = 15.59, 46.8/22.1/10.7/5.3 (BP=1.000, ratio=1.168, hyp_len=67412, ref_len=57709)
BLEU = 17.73, 56.6/28.1/14.4/7.5 (BP=0.870, ratio=0.878, hyp_len=50664, ref_len=57709)
BLEU = 18.19, 52.7/25.3/12.6/6.5 (BP=1.000, ratio=1.008, hyp_len=58187, ref_len=57709)
BLEU = 18.44, 53.8/26.0/13.1/6.8 (BP=0.983, ratio=0.983, hyp_len=56715, ref_len=57709)
BLEU = 10.13, 46.4/16.4/6.4/2.5 (BP=0.963, ratio=0.963, hyp_len=55588, ref_len=57709)
BLEU = 16.91, 51.3/23.9/11.6/5.7 (BP=1.000, ratio=1.066, hyp_len=61514, ref_len=57709)
BLEU = 18.46, 53.4/25.6/12.8/6.6 (BP=0.999, ratio=0.999, hyp_len=57667, ref_len=57709)
BLEU = 18.71, 53.4/25.8/13.0/6.8 (BP=1.000, ratio=1.000, hyp_len=57687, ref_len=57709)
BLEU = 16.15, 52.4/23.7/10.7/5.1 (BP=1.000, ratio=1.024, hyp_len=59092, ref_len=57709)
BLEU = 18.40, 53.2/25.4/12.8/6.6 (BP=1.000, ratio=1.008, hyp_len=58175, ref_len=57709)
BLEU = 18.61, 53.6/25.7/13.0/6.8 (BP=0.997, ratio=0.997, hyp_len=57526, ref_len=57709)
BLEU = 16.98, 52.6/23.7/11.6/5.9 (BP=0.991, ratio=0.992, hyp_len=57219, ref_len=57709)
BLEU = 17.99, 53.7/25.2/12.4/6.2 (BP=1.000, ratio=1.003, hyp_len=57900, ref_len=57709)
BLEU = 18.14, 53.6/25.2/12.5/6.4 (BP=1.000, ratio=1.007, hyp_len=58123, ref_len=57709)
BLEU = 18.20, 53.1/25.2/12.6/6.5 (BP=1.000, ratio=1.005, hyp_len=58011, ref_len=57709)
BLEU = 16.79, 52.8/24.1/11.4/5.5 (BP=1.000, ratio=1.007, hyp_len=58106, ref_len=57709)
BLEU = 18.40, 53.6/25.2/12.8/6.6 (BP=1.000, ratio=1.000, hyp_len=57704, ref_len=57709)
BLEU = 18.02, 52.4/25.0/12.5/6.5 (BP=0.998, ratio=0.998, hyp_len=57605, ref_len=57709)
BLEU = 18.17, 53.2/25.5/12.7/6.6 (BP=0.991, ratio=0.991, hyp_len=57172, ref_len=57709)
BLEU = 17.87, 52.8/25.1/12.3/6.3 (BP=1.000, ratio=1.004, hyp_len=57965, ref_len=57709)
BLEU = 18.52, 53.1/25.8/12.9/6.7 (BP=1.000, ratio=1.000, hyp_len=57732, ref_len=57709)
BLEU = 18.64, 53.2/25.9/13.1/6.7 (BP=0.998, ratio=0.998, hyp_len=57601, ref_len=57709)
bash: ./run26.out: No such file or directory

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl5/baseline/en-my/evaluation$ cat test.multi-bleu.1 
BLEU = 18.65, 53.1/25.8/13.1/6.7 (BP=1.000, ratio=1.006, hyp_len=59238, ref_len=58895)

### Myanmar-English

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl5/baseline/my-en/tuning/tmp.1$ for i in {1..29}; do perl /home/ye/exp/smt/scripts/moses-script/multi-bleu.perl /home/ye/exp/smt/wat2021/exp-syl5/data/dev.en < ./run$i.out; done;
BLEU = 7.92, 39.7/12.1/4.8/1.7 (BP=1.000, ratio=1.176, hyp_len=32121, ref_len=27318)
BLEU = 1.90, 17.3/3.1/1.1/0.2 (BP=1.000, ratio=2.248, hyp_len=61405, ref_len=27318)
BLEU = 7.23, 36.5/10.9/4.4/1.5 (BP=1.000, ratio=1.333, hyp_len=36424, ref_len=27318)
BLEU = 8.22, 38.9/12.3/5.1/1.9 (BP=1.000, ratio=1.220, hyp_len=33332, ref_len=27318)
BLEU = 8.29, 38.4/12.2/5.2/2.0 (BP=1.000, ratio=1.245, hyp_len=34009, ref_len=27318)
BLEU = 1.08, 6.9/1.6/0.6/0.2 (BP=1.000, ratio=7.395, hyp_len=202006, ref_len=27318)
BLEU = 1.16, 15.8/2.0/0.6/0.1 (BP=1.000, ratio=2.396, hyp_len=65462, ref_len=27318)
BLEU = 3.66, 36.1/6.3/1.8/0.4 (BP=1.000, ratio=1.121, hyp_len=30624, ref_len=27318)
BLEU = 7.84, 40.2/11.9/4.7/1.7 (BP=1.000, ratio=1.138, hyp_len=31089, ref_len=27318)
BLEU = 2.35, 25.2/3.9/1.3/0.2 (BP=1.000, ratio=1.568, hyp_len=42832, ref_len=27318)
BLEU = 7.22, 34.6/10.7/4.4/1.7 (BP=1.000, ratio=1.489, hyp_len=40672, ref_len=27318)
BLEU = 8.43, 39.4/12.6/5.3/1.9 (BP=1.000, ratio=1.166, hyp_len=31847, ref_len=27318)
BLEU = 8.47, 39.9/12.6/5.3/1.9 (BP=1.000, ratio=1.149, hyp_len=31397, ref_len=27318)
BLEU = 8.45, 39.9/12.6/5.3/1.9 (BP=1.000, ratio=1.153, hyp_len=31500, ref_len=27318)
BLEU = 8.45, 39.9/12.6/5.3/1.9 (BP=1.000, ratio=1.153, hyp_len=31506, ref_len=27318)
BLEU = 8.44, 39.8/12.6/5.3/1.9 (BP=1.000, ratio=1.153, hyp_len=31497, ref_len=27318)
BLEU = 8.47, 39.8/12.6/5.3/1.9 (BP=1.000, ratio=1.156, hyp_len=31572, ref_len=27318)
BLEU = 8.48, 39.8/12.6/5.3/1.9 (BP=1.000, ratio=1.155, hyp_len=31564, ref_len=27318)
BLEU = 8.47, 39.8/12.6/5.3/1.9 (BP=1.000, ratio=1.156, hyp_len=31568, ref_len=27318)
bash: ./run20.out: No such file or directory


(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl5/baseline/my-en/evaluation$ cat test.multi-bleu.1 
BLEU = 8.30, 39.9/12.4/5.1/1.9 (BP=1.000, ratio=1.162, hyp_len=32447, ref_len=27929)
-------------

## System Combination

for en-my:

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/sys-combi/syl4-5/en-my$ /home/ye/exp/smt/sys-combi/select-higher-bleu.sh test.reference.txt.1 sys4.hyp sys5.rev.hyp 
...
...
...
သူ တို့ လည်း ပြော သည် မှာ သူ တို့ သည် သူ မ အား အ လွန် နီး ကပ် စွာ နောက် မှ လိုက် ခဲ့ ကြ ပြီး သူ မ ကို နောက် မှ လိုက် ရန် အ လို့ ငှာ အန္တ ရာယ် ရှိ သော လမ်း ကျ ဥ်း သို့ ပြောင်း လဲ အ သုံး ပြု ခြင်း ပြု လုပ် ခဲ့ သည် ။ 	--->	 သူ မ ကို လိုက် နာ ရ ပါ တယ် ။ အ မိ န့် တွင် အ ပြောင်း အ လဲ များ ပြု လုပ် ထား သော လမ်း ကြောင်း များ နှ င့် သူ တို့ က သူ မ ကို အ ရမ်း နီး နီး ကပ် ကပ် ပြီး သူ တို့ လည်း ပြော ပြော
10.548988859208634 

ရဲ လည်း ပြော ကြား ခဲ့ သ ည့် အ ကြောင်း မှာ သူ မ ၏ ကား ကို မောင်း နှင် ခဲ့ သ ည့် သူ ၊ စ ပီး ယား ကို အ နည်း ဆုံး ကား များ ထဲ မှ တစ် စီး နောက် ယောင် ခံ လိုက် ခဲ့ သည် ၊ သူ မ အား လမ်း မ ကြီး မှ ရှောင် တိမ်း ရန် ကြိုး စား ခဲ့ သည် ၊ သို့ သော် သူ မ သည် ၎င်း ယာ ဥ် သို့ မ ဟုတ် ပိုင် ဆိုင် သူ များ ကို ဖော် ထုတ် ရန် မ တတ် နိုင် ခဲ့ ပါ ။ 	--->	 သို့ မ ဟုတ် ပါ တယ် ။ အ များ က ယာဉ် ပေါ် ကို ဖော် ထုတ် နိုင် ခဲ့ တာ မ ဟုတ် ဘူး ၊ ဒါ ပေ မဲ့ သူ မ အ လမ်း ကို သူ မ ကို ထွက် ပြေး ရန် ကြိုး စား သူ မ ကို ကား မောင်း နေ ခဲ့ တဲ့ အောက် ဖော် ပြ ပါ sraepS ကား များ အ နက် တစ် ခု အ ပါ အ ဝင် အ နည်း ဆုံး ရဲ များ က လည်း ပြော ပြော
7.009186624442078 

သူ တို့ သည် သူ မ ၏ ကိုယ် ရေး အ ချက် အ လက် ကို မှန် ကန် ကြောင်း ဖော် ပြ ရန် အ စီ ရင် ခံ တင် ပြ ခဲ့ ကြ ပြီး ၊ သူ မ အား လွှတ် ပေး ခဲ့ သည် ။ 	--->	 မည် သူ မည် ဝါ ဖြစ် ကြောင်း နှ င့် သူ မ ကို ထုတ် ပြန် ခဲ့ တယ် ။ သူ မ ကို အ တည် ပြု ထား သော သ တင်း များ အ ရ သူ တို့ တွေ
4.087303474558459 

TMZ .com မှ တင် ပြ ခဲ့ သည် မှာ ရဲ များ သည် အ ကယ် ၍ သူ မ ၏ ယာ ဥ် မောင်း လိုင် စင် သက် တမ်း ရှိ သည် ကို သိ ရှိ ရန် ၊ စစ် ဆေး နေ ခဲ့ ကြ ပြီး လိုင် စင် မှန် ကန် သော ကြော င့် အံ့ အား သ င့် ခဲ့ သည် ။ 	--->	 ခဲ့ တယ် ။ အဲ ဒါ ကို အံ့ အား သ င့် လိုင် စင် က သက် တမ်း နှ င့် သူ မ ကို တွေ့ ဖို့ စစ် ဆေး ခဲ့ မယ် ဆို ရင် အဲ ဒီ အ စီ ရင် ခံ စာ များ ရဲ တပ် ဖွဲ့ moc.ZMT
8.061093307568193 

စ ပီး ယား သည် သ တင်း ထောက် များ ၏ မ စ ဥ်း စား ပဲ ပြု လုပ် သ ည့် ထိ ခိုက် မှု နှ င့် တစ် စုံ တစ် ရာ အ တွက် လျော် ကြေး မ ယူ ခဲ့ ပါ ၊ စ ပီး ယား သည် လူ များ အား ဖမ်း ဆီး ခဲ့ သည် ကို မ လို လား ခဲ့ ပါ ။ 	--->	 ဖမ်း ဆီး ရ မိ ခဲ့ ပါ တယ် ။ အ မျိုး သား တွေ လို ချင် ခဲ့ တာ မ ဟုတ် ဘူး ၊ sraepS တိုက် မှု ဖြစ် ပေါ် လေ မ ရှိ ထား သော် လည်း တစ် ခု ခု နှ င့် sizzarapap ဖြ င့် စွဲ ချက် တင် sraepS ခဲ့ တာ မ ဟုတ် ဘူး
3.016517692220129 

“ဘ ရစ် တ နီ စ ပီး ယား သည် အ ဖွဲ့ အ စည်း ၏ တစ် စိတ် တစ် ပိုင်း ဖြစ် သည် ၊ သို့ သော် မ ဆင် မ ခြင် မောင်း နှင် ခြင်း မ ပြု လုပ် ခဲ့ ပါ ဟု ၊ ” ဆာ ရာ ဖက် ဒန် ၊ လော့ အင် ဂျ လိစ် ရဲ ဌာ န အ တွက် ပြော ရေး ဆို ခွ င့် ရှိ သူ မှ ပြော ကြား ခဲ့ သည် ။ 	--->	 ရဲ တပ် ဖွဲ့ ဝင် များ ဌာ န ၊ ဆာ ရာ nedaF တယ် ။ လော့စ် အိန် ဂျယ် လိစ် အ တွက် namowsekops တယ် "လို့ ပြော ylsselkcer ကား မောင်း တာ မ ဟုတ် ဘူး ၊ ဒါ ပေ မဲ့ ဖြစ် ခဲ့ သ ည့် အ ဖွဲ့ အ စည်း များ အ စု အ ဖွဲ့ ၏ အ စိတ် အ ပိုင်း အ ဖြစ်" sraepS yentirB
6.506341638489648 

wc *.txt
   1018  120772 1138346 bleu-list.txt
   1018    1018   18812 bleu-sys4.hyp.txt
   1018    1018   19141 bleu-sys5.hyp.txt
   1018    1018   18800 bleu-sys5.rev.hyp.txt
   1018   59498  550726 select-bleu.txt
   5090  183324 1745825 total
==========
BLEU score of SYS1 (sys4.hyp):
Evaluation with BLEU score:
BLEU = 18.79, 53.7/26.0/13.1/6.8 (BP=1.000, ratio=1.010, hyp_len=59498, ref_len=58895)
BLEU score of SYS2 (sys5.rev.hyp):
Evaluation with BLEU score:
BLEU = 18.65, 53.1/25.8/13.1/6.7 (BP=1.000, ratio=1.006, hyp_len=59238, ref_len=58895)
System Combined BLEU :
Evaluation with BLEU score:
BLEU = 20.57, 54.4/27.6/14.7/8.1 (BP=1.000, ratio=1.005, hyp_len=59208, ref_len=58895)

ရလဒ် BLEU score 20 ကျော်သွားပြီ !!! :)

for my-en:

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/sys-combi/syl4-5/my-en$ /home/ye/exp/smt/sys-combi/select-higher-bleu.sh test.reference.txt.1 sys4.hyp sys5.hyp
...
...
...
hey are reported to have verified her identity, and released her. 	--->	 The Hluttaw, and she was reported to correct information of her.
10.700801516876487 

TMZ.com reports that police were checking to see if her license was valid, and was surprised that it was. 	--->	 was surprised because of the licence correct went to check, they are driving licence ်ဥ of her police in the moc. ZMT
4.303846266589083 

Spears was not charged with anything and despite the paparazzis & apos; recklessness, Spears did not want the men arrested. 	--->	 did not to arrest people under the table and went to compensate for something to the း်ဥ & apos; t of reporters under a wife.
7.52421768074461 

& quot; Britney Spears was part of the group, but was not driving recklessly, & quot; said spokeswoman for the Los Angeles Police Department, Sara Faden. 	--->	 The from spokesperson for the ministry Angela, Myanmar police and other modern named, said Sara ” did not driver & apos;, but a part of the table under rule of economic life. & quot;
8.376806028152535 

wc *.txt
  1018  66348 364797 bleu-list.txt
  1018   1018  18659 bleu-sys4.hyp.txt
  1018   1018  18680 bleu-sys5.hyp.txt
  1018   1018  19062 bleu-sys5.rev.hyp.txt
  1018  31835 163315 select-bleu.txt
  5090 101237 584513 total
==========
BLEU score of SYS1 (sys4.hyp):
Evaluation with BLEU score:
BLEU = 8.46, 41.1/12.0/5.0/2.1 (BP=1.000, ratio=1.141, hyp_len=31865, ref_len=27929)
BLEU score of SYS2 (sys5.hyp):
Evaluation with BLEU score:
BLEU = 8.30, 39.9/12.4/5.1/1.9 (BP=1.000, ratio=1.162, hyp_len=32447, ref_len=27929)
System Combined BLEU :
Evaluation with BLEU score:
BLEU = 10.42, 42.0/14.4/6.6/2.9 (BP=1.000, ratio=1.145, hyp_len=31977, ref_len=27929)

တိုးတက်မှုတော့ ရှိတယ်!!!

####################
### experiment 6 ###
####################

မြန်မာစာထဲမှာ ရောနေတဲ့ အင်္ဂလိပ်စာလုံးကိုပါ word segmentation လုပ်ပြီး train/tune/test လုပ်ကြည့်ရန်။
dev နဲ့ test မှာက English word ရော်ပါနေတာ မတွေ့ရတဲ့အတွက် ဘယ်လောက်ထိ effect ဖြစ်မလဲ မသိဘူး။
သို့သော် training လုပ်တဲ့ မြန်မာစာ ဘက်အခြမ်းမှာတော့ အင်္ဂလိပ်စာတွေရောပါနေတာက တော်တော်များများရှိတော့ လုပ်သင့်တယ်။
alignment, phrase table building မှာတော့ သက်ရောက်မှုရှိမှာ အမှန်ပဲ။

Ref link for English language word segmentation tool:

1) Python-wordsegment
https://pypi.org/project/wordsegment/
ကိုယ့် local စက်ထဲမှာ install လုပ်ထားပြီးသား path က
/home/ye/tool/word-seg-tool/python-wordsegment

2) SymSpell
SymSpell ကိုလည်း word segmenter အဖြစ် သုံးလို့ရ

3) Nagisa
သူက အင်္ဂလိပ်စာ ကိုယ့် domain အတွက်ဆိုရင် ပြန် train လုပ်ဖို့ လိုအပ်တယ်။

4) YouTokenToMe
https://awesomeopensource.com/project/VKCOM/YouTokenToMe
ကိုယ့်ဒေတာအတွက် train လုပ်သင့်တယ်။
training time ကတော့ မြန်တယ်။

note this is BPE word segmentation (good for NMT)

5) NLTK

ပြဿနာက spacing လုပ်မထားတဲ့ အင်္ဂလိပ်စာကြောင်းတွေကို word segmentation tool တွေက ဖြတ်မပေးနိုင်တဲ့ problem.

## NLTK နဲ့ စမ်းထားတဲ့ running log

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/tool/word-seg-tool/tst-nltk$ cat nltk-ws.py 
from nltk.tokenize import word_tokenize, sent_tokenize, WordPunctTokenizer, RegexpTokenizer

text = "God is Great! I won a lottery."
print(word_tokenize(text))
print(sent_tokenize(text))

tk = WordPunctTokenizer() 
print(tk.tokenize(text))

regtk = RegexpTokenizer("[\w']+")
print(regtk.tokenize(text))
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/tool/word-seg-tool/tst-nltk$ python ./nltk-ws.py 
['God', 'is', 'Great', '!', 'I', 'won', 'a', 'lottery', '.']
['God is Great!', 'I won a lottery.']
['God', 'is', 'Great', '!', 'I', 'won', 'a', 'lottery', '.']
['God', 'is', 'Great', 'I', 'won', 'a', 'lottery']
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/tool/word-seg-tool/tst-nltk$ gedit nltk-ws.py 
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/tool/word-seg-tool/tst-nltk$ cat ./nltk-ws.py 
from nltk.tokenize import word_tokenize, sent_tokenize, WordPunctTokenizer, RegexpTokenizer

#text = "God is Great! I won a lottery."
text = "hecasesarethefirstinfectionsofracehorses,despiteinfectingdozensofrecreationalhorsesacrossNSWandQueensland."
print(word_tokenize(text))
print(sent_tokenize(text))

tk = WordPunctTokenizer() 
print(tk.tokenize(text))

regtk = RegexpTokenizer("[\w']+")
print(regtk.tokenize(text))
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/tool/word-seg-tool/tst-nltk$ python ./nltk-ws.py 
['hecasesarethefirstinfectionsofracehorses', ',', 'despiteinfectingdozensofrecreationalhorsesacrossNSWandQueensland', '.']
['hecasesarethefirstinfectionsofracehorses,despiteinfectingdozensofrecreationalhorsesacrossNSWandQueensland.']
['hecasesarethefirstinfectionsofracehorses', ',', 'despiteinfectingdozensofrecreationalhorsesacrossNSWandQueensland', '.']
['hecasesarethefirstinfectionsofracehorses', 'despiteinfectingdozensofrecreationalhorsesacrossNSWandQueensland']

အထက်ပါအတိုင်း NLTK က word segmentation သေချာ လုပ်မပေးတာကို တွေ့ရလိမ့်မယ်။
Spacy အတွက် English word segmentation စမ်းခဲ့တဲ့ Note ကို Github မှာလည်း တင်ပေးထားတယ်။

Ref:
https://github.com/ye-kyaw-thu/error-overflow/blob/master/spacy-installation-test.md

------------------

အင်္ဂလိပ်စာအတွက် ကိုယ့်ဖာသာကိုယ် word segmenter ကို ပြင်ဆင်ရမယ့် သဘောရှိတယ်။


အရင်ဆုံး လက်ရှိ run ထားတဲ့ experiment 4  ခုရဲ့ ရလဒ်တွေမှာ ဘယ်လို error တွေ ဖြစ်နေလည်း သိချင်တယ်။
WER, top-10 confusion pair တွေကနေ တစ်ခုခု ရလဒ်ကောင်းအောင် လုပ်လို့ရတာမျိုး ရှိမလား သိချင်တယ်။
Check WER Calculation! Section for your ref.


####################
### experiment 7 ###
####################

ဒီ experiment က Unsupervised Transliteration Feature ကို သုံးပြီး ရလဒ်ကို ဘယ်လောက် effect ဖြစ်သလဲ လုပ်ကြည့်တဲ့ experiment

Approach က နှစ်ခု ရှိတယ်။
Nadir Durrani, Hassan Sajjad, Hieu Hoang, Philipp Koehn. Integrating an Unsuper-
vised Transliteration Model into Statistical Machine Translation, Proceedings of the
14th Conference of the European Chapter of the Association for Computational Linguis-
tics (EACL), Gothenburg, Sweden, April 2014

*** Paper ထဲက Method No. 2, Method No.3. ကို moses မှာ module အနေနဲ့ implementation လုပ်ထားပြီးသား

Method No.2 ဆိုတာက transliteration model ကို parallel corpus ထဲကနေ character level အနေနဲ့ learning လုပ်ပြီး auto ဆောက်တာ။
Method No.3 ကတော့ User defined transliteration dictionary ကို သုံးပြီး transliteration လုပ်ပေးမှာ။

တကယ်လို့ ရလဒ်ကောင်းရင် ဒီ ကောင်နဲ့လည်း MT share task မှာ စာတမ်း ရေးလို့ ရနိုင်တယ်။
Transliteration dictionary ကိုလည်း release လုပ်ရင်းနဲ့။
(auto transliteration parsing မော်ဒယ်ကိုလည်း စမ်းကြည့်နိုင်တယ်)

*** exp-syl7 ကတော့ Method 2 approach ကို သုံးထားတယ်။

ထုံးစံအတိုင်း path တွေကို update လုပ်တယ်။

config.baseline မှာ path ကို update လုပ်တယ်။
myrk-data = /home/ye/exp/smt/wat2021/exp-syl7/data/

run-baseline.pl မှာ
my @configs = `find /home/ye/exp/smt/wat2021/exp-syl7/*/ -name "config.baseline.*" | sort`;

run.sh မှာ
perl ./generate_configs.pl /home/ye/exp/smt/wat2021/exp-syl7/ /home/ye/exp/smt/wat2021/exp-syl7/data/

ပုံမှန်လိုပဲ path တွေကို update လုပ်တဲ့အပြင် config.baseline မှာ အသစ် ထပ်ဖြည့်တာက အောက်ပါအတိုင်း

[TRAINING]

### Added by Ye for WAT-2021 share task
## for Method 2
transliteration-module = "yes"
post-decoding-transliteration = "yes"

## for Method 3
# in-decoding-transliteration = "yes"
# transliteration-file = /file containing list of words to be transliterated/
----------

၃ခါလောက် symmetrize အဆင့်မှာ ရပ်ရပ်သွားတယ်။
STDERR ဖိုင်မှာ error မပေးဘူး။
run1.log မှာတော့ အောက်ပါအတိုင်း error ပေးတယ်။

number of steps doable or running: 3 at ၂၀၂၁ မတ် ၁၄ တနင်္ဂနွေ ၀၇:၁၀:၃၅ နံနက် +0630
	doable: TRAINING:build-lex-trans
	doable: TRAINING:build-transliteration-model
	doable: TRAINING:extract-phrases
	executing /home/ye/exp/smt/wat2021/exp-syl7//baseline/my-en/steps/1/TRAINING_build-lex-trans.1 via sh (1 active)
ERROR: you need to define GENERAL:srilm-dir

-------------
config.baseline မှာ 
srilm-dir = /home/ye/tool/srilm-1.7.3/bin/i686-m64

ရှေ့မှာ run ခဲ့တာတွေကို မဖျက်ပဲ ဆက်run ကြည့် အောက်ပါအတိုင်း ERROR ပေး

step TRAINING:build-transliteration-model crashed
number of steps doable or running: 1 at ၂၀၂၁ မတ် ၁၄ တနင်္ဂနွေ ၀၇:၁၉:၃၅ နံနက် +0630

------

baseline/ folder ဖျက်ပြီး ပြန် run ကြည့်တော့ transliteration-model ဆောက်တာ အိုကေသွားတယ်။
သို့သော် 1-1.en-my.pair-probs ဖိုင်ကို ဝင်လေ့လာတော့ အောက်ပါအတိုင်း တွေ့ရ။ အဆင်မပြေနိုင်ဘူး။ သူက လုံးဝ segmentation ဖြတ်ပေးထားတဲ့အတိုင်းပဲ 1 to 1 ယူပြီး mining လုပ်ချသွားတဲ့ ပုံရှိတယ်။

AAPP	စိတ်	0.000579069
ABSDF	အက်စ်	7.32859e-06
ACARE	ဆိုင်	1.54771e-05
ACCRA	တော်	2.01208e-05
ACMECS	မက်စ်	5.19599e-07
ADB	ဖွံ့	0.0023168
ADB	ရေး	0.0250323
AFA	ဖြစ်	0.00496529
AFDFI	လွတ်	0.000208305
AFOCO	ကျောင်း	4.30402e-05
AFOCO	တည်	2.47122e-05
AFP	အက်ဖ်	0.00237005
AFTA	ဆောင်	0.000423077
AFTA	အား	0.000265961
AGIPP	ဂျီ	1.24685e-05
AGIPP	မြန်း	2.01691e-05
AGM	အား	0.0058606
AHTN	ကြိမ်	0.00128852
AHTN	ဂျာ	0.000849387
AHTN	စည်း	0.000415233
AHTN	ထူး	0.000143735

-------

ဘာပဲ ဖြစ်ဖြစ် ဒီ experiment ရဲ့ ရလဒ်ကို record လုပ်မယ်။
သေချာတာက test-data, ALT-data တစ်ခုလုံးကို အခြေခံပြီးတော့ Transliteration Dictionary ဆောက်ပြီး run ရင်တော့ ရလဒ်က တက်မှာ သေချာတယ်။
Next experiment ကို အဲဒီလို လုပ်ကြည့်မယ်။

## Tuning

မှာ transliteration-model အတွက် သပ်သပ် tuning လုပ်တာကို အောက်ပါအတိုင်း တွေ့ရှိရ

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl7/baseline/en-my/model/Transliteration.1/tuning/tmp$ head ../input 
A C M E C S
A F O C O
A G I P P
A H T N
A I D S
A M R D P
A P F
A S E A N
A T S
B C P
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl7/baseline/en-my/model/Transliteration.1/tuning/tmp$ head ../reference 
မ က ် စ ်
က ျ ေ ာ င ် း
ဂ ျ ီ
စ ည ် း
အ ေ ့ ဒ ် စ ်
မ ွ န ်
က ေ ာ ်
ည ့ ်
မ ျ ာ း
စ ီ း
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl7/baseline/en-my/model/Transliteration.1/tuning/tmp$ head run3.out 
မ က ် စ ် 
က ျ ေ ာ င ် း 
ဂ ျ ီ 
ရ ှ ေ ့ 
အ ေ ့ ဒ ် စ ် 
မ ွ န ် 
က ေ ာ ် 
ဂ ိ တ ် 
မ ျ ာ း 
စ ီ း 
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl7/baseline/en-my/model/Transliteration.1/tuning/tmp$
---------------
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl7/baseline/en-my/model/Transliteration.1/model$ zless ./phrase-table.gz
A A P P ||| စ ိ တ ် ||| 0.050481 9.31294e-05 0.100962 2.52943e-05 ||| 0-0 1-0 1-1 1-2 2-3 3-3 ||| 2 1 1 ||| |||
A A T s ||| ဘ ေ ာ ||| 0.0147667 1.34717e-05 0.103367 0.000494421 ||| 3-0 3-1 0-2 1-2 2-2 3-2 ||| 7 1 1 ||| |||
A A ||| စ ိ တ ||| 0.050481 0.0120741 0.100962 0.00013222 ||| 0-0 1-0 1-1 1-2 ||| 2 1 1 ||| |||
A B S D F ||| အ က ် စ ် ||| 0.00813633 1.38504e-05 0.105772 1.32733e-05 ||| 2-0 2-1 3-1 2-2 1-3 2-3 4-4 ||| 13 1 1 ||| |||
A B S D ||| အ က ် စ ||| 0.0171477 0.000198259 0.102886 4.77838e-05 ||| 2-0 2-1 3-1 2-2 1-3 2-3 ||| 6 1 1 ||| |||
A C A R E ||| ဆ ိ ု င ် ||| 0.010481 1.5441e-05 0.10481 2.43916e-06 ||| 3-0 2-1 3-2 3-3 4-3 4-4 ||| 10 1 1 ||| |||
A C A ||| ိ ||| 0.00503678 0.00510947 0.105772 0.119048 ||| 2-0 ||| 21 1 1 ||| |||
A C C R A ||| တ ေ ာ ် ||| 0.0147667 9.87738e-06 0.103367 3.35625e-05 ||| 0-0 1-1 1-2 2-2 3-2 1-3 4-3 ||| 7 1 1 ||| |||
A C M E C S ||| မ က ် စ ် ||| 0.0338144 3.26817e-05 0.101443 5.38823e-05 ||| 2-0 5-2 3-3 5-3 4-4 5-4 ||| 3 1 1 ||| |||
A C M ||| မ ||| 0.00328553 0.0080168 0.0591395 0.205128 ||| 2-0 ||| 36 2 1 ||| |||
A C M ||| မ က ||| 0.0342954 0.0080168 0.0514431 0.007992 ||| 2-0 ||| 3 2 1 ||| |||
A D B ||| ဖ ွ ံ ့ ||| 0.0342954 0.000432146 0.0514431 3.36703e-07 ||| 0-0 1-1 2-2 2-3 ||| 3 2 1 ||| |||
A D B ||| ရ ေ း ||| 0.00762872 0.000139845 0.0572154 4.63962e-05 ||| 0-0 0-1 0-2 1-2 ||| 15 2 1 ||| |||
A D ||| ဖ ွ ||| 0.0209621 0.00897309 0.0524051 0.000538949 ||| 0-0 1-1 ||| 5 2 1 ||| |||
A D ||| ရ ေ း ||| 0.00762872 0.0170611 0.0572154 4.63962e-05 ||| 0-0 0-1 0-2 1-2 ||| 15 2 1 ||| |||
A E D ||| င ် း ||| 0.00948448 0.000899987 0.104329 0.00101656 ||| 2-0 2-1 1-2 2-2 ||| 11 1 1 ||| |||
A F A ||| ဖ ြ စ ် ||| 0.050481 0.000731564 0.100962 4.90633e-06 ||| 0-0 1-0 2-1 2-2 2-3 ||| 2 1 1 ||| |||
A F D F I ||| လ ွ တ ် ||| 0.050481 1.8039e-06 0.100962 7.39051e-06 ||| 2-0 3-0 4-0 2-1 0-2 2-2 1-3 ||| 2 1 1 ||| |||
A F O C O ||| က ျ ေ ာ ||| 0.0274051 1.39095e-05 0.0219241 3.25598e-05 ||| 1-0 3-1 2-3 ||| 4 5 1 ||| |||
A F O C O ||| က ျ ေ ာ င ||| 0.0274051 1.39095e-05 0.0219241 4.22854e-06 ||| 1-0 3-1 2-3 ||| 4 5 1 ||| |||
A F O C O ||| က ျ ေ ာ င ် ||| 0.0274051 1.39095e-05 0.0219241 1.09832e-06 ||| 1-0 3-1 2-3 ||| 4 5 1 ||| |||

Transliteration model ကို tuning လုပ်နေတဲ့ အဆင့်မှာ အောက်ပါအတိုင်း ERROR ပေး

step TUNING:filter crashed
number of steps doable or running: 1 at ၂၀၂၁ မတ် ၁၄ တနင်္ဂနွေ ၀၈:၀၁:၅၆ နံနက် +0630

--------------


## Evaluation or Result

ဒီ experiment ကို အကောင်ထည်ဖော်ဖို့ ဆိုရင် နည်းနည်း အချိန်ပေးရမယ်။ Let's Stop!

####################
### experiment 8 ###
####################

XML Markup ကို သုံးရင်ကော?!
Transliteration word တွေကို auto detect လုပ်ပြီးတော့ ဘာသာပြန်ရင်တော့ ရလဒ်က တက်မှာ အမှန်ပဲ။


(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/baseline/en-my/xml$ echo "It has been confirmed that eight thoroughbred race horses at Randwick Racecourse in Sydney have been infected with equine influenza ." | ~/tool/mosesbin/ubuntu-17.04/moses/bin/moses -f ../evaluation/test.filtered.ini.1 
Defined parameters (per moses.ini or switch):
	config: ../evaluation/test.filtered.ini.1 
	distortion-limit: 6 
	feature: UnknownWordPenalty WordPenalty PhrasePenalty PhraseDictionaryMemory name=TranslationModel0 num-features=4 path=/home/ye/exp/smt/wat2021/exp-syl4//baseline/en-my/evaluation/test.filtered.1/phrase-table.0-0.1.1.gz input-factor=0 output-factor=0 LexicalReordering name=LexicalReordering0 num-features=6 type=wbe-msd-bidirectional-fe-allff input-factor=0 output-factor=0 path=/home/ye/exp/smt/wat2021/exp-syl4//baseline/en-my/evaluation/test.filtered.1/reordering-table.1.wbe-msd-bidirectional-fe.0-0.1 Distortion KENLM name=LM0 factor=0 path=/home/ye/exp/smt/wat2021/exp-syl4//baseline/en-my/lm/myrk.binlm.1 order=6 
	input-factors: 0 
	mapping: 0 T 0 
	weight: LexicalReordering0= 0.0281432 0.0219143 0.159276 0.0346079 0.0218057 0.133628 Distortion0= 0.00462869 LM0= 0.0396439 WordPenalty0= -0.208 PhrasePenalty0= 0.208074 TranslationModel0= 0.0393394 0.0263135 0.031987 0.0426387 UnknownWordPenalty0= 1 
line=UnknownWordPenalty
FeatureFunction: UnknownWordPenalty0 start: 0 end: 0
line=WordPenalty
FeatureFunction: WordPenalty0 start: 1 end: 1
line=PhrasePenalty
FeatureFunction: PhrasePenalty0 start: 2 end: 2
line=PhraseDictionaryMemory name=TranslationModel0 num-features=4 path=/home/ye/exp/smt/wat2021/exp-syl4//baseline/en-my/evaluation/test.filtered.1/phrase-table.0-0.1.1.gz input-factor=0 output-factor=0
FeatureFunction: TranslationModel0 start: 3 end: 6
line=LexicalReordering name=LexicalReordering0 num-features=6 type=wbe-msd-bidirectional-fe-allff input-factor=0 output-factor=0 path=/home/ye/exp/smt/wat2021/exp-syl4//baseline/en-my/evaluation/test.filtered.1/reordering-table.1.wbe-msd-bidirectional-fe.0-0.1
Initializing Lexical Reordering Feature..
FeatureFunction: LexicalReordering0 start: 7 end: 12
line=Distortion
FeatureFunction: Distortion0 start: 13 end: 13
line=KENLM name=LM0 factor=0 path=/home/ye/exp/smt/wat2021/exp-syl4//baseline/en-my/lm/myrk.binlm.1 order=6
FeatureFunction: LM0 start: 14 end: 14
Loading UnknownWordPenalty0
Loading WordPenalty0
Loading PhrasePenalty0
Loading LexicalReordering0
Loading table into memory...done.
Loading Distortion0
Loading LM0
Loading TranslationModel0
Start loading text phrase table. Moses format : [6.625] seconds
Reading /home/ye/exp/smt/wat2021/exp-syl4//baseline/en-my/evaluation/test.filtered.1/phrase-table.0-0.1.1.gz
----5---10---15---20---25---30---35---40---45---50---55---60---65---70---75---80---85---90---95--100
****************************************************************************************************
Created input-output object : [12.953] seconds
Translating: It has been confirmed that eight thoroughbred race horses at Randwick Racecourse in Sydney have been infected with equine influenza . 
Line 0: Initialize search took 0.000 seconds total
Line 0: Collecting options took 0.001 seconds at moses/Manager.cpp Line 141
Line 0: Search took 0.129 seconds
အဲ ဒါ အ ကြောင်း အ တည် ပြု နိုင် ခြင်း သည် ရှစ် နာ ရီ thoroughbred ပြိုင် ပွဲ မှာ မြင်း တွေ ဆစ် ဒ နီ တွင် Randwick Racecourse equine ကွေး နှ င့် ရော ဂါ ကူး စက် ခံ ရ ရှိ နေ ပြီ ဖြစ် ပါ သည် ။ 
BEST TRANSLATION: အဲ ဒါ အ ကြောင်း အ တည် ပြု နိုင် ခြင်း သည် ရှစ် နာ ရီ thoroughbred|UNK|UNK|UNK ပြိုင် ပွဲ မှာ မြင်း တွေ ဆစ် ဒ နီ တွင် Randwick|UNK|UNK|UNK Racecourse|UNK|UNK|UNK equine|UNK|UNK|UNK ကွေး နှ င့် ရော ဂါ ကူး စက် ခံ ရ ရှိ နေ ပြီ ဖြစ် ပါ သည် ။ [111111111111111111111]  [total=-402.437] core=(-400.000,-42.000,19.000,-28.702,-56.493,-47.222,-76.335,-0.797,-10.141,-1.216,-1.421,-6.184,-2.492,-42.000,-166.384)  
Line 0: Decision rule took 0.000 seconds total
Line 0: Additional reporting took 0.000 seconds total
Line 0: Translation took 0.130 seconds total
Name:moses	VmPeak:1872264 kB	VmRSS:1649856 kB	RSSMax:1729956 kB	user:13.100	sys:0.516	CPU:13.616	real:13.625
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/baseline/en-my/xml$

## Applying XML Markup...

echo "It has been confirmed that eight thoroughbred race horses at <np translation="Randwick">ရ န့် ဝစ်ခ်</np> Racecourse in <np translation="Sydney">ဆစ် ဒ နီ</np> have been infected with equine influenza ." | ~/tool/mosesbin/ubuntu-17.04/moses/bin/moses -xml-input exclusive -f ../evaluation/test.filtered.ini.1
...
...
အဲ ဒါ အ ကြောင်း အ တည် ပြု နိုင် ခြင်း သည် ရှစ် နာ ရီ thoroughbred ပြိုင် ပွဲ မှာ မြင်း တွေ က ရ န့် ဝစ်ခ် Racecourse ဆစ် ဒ နီ တွင် ရှိ equine ကွေး နှ င့် ကူး စက် သော ရော ဂါ ဖြစ် ခဲ့ ပါ တယ် ။ 
BEST TRANSLATION: အဲ ဒါ အ ကြောင်း အ တည် ပြု နိုင် ခြင်း သည် ရှစ် နာ ရီ thoroughbred|UNK|UNK|UNK ပြိုင် ပွဲ မှာ မြင်း တွေ က ရ|UNK|UNK|UNK န့်|UNK|UNK|UNK ဝစ်ခ်|UNK|UNK|UNK Racecourse|UNK|UNK|UNK ဆစ်|UNK|UNK|UNK ဒ|UNK|UNK|UNK နီ|UNK|UNK|UNK တွင် ရှိ equine|UNK|UNK|UNK ကွေး နှ င့် ကူး စက် သော ရော ဂါ ဖြစ် ခဲ့ ပါ တယ် ။ [1111111111111111111111111]  [total=-901.681] core=(-900.000,-43.000,24.000,-30.530,-53.004,-48.451,-69.043,-0.797,-5.517,-2.057,-1.421,-4.684,-2.632,-38.000,-186.139)  
Line 0: Decision rule took 0.000 seconds total
Line 0: Additional reporting took 0.000 seconds total
Line 0: Translation took 0.136 seconds total
Name:moses	VmPeak:1872264 kB	VmRSS:1648208 kB	RSSMax:1730164 kB	user:13.335	sys:0.316	CPU:13.651	real:13.645

-------------------------

echo "It has been confirmed that eight thoroughbred race horses at <np translation="ရ န့် ဝစ်ခ်">Randwick</np> Racecourse in <np translation="ဆစ် ဒ နီ">Sydney</np> have been infected with equine influenza ." | ~/tool/mosesbin/ubuntu-17.04/moses/bin/moses -xml-input exclusive -f ../evaluation/test.filtered.ini.1

 ဒါ အ ကြောင်း အ တည် ပြု နိုင် ခြင်း သည် ရှစ် နာ ရီ thoroughbred ပြိုင် ပွဲ မှာ မြင်း တွေ ဆစ် ဒ နီ တွင် Randwick Racecourse equine ကွေး နှ င့် ရော ဂါ ကူး စက် ခံ ရ ရှိ နေ ပြီ ဖြစ် ပါ သည် ။ 
BEST TRANSLATION: အဲ ဒါ အ ကြောင်း အ တည် ပြု နိုင် ခြင်း သည် ရှစ် နာ ရီ thoroughbred|UNK|UNK|UNK ပြိုင် ပွဲ မှာ မြင်း တွေ ဆစ် ဒ နီ တွင် Randwick|UNK|UNK|UNK Racecourse|UNK|UNK|UNK equine|UNK|UNK|UNK ကွေး နှ င့် ရော ဂါ ကူး စက် ခံ ရ ရှိ နေ ပြီ ဖြစ် ပါ သည် ။ [111111111111111111111]  [total=-402.437] core=(-400.000,-42.000,19.000,-28.702,-56.493,-47.222,-76.335,-0.797,-10.141,-1.216,-1.421,-6.184,-2.492,-42.000,-166.384)  
Line 0: Decision rule took 0.000 seconds total
Line 0: Additional reporting took 0.000 seconds total
Line 0: Translation took 0.131 seconds total
Name:moses	VmPeak:1872264 kB	VmRSS:1649880 kB	RSSMax:1730000 kB	user:13.481	sys:0.320	CPU:13.801	real:13.794

အဲ ဒါ အ ကြောင်း အ တည် ပြု နိုင် ခြင်း သည် ရှစ် နာ ရီ thoroughbred ပြိုင် ပွဲ မှာ မြင်း တွေ ဆစ် ဒ နီ တွင် Randwick Racecourse equine ကွေး နှ င့် ရော ဂါ ကူး စက် ခံ ရ ရှိ နေ ပြီ ဖြစ် ပါ သည် ။ 
BEST TRANSLATION: အဲ ဒါ အ ကြောင်း အ တည် ပြု နိုင် ခြင်း သည် ရှစ် နာ ရီ thoroughbred|UNK|UNK|UNK ပြိုင် ပွဲ မှာ မြင်း တွေ ဆစ် ဒ နီ တွင် Randwick|UNK|UNK|UNK Racecourse|UNK|UNK|UNK equine|UNK|UNK|UNK ကွေး နှ င့် ရော ဂါ ကူး စက် ခံ ရ ရှိ နေ ပြီ ဖြစ် ပါ သည် ။ [111111111111111111111]  [total=-402.437]
--------------------------
အရင်ဆုံး test data ထဲမှာရှိတဲ့ transliteration လုပ်ချင်တဲ့ စာလုံးတွေကို transliteration dictionary ဆောက်ခဲ့တယ်။
စာကြောင်းရေ အကြောင်း ၁၀၀၀ အတွက်။

ပြီးတော့ perl script နဲ့ input English test data ထဲက name တွေကို search and replace လုပ်တဲ့နည်းနဲ့ XML Mark တွေကို ထည့်ခဲ့တယ်။
ပြီးတော့ testing and evaluation လုပ်တော့ BLEU score က အောက်ပါအတိုင်း ရခဲ့တယ်။

perl ./add-xml-markup.pl ./dict1 ./test.en > test.xml.en

~/tool/mosesbin/ubuntu-17.04/moses/bin/moses -xml-input exclusive -i ./test.xml.en -f ../evaluation/test.filtered.ini.1 > en-my.xml.hyp

### With XML-Markup

-exclusive (without prob), n tag
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/baseline/en-my/xml$ perl ~/tool/mosesbin/ubuntu-17.04/moses/scripts/generic/multi-bleu.perl ./test.reference.txt.1 < ./en-my.xml.hyp
BLEU = 18.84, 53.8/26.0/13.1/6.9 (BP=1.000, ratio=1.014, hyp_len=59697, ref_len=58895)

-exclusive (with prob), n tag
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/baseline/en-my/xml$ perl ~/tool/mosesbin/ubuntu-17.04/moses/scripts/generic/multi-bleu.perl ./test.reference.txt.1 < ./en-my.xml.hyp
BLEU = 18.84, 53.8/26.0/13.1/6.9 (BP=1.000, ratio=1.014, hyp_len=59697, ref_len=58895)

-inclusive (with prob), n tag
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/baseline/en-my/xml$ perl ~/tool/mosesbin/ubuntu-17.04/moses/scripts/generic/multi-bleu.perl ./test.reference.txt.1 < ./en-my.xml.hyp
BLEU = 18.84, 53.8/26.0/13.1/6.9 (BP=1.000, ratio=1.014, hyp_len=59697, ref_len=58895)

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/baseline/en-my/xml$ head en-my.xml.hyp
အဲ ဒါ အ ကြောင်း အ တည် ပြု နိုင် ခြင်း သည် ရှစ် နာ ရီ thoroughbred ပြိုင် ပွဲ မှာ မြင်း တွေ ဆစ် ဒ နီ တွင် ရ န့် ဝစ်ခ် Racecourse equine ကွေး နှ င့် ရော ဂါ ကူး စက် ခံ ရ ရှိ နေ ပြီ ဖြစ် ပါ သည် ။ 
သော့ ခတ် ထား ချ ရ န့် ဝစ်ခ် ခဲ့ သည် ၊ နှ င့် က မျှော် လ င့် ထား တယ် အဲ ဒါ ကြော င့် ဆက် လက် နေ ထိုင် ကြ ဖို့ အ တွက် ကို နှစ် လ အ ထိ ဖြစ် ပါ တယ် ။ 
အဲ ဒါ က မျှော် လ င့် ထား virulent တုပ် ကွေး မိ လိ မ့် မယ် အဲ ဒီ အ များ စု ပေါင်း ၇၀၀ ခ န့် အ ထိ ခိုက် စေ stabled မြင်း တွေ အ ရ န့် ဝစ်ခ် မှာ ဖြစ် ပါ တယ် ။ 
အန် အက်စ် ဒ ဗ လျူ ဝန် ကြီး ဌာ န ဝန် ကြီး သ ည့် စက် မှု လုပ် ငန်း များ အ ဖြစ် လိ မ့် မယ် ဟု ပြော ကြား ခဲ့ ပြီး နောက် ရက် ပေါင်း ၃၀ အ ထိ quarantined အ တုပ် ကွေး မိ ၏ နောက် ဆုံး လက် မှတ် ရေး ထိုး သည် ။ 
အ မှု သည် အ ဖြစ် ပ ထ မ ဆုံး ကူး စက် သော ရော ဂါ များ ရှိ သော် လည်း ၊ မြင်း တွေ က လူ မျိုး စု တစ် ဒါ ဇင် infecting အန် အက်စ် ဒ ဗ လျူ နှ င့် ကွင်းစ် လန်းဒ် recreational မြင်း တွေ ပါ တယ် ။ 
ဒါ ကူး စက် က အ လွန် အ မင်း အ ဖြစ် အ တုပ် ကွေး မိ တယ် ဒါ ပေ မဲ့ လူ သား တွေ ကို ထော င့် ငါး ရာ ကို မ ရ နိုင် လို့ ဖြစ် ပါ တယ် ။ 
အ မျိုး သား ပြိုင် ပွဲ shutdown သောင်း နဲ့ ချီ ပြီး အ ကုန် သည် စက် မှု လက် မှု လုပ် ငန်း ရှင် များ ကို နေ့ တိုင်း ဒေါ် လာ သန်း ပေါင်း များ စွာ ရှိ နေ ပါ သည် ။ 
၏ အုပ် ချုပ် ရေး အ နေ နဲ့ အ များ ကြီး Racing အန် အက်စ် ဒ ဗ လျူ ၊ ပီ တာ လန်း ဒီစ် ဗွီ မ ထိ ခိုက် ပျက် စီး ခဲ့ တုန်း က ပြော ပြိုင် ပွဲ တစ် ခု က တည်း က ပြီး ခဲ့ တဲ့ စ နေ တ နင်္ဂ နွေ မှာ မြင်း လှုပ် ရှား မှု များ အ ပေါ် က န့် သတ် တာ ပိတ် ပင် တာ က &quot; ဒီ နေ့ လိုက် ၊ အ မည်း ရောင် နေ့ &quot; အ ပြိုင် ပွဲ တွင် စက် မှု လက် မှု လုပ် ငန်း ရှင် များ အ တွက် အန် အက်စ် ဒ ဗ လျူ ပါ တယ် ။ 
Racing က ပြန် လည် စ တင် ရန် မျှော် လ င့် ထား သည် မှ လွဲ ၍ အား လုံး တွင် အန် အက်စ် ဒ ဗ လျူ နှ င့် သြ စ တြေး လျ ပြည် နယ် များ အ ပေါ် ကွင်းစ် လန်းဒ် စ နေ ၊ တ နင်္ဂ နွေ ပိတ် ရက် မှာ ဖြစ် ပါ တယ် ။ 
ဆစ် ဒ နီ သော် လည်း မ carnival ပြိုင် ပွဲ ရဲ့ နွေ ဦး ရှိ နေ တာ ကို ဖျက် သိမ်း လိုက် ၊ မဲလ် ဘို နီ ၏ မျှော် လ င့် ထား သည် ကို ဆော င့် ကန် လိုက် တာ ဆင်း ကော့ ဖီးလ် ဖ လား ဒီ စ နေ ၊ တ နင်္ဂ နွေ ပိတ် ရက် နှ င့် အ တူ ပါ တယ် ။ 

-exclusive (with prob), np tag
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/baseline/en-my/xml$ perl ~/tool/mosesbin/ubuntu-17.04/moses/scripts/generic/multi-bleu.perl ./test.reference.txt.1 < ./en-my.xml.hyp
BLEU = 18.84, 53.8/26.0/13.1/6.9 (BP=1.000, ratio=1.014, hyp_len=59697, ref_len=58895)

### Witout XML-Markup Result
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/baseline/en-my/xml$ perl ~/tool/mosesbin/ubuntu-17.04/moses/scripts/generic/multi-bleu.perl ./test.reference.txt.1 < ../evaluation/test.cleaned.1 
BLEU = 18.79, 53.7/26.0/13.1/6.8 (BP=1.000, ratio=1.010, hyp_len=59498, ref_len=58895)

---------------

dictionary မှာ NER စာလုံး ၁၀၀ နဲ့ စမ်းကြည့်တော့ အောက်ပါ ရလဒ်ကို ရ

for en-my:
Result of -xml-input exclusive:
BLEU = 19.00, 54.0/26.2/13.2/7.0 (BP=1.000, ratio=1.014, hyp_len=59719, ref_len=58895)

Result of -xml-input inclusive:
BLEU = 18.99, 54.0/26.2/13.2/7.0 (BP=1.000, ratio=1.015, hyp_len=59750, ref_len=58895)

---------------

dictionary မှာ NER, transliteration စာလုံး အလုံး ၂၀၀ နဲ့ စမ်းကြည့်တော့ အောက်ပါ အတိုင်း ရလဒ်က တိုးလာတာကို မြင်ရ...
အခု dictionary က test data ထဲက head -n 154 လိုင်းနဲ့ ဆောက်ထားတာမို့...
သေချာတာက ALT corpus တစ်ခုလုံးကို dictionary ဆောက်လိုက်ရင် BLEU 3, 4, 5 လောက် အေးအေးဆေးဆေး တက်နိုင်မယ်လို့ မျှော်လင့်တယ်။
ဒီ Hybrid or XML-Markup ကို သုံး experiment လုပ်ပြီး Share Task မှာ ရေးမယ်။ plus ဘာထပ်ဖြည့်လို့ရမလဲ စဉ်းစားနေတယ်...
အခုလုပ်နေတာက decoding အပိုင်းမှာ ဆိုတော့ ... data-cleaning နဲ့တော့ တွဲလို့ ရတယ်။ pre-processing အလုပ်အနေနဲ့...
Title: Data Cleaning, XML Markup based Hybrid SMT for  English and Myanmar Language Pair လို့ ထားရင်ကောင်းမလား???

for en-my
Result of -xml-input exclusive:
BLEU = 19.30, 53.8/26.2/13.5/7.3 (BP=1.000, ratio=1.018, hyp_len=59983, ref_len=58895)

Result of -xml-input inclusive:
BLEU = 19.30, 53.8/26.2/13.5/7.3 (BP=1.000, ratio=1.019, hyp_len=60017, ref_len=58895)

-----------------
Test/Eval with 300 words dictionary:

for en-my:
Result of -xml-input exclusive:
BLEU = 19.80, 54.2/26.7/13.9/7.6 (BP=1.000, ratio=1.021, hyp_len=60124, ref_len=58895)

Result of -xml-input inclusive:
BLEU = 19.80, 54.2/26.7/13.9/7.6 (BP=1.000, ratio=1.022, hyp_len=60165, ref_len=58895)

for my-en:
Baseline:
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4/baseline/my-en/xml$ ./run-exp.sh 
Baseline result:
BLEU = 8.46, 41.1/12.0/5.0/2.1 (BP=1.000, ratio=1.141, hyp_len=31865, ref_len=27929)

Result of -xml-input exclusive:
BLEU = 9.61, 43.0/13.3/5.8/2.6 (BP=1.000, ratio=1.121, hyp_len=31310, ref_len=27929)

BLEU = 9.64, 43.2/13.4/5.9/2.6 (BP=1.000, ratio=1.120, hyp_len=31280, ref_len=27929)
cut: dict2: No such file or directory
--------------
XML-Markup dictionary with 400 words (all English words in test-data)

en-my
Result of -xml-input exclusive:
BLEU = 20.29, 54.6/27.2/14.3/8.0 (BP=1.000, ratio=1.023, hyp_len=60234, ref_len=58895)

Result of -xml-input inclusive:
BLEU = 20.30, 54.6/27.2/14.4/8.0 (BP=1.000, ratio=1.023, hyp_len=60271, ref_len=58895)

my-en

Result of -xml-input exclusive:
BLEU = 8.47, 41.1/12.0/5.0/2.1 (BP=1.000, ratio=1.141, hyp_len=31862, ref_len=27929)

----------------
ရလဒ်က တက်တယ် point ပဲ ... ပြီးတော့ လက်ရှိ အချိန်ထိက n tag နဲ့ np tag ကလည်း အပြောင်းအလဲ သိပ်ရှိတာကို မမြင်ရဘူး။
ဒီ experiment လုပ်မယ်ဆိုရင်တော့ transliteration dictionary ကို test data လိုင်း ၁၀၀၀ စာကို ပြီးအောင်လုပ်ပြီး ကြည့်မှပဲ ဘယ်လောက်အထိ ရလဒ်က တက်မလဲ ဆိုတာကို သေချာ သိရလိမ့်မယ်။
ခန့်မှန်းတာက BLEU 1 လောက်တော့ တက်နိုင်တယ်လို့ ထင်တယ်။ ALT test data မှာက အင်္ဂလိပ်စာလုံးနာမည်တွေ အများကြီးပါနေလို့...

I prepared ./run-exp.sh

dictionary ကို ပြင်ဆင်ခဲ့ ပြီး run ကြည့်တော့ ရလဒ်က အောက်ပါအတိုင်း...



============

for Myanmar-English ကိုလည်း XML-Markup based Hybrid approach နဲ့ ရလဒ်တက်အောင်လုပ်လို့ ရတယ်။


Dictionary Info:

*** Experiment with transliterated dictionary

Test data ကို ကြည့်တဲ့အခါမှာ အောက်ပါအတိုင်း အင်္ဂလိပ်နာမည်တွေကို transliteration လုပ်ထားတာတွေ ပါတာကို တွေ့ရတယ်။
မြင်သာအောင် လေးထောင့်ကွင်းနဲ့ ခတ်ပြထားတယ်။

[[ဆစ် ဒ နီ က ရ န့် ဝစ်ခ်]] မြင်း ပြိုင် ကွင်း မှ မျိုး သ န့် ပြိုင် မြင်း ရှစ် ကောင် ဟာ မြင်း တုတ် ကွေး ရော ဂါ ကူး စက် ခံ ခဲ့ ရ တယ် ဆို တာ အ တည် ပြု ခဲ့ ပါ တယ် ။
[[ရ န့် ဝစ်ခ် ]]ကို ပိတ် ထား ခဲ့ ပြီး ၂ လ အ ထိ ကြာ ကြာ ဆက် လက် ထိန်း သိမ်း ထား ရန် မျှော် လ င့် ပါ တယ် ။
တုတ် ကွေး ရဲ့ နောက် ဆုံး လက္ခ ဏာ နောက် ရက် ၃၀ အ ထိ အ ထောက် အ ပံ့ တွေ ကို သီး သ န့် ထား လိ မ့် မည် လို့ အ ဓိ က စက် မှု [[ဇုန်]] ရဲ့ [[အန် အက်စ် ဒ ဗ လျူ]] ဝန် ကြီး က ပြော ခဲ့ ပါ တယ် ။
[[အန် အက်စ် ဒ ဗ လျူ]] နှ င့် [[ကွင်းစ် လန်းဒ်]] တစ် လျှောက် မှ အ ပန်း ဖြေ ရာ သုံး သော မြင်း များ [[ဒါ ဇင်]] များ စွာ ကူး စက် ခံ ရ သော် လည်း ဒီ ဖြစ် ရပ် ဟာ ပြိုင် မြင်း များ အ တွက် ပ ထ မ ဆုံး ကူး စက် ခြင်း ဖြစ် ပါ သည် ။
လွန် ခဲ့ တဲ့ ပိတ် ရက် က မြင်း လှုပ် ရှား မှု ကို တား မြစ် မှု ရှိ က တည်း က မြင်း ပွဲ ကို အ လျင် ပြတ် နေ စဉ် တွင် ယ နေ့ က တော့ [[အန် အက်စ် ဒ ဗ လျူ]] မှာ မြင်း ပွဲ [[ဇုန်]] အ တွက် &quot; ဆိုး သော ၊ အ နက် ရောင် နေ့ &quot; တစ် နေ့ ဖြစ် တယ် လို့ [[အန် အက်စ် ဒ ဗ လျူ]] မြင်း ပွဲ ရဲ့ အ လုပ် အ မှု ဆောင် အ ကြီး အ ကဲ [[ပီ တာ ဗွီ လန်း ဒီစ်]] က ပြော ခဲ့ ပါ တယ် ။
ဒီ စ နေ တ နင်္ဂ နွေ မှာ [[အန် အက်စ် ဒ ဗ လျူ]] နှ င့် [[ကွင်းစ် လန်းဒ်]] မှ လွဲ ၍ [[သြ စ တြေး လျ]] တိုက် ပြည် နယ် များ အား လုံး တွင် မြင်း ပွဲ ပြန် စ ဖို့ မျှော် လ င့် ပါ တယ် ။
[[ဆစ် ဒ နီ]] ရဲ့ နွေ ဦး ရာ သီ မြင်း ပွဲ ဖွ င့် ပွဲ ကို ဖျက် သိမ်း လိုက် စဉ် [[မဲလ် ဘို နီ]] ရဲ့ ပွဲ ကို ဒီ စ နေ တ နင်္ဂ နွေ တွင် [[ကော့ ဖီးလ်]] ဖ လား ပွဲ နှ င့် စ တင် ရန် မျှော် လ င့် ပါ တယ် ။
[[ဗိုင်း ရပ်စ်]] ကင်း စင် တဲ့ ပြည် နယ် အ ဖြစ် ထား ရှိ ဖို့ ကြိုး ပမ်း ရန် ဒေ သ မှာ အ ထူး ကြို တင် ကာ ကွယ် မှု များ နဲ့ ဖ လား ပွဲ ကို ကျင်း ပ သွား လိ မ့် မည် ။
အ များ ပြည် သူ နဲ့ မြင်း များ နဲ့ အ လုပ် လုပ် သူ တွေ ကြား က စာ ချုပ် ကို ပယ် ဖျက် ပြီး [[ဆစ် ဒ နီ]] အ ခြေ စိုက် ပြိုင် မြင်း စီး သူ [[ဒါ ရန် ဘတ် မန်း]] နှ င့် [[ဟ ရု ဘိုး မန်း]] နှ င့် [[ဘတ် ကန်း မင်းစ်]] အ ပါ အ ဝင် ပြည် နယ် တွင်း သင် တန်း ပေး သူ များ ကို ပါ ဝင် ရန် ခွ င့် မ ပြု တော့ ပါ ။
[[သြ စ တြေး လျ]] မြင်း ပွဲ မှာ အ ကြီး မား ဆုံး နာ မည် များ မှ အ ချို့ ပျောက် သွား သော် လည်း [[မဲလ် ဘို နီ]] ရဲ့ နွေ ဦး ရာ သီ ပွဲ တော် ဟာ အ ဓိ က အား ဖြ င့် ပ က တိ အ တိုင်း ဆက် လက် တည် ရှိ နေ လိ မ့် မည် လို့ စိုက် ပျိုး ရေး ဗ ဟို အ စိုး ရ ဝန် ကြီး [[ပီ တာ မက် ဂေါ် ရန်]] က ပြော ခဲ့ ပါ တယ် ။
[[ဒီ ဇင် ဘာ လ ]]၂၆ နှ င့် ၂၇ တွင် [[ဘ ရာ ဇီး ရီ ရို ဒီ ဂျ နီ ရို]] မြို့ ၏ [[ကတ် တမ် ဘီ]] ရပ် ကွက် အ တွင်း ရှိ [[ရှန် တီ တောင်း]] &quot; [[မော် ရို ဒါ မင် န ရာ]] &quot; ( [[မီ နာ]] တောင် တန်း ) တစ် ဝိုက် တွင် လူ ဆိုး ဂိုဏ်း အ ချင်း ချင်း မူး ယစ် ဆေး ဝါး ရောင်း ဝယ် ရင်း ပိုင် နက် လု ရာ မှ ပစ် ခတ် မှု ဖြစ် ပွား ခဲ့ ရာ အ နည်း ဆုံး လူ ၁၁ ဉီး သေ ဆုံး ခဲ့ သည် ။

*** တချို့ကိစ္စတွေက ဘာသာပြန်ထားတဲ့အပေါ်ကိုမူတည်ပြီးတော့ model အနေနဲ့ က handle လုပ်ဖို့ ခက်ခဲတယ်။ NER dictionary ကို သုံးထားတာတောင်မှ။
ဥပမာ အောက်ပါ စာကြောင်းမျိုး..

&amp; quot ; There is a growing sense of insecurity among media persons who increasingly interpret each attack on journalists as a warning to &quot; behave , &quot; &amp; quot ; the HRCP said last Monday .	“ စာ နယ် ဇင်း သ မား များ အ ပေါ် တိုက် ခိုက် မှု တစ် ခု ချင်း စီ အား ‘ ဆင် ခြင် ပြု မူ ‘ ရန် သ တိ ပေး ချက် တစ် ရပ် အ ဖြစ် အ ကျယ် တ ဝ င့် ဖော် ပြ တဲ့ မီ ဒီ ယာ သ မား များ ကြား မှာ လည်း မ လုံ ခြုံ မှု ဟာ ကြီး ထွား လာ သော သ ဘော တစ် ရပ် ဖြစ် နေ ပါ တယ် ၊ “ ဟု အိပ်ခ်ျ အာ စီ ပီ ( ပါ ကစ္စ တန် ၏ လူ့ အ ခွ င့် အ ရေး ကော် မ ရှင် ) က ပြီး ခဲ့ သော တ နင်္လာ နေ့ တွင် ပြော ကြား ခဲ့ သည် ။

HRCP ဆိုတာကို ဗမာစာဘက်အခြမ်းမှာက  [[အိပ်ခ်ျ အာ စီ ပီ ( ပါ ကစ္စ တန် ၏ လူ့ အ ခွ င့် အ ရေး ကော် မ ရှင် ) ]] လို သဘောကောင်းပြီး အရှည်ကြီး ပြန်ပေးထားတာမို့...

MT မော်ဒယ်အနေနဲ့က ဒီလိုမျိုး နာမည်အရှည်ကြီး နဲ့ ရောမဂဏန်းတောင်ပါတဲ့ ဟာတွေကို translate လုပ်ဖို့ဆိုတာက ဒေတာမလုံလောက်ရင်ခက်ခဲတယ် ဥပမာ
Pope Shenouda III of Alexandria	ပုပ် ရ ဟန်း မင်း ကြီး ရှီ နို တာ ၃ အ လက် ဇန်း ဒါး

*** လက်တွေ့ transliteration ကို ပြင်ဆင်တဲ့နေရာမှာ အောက်ပါလိုမျိုး ပြဿနာတွေရှိတယ်
Shi &amp; apos ; ite ===> ရှီး ရိုက်
(normalization လုပ်ထားလို့ ဖြစ်တဲ့ ပြဿနာ)

###################
### experiment9 ###
###################

ကျောင်းသားတွေကို အကြံပေးရန်...

နာရီတွေ၊ ရက်စွဲတွေ၊ ဂဏန်းတွေကို ပါ XML-Markup လုပ်လိုက်တာက လက်တွေ့ MT System Implementation အတွက်က အခရာပဲ
အဲဒီအပိုင်းကို လည်းဖြည့်ပြီး experiment လုပ်ကြည့်ကြရန်။

#####################
### experiment 10 ###
#####################

မြန်မာစာ ဒေတာအတွက်က word segmenter တစ်ခု အကြမ်းဆောက်ပြီး word ဖြတ်ပြီး run ကြည့်ခဲ့။

en-my
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-word1/baseline/en-my/evaluation$ cat test.multi-bleu.1 
BLEU = 4.92, 36.4/9.6/2.6/0.7 (BP=1.000, ratio=1.034, hyp_len=38046, ref_len=36807)

my-en
cleaning လုပ်တဲ့အဆင့်မှာ error ပေးပြီး ရပ်သွားခဲ့။

#####################
### experiment 11 ###
#####################

System Combination of PBSMT, HPBSMT, OSM and NMT


#####################
### experiment 12 ###
#####################

Multilingual Pivot SMT

English-Japanese-Myanmar
English-Chinese-Myanmar
English-Myanmar

#####################
### experiment 13 ###
#####################

ALT data က တကယ်က manual aligned sentence pair ရှိတယ်။
အဲဒါကို သုံးပြီးတော့ ဥပမာ English source side ကို pre-ordering လုပ်လို့ ရနိုင်တယ်။
Automatically Extracted Reordering Rules လုပ်ကြည့်မယ်။


#####################
### experiment 14 ###
#####################

Specifying Reordering Constraints

<zone> xxx </zone> နဲ့ <wall /> ကို သုံးပြီး reordering constraints လုပ်တဲ့ experiment ကို လုပ်ကြည့်ချင်တယ်။

If you add such markup to the input, you need to use the option -xml-input with either
exclusive or inclusive (there is no difference between these options in this context).
Specifying reordering constraints around punctuation is often a good idea.
The switch -monotone-at-punctuation introduces walls around the punctuation tokens ,.!?:;".


#######################
### WER Calculation ###
#######################

For calculating WER, I copied test.cleaned.1, test.reference.txt.1 files and add ID for each file as follows:

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/wer$ tree
.
├── add-spu_id.pl
├── exp-syl
│   ├── en-my
│   │   ├── hyp
│   │   ├── ref
│   │   ├── test.cleaned.1
│   │   └── test.reference.txt.1
│   └── my-en
│       ├── hyp
│       ├── ref
│       ├── test.cleaned.1
│       └── test.reference.txt.1
├── exp-syl2
│   ├── en-my
│   │   ├── hyp
│   │   ├── ref
│   │   ├── test.cleaned.1
│   │   └── test.reference.txt.1
│   └── my-en
│       ├── hyp
│       ├── ref
│       ├── test.cleaned.1
│       └── test.reference.txt.1
├── exp-syl3
│   ├── en-my
│   │   ├── hyp
│   │   ├── ref
│   │   ├── test.cleaned.1
│   │   └── test.reference.txt.1
│   └── my-en
│       ├── hyp
│       ├── ref
│       ├── test.cleaned.1
│       └── test.reference.txt.1
└── exp-syl4
    ├── en-my
    │   ├── hyp
    │   ├── ref
    │   ├── test.cleaned.1
    │   └── test.reference.txt.1
    └── my-en
        ├── hyp
        ├── ref
        ├── test.cleaned.1
        └── test.reference.txt.1

12 directories, 33 files



### Useful commands

ပုံမှန်အတိုင်း ps2pdf ./graph.1.ps နဲ့ ပြောင်းရင် ပုံက ပြတ်ထွက်နေတာနဲ့ ...
အောက်ကလိုမျိုး option ထည့်လိုက်မှ အဆင်ပြေသွားတယ်။
ps2pdf -dDEVICEWIDTHPOINTS=1200 -dDEVICEHEIGHTPOINTS=1200 ./graph.1.ps

ပြီးတော့ convert နဲ့ ps to pdf ကို ပြောင်းတာမှာလည်း error ပေးနေတာနဲ့

Imagic magic ကို ပြန် install လုပ်ခဲ့တယ်။ confirmation လုပ်ခဲ့တယ်။

Reference link: https://stackoverflow.com/questions/37594157/imagemagick-no-decode-delegate-for-this-image-format-error-constitute-c-re

အောက်ပါ command တွေအားလုံးကို run ခဲ့

#These are the steps required in order to Install ImageMagick with JPG, PNG and TIFF delegates.
sudo apt-get update 

#Install Build-Essential in order to configure and make the final Install
sudo apt-get install build-essential 

#libjpg62-dev required in order to work with basic JPG files
sudo apt-get install -y libjpeg62-dev 

#libtiff-dev is required in order to work with TIFF file format
sudo apt-get install -y libtiff-dev 

#Download ImageMagick
wget https://www.imagemagick.org/download/ImageMagick.tar.gz 

#Untar Imagemagick
tar xvzf ImageMagick.tar.gz 

#Access the working directory
cd ImageMagick/[version_number] 

#Configure and make sure to disable the "shared" option
./configure --disable-shared

#Make
sudo make

#Install
sudo make install

#Final Check
sudo make check

Screenshot က အောက်ပါအတိုင်း

...
...
ASS: Magick++/demo/demos.tap 17
PASS: Magick++/demo/demos.tap 18
PASS: Magick++/demo/demos.tap 19
PASS: Magick++/demo/demos.tap 20
PASS: Magick++/demo/demos.tap 21
PASS: Magick++/demo/demos.tap 22
PASS: Magick++/demo/demos.tap 23
PASS: Magick++/demo/demos.tap 24
============================================================================
Testsuite summary for ImageMagick 7.0.10-60
============================================================================
# TOTAL: 86
# PASS:  86
# SKIP:  0
# XFAIL: 0
# FAIL:  0
# XPASS: 0
# ERROR: 0
============================================================================
make[3]: Leaving directory '/home/ye/tool/ImageMagick-7.0.10-60'
make[2]: Nothing to be done for 'check-local'.
make[2]: Leaving directory '/home/ye/tool/ImageMagick-7.0.10-60'
make[1]: Leaving directory '/home/ye/tool/ImageMagick-7.0.10-60'
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/tool/ImageMagick-7.0.10-60$

ပြဿနာတော့ မတွေ့ဘူးလေ...

အထက်ပါအတိုင်း လုပ်ပြီး convert command နဲ့ ပြောင်းတာလည်း အဆင်မပြလို့ အောက်ပါအတိုင်း

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl2/baseline/en-my/steps/1$ gs -sDEVICE=pdfwrite -sOutputFile=graph.1.syl.pdf -dBATCH -dNOPAUSE -dDEVICEWIDTHPOINTS=1200 -dDEVICEHEIGHTPOINTS=1200 ./graph.1.ps

gs command နဲ့ အဆင်ပြေသွားတယ်။
option တွေကတော့ များတယ်။

============

## Confusion Pair, exp-syl3
en-my
   1:  440  ->  သည် ==> တယ်
   2:  316  ->  ခဲ့ ==> ပါ
   3:   60  ->  " ==> &quot
   4:   48  ->  ၊ ==> အ
   5:   43  ->  ရ ==> ပါ
   6:   41  ->  ကို ==> အ
   7:   37  ->  များ ==> အ
   8:   37  ->  သော ==> အ
   9:   34  ->  တယ် ==> သည်
  10:   33  ->  ကြ ==> ပါ
  11:   33  ->  သည် ==> အ
  12:   32  ->  ဖြစ် ==> ပါ
  13:   30  ->  ခဲ့ ==> ဖြစ်
  14:   29  ->  ခဲ့ ==> အ
  15:   26  ->  င့် ==> အ
  16:   26  ->  အ ==> သ
  17:   25  ->  က ==> အ
  18:   25  ->  ကျွန်ုပ် ==> တော်
  19:   25  ->  သည် ==> ကို
  20:   25  ->  အ ==> ခဲ့
  
## Confusion Pair, exp-syl3
my-en

   1:   34  ->  a ==> the
   2:   32  ->  the ==> ,
   3:   29  ->  quot ==> apos
   4:   27  ->  in ==> to
   5:   26  ->  to ==> ,
   6:   25  ->  the ==> s
   7:   24  ->  , ==> the
   8:   24  ->  of ==> ,
   9:   24  ->  the ==> a
  10:   24  ->  to ==> the
  11:   22  ->  . ==> ,
  12:   21  ->  apos ==> quot
  13:   21  ->  the ==> to
  14:   20  ->  of ==> and
  15:   20  ->  the ==> &amp
  16:   20  ->  the ==> and
  17:   20  ->  the ==> apos
  18:   19  ->  , ==> 
  19:   19  ->  , ==> of
  20:   19  ->  of ==> the
  
  
  အထက်ပါ confusion pair တွေကနေ 
  
     1:  440  ->  သည် ==> တယ်
   2:  316  ->  ခဲ့ ==> ပါ
   3:   60  ->  " ==> &quot
   
      1:   34  ->  a ==> the
   2:   32  ->  the ==> ,
   3:   29  ->  quot ==> apos
   
   တွေကို ရှင်းပြီး BLEU score ကို တက်အောင် လုပ်နိုင်မယ်လို့ ထင်တယ်။
  နောက်တစ်ခု word unit WER ကိုလည်း ကြည့်ရမယ်။
  
  *** written vs spoken Myanmar languages?! တယ်-သည်၊ နောက် polite form, casual form?
 ***  မြန်မာစာ စာကြောင်းတွေထဲကနေ past-tense လားဆိုတာကို detect လုပ်ပြီး present-tense form ပြောင်းထားပြီး
  translate လုပ်တဲ့ စာကြောင်းမှာ past-tense ပါတော့မှ မြန်မာစာဘက်မှာ past-tense လုပ်ပေးတာမျိုးကော လုပ်လို့ ရမလား 
  *** ထိုနည်းလည်းကောင်း future-tense ကိစ္စကော??? plural form ကိစ္စကော ဗမာစာဘက်မှာဆိုရင်"တွေ", "များ" လောက်ပဲ ရှိသလားလို့?!
  
==============
  Summary of the Results:
### BLEU Score ###
*** Run with Syllable Unit
	en-my, my-en
exp-syl1: 16.85, 2.49
exp-syl2: 16.86, 2.53
exp-syl3: 19.29, 8.80
exp-syl4: 18.79, 8.46 (rough data cleaning)
exp-syl5: 18.65, 8.30 (right-to-left my)
exp-syl (4 + 5): 20.57, 10.42 (left-to-right, right-to-left)
exp-syl7: Failed! (secondary phrase table or transliteration model)

## Hybrid SMT
exp-syl8: 19.80, 9.61 (xml-markup dictionary with 300 words transliteration dictionary, dictionary size ကို တိုးရင် ရလဒ်က တက်လိမ့်မယ်)
(final result, xml-markup dictionary with x words, this exp run under exp-syl4/ folder)

[English-Myanmar]
Baseline: 18.79
### with alt.all.dict
exclusive
raw, BLEU = 23.45, 57.5/30.4/17.1/10.1 (BP=1.000, ratio=1.038, hyp_len=61119, ref_len=58895)
uniq, BLEU = 22.73, 56.8/29.6/16.5/9.6 (BP=1.000, ratio=1.041, hyp_len=61330, ref_len=58895)
inclusive
raw, BLEU = 23.47, 57.5/30.5/17.1/10.1 (BP=1.000, ratio=1.045, hyp_len=61535, ref_len=58895)
uniq, BLEU = 22.82, 56.9/29.8/16.6/9.7 (BP=1.000, ratio=1.049, hyp_len=61769, ref_len=58895)

### with alt.train-valid.dict
exclusive
raw, BLEU = 18.50, 53.9/25.7/12.8/6.6 (BP=1.000, ratio=1.014, hyp_len=59726, ref_len=58895)
uniq, BLEU = 18.25, 53.5/25.5/12.6/6.5 (BP=1.000, ratio=1.019, hyp_len=60016, ref_len=58895)

inclusive
raw, BLEU = 18.77, 54.1/26.0/13.0/6.8 (BP=1.000, ratio=1.022, hyp_len=60163, ref_len=58895)
uniq, BLEU = 18.58, 53.8/25.8/12.9/6.7 (BP=1.000, ratio=1.026, hyp_len=60413, ref_len=58895)

-----------------
### with alt.all.dict (cleaned version)
exclusive

inclusive

### with alt.train-valid.dict (cleaned version)
exclusive

inclusive

---------
[Myanmar-English]
Baseline: 8.46

### with alt.all.dict
exclusive
BLEU = 10.52, 44.2/14.5/6.5/2.9 (BP=1.000, ratio=1.131, hyp_len=31584, ref_len=27929)

inclusive
BLEU = 11.71, 47.8/16.2/7.3/3.3 (BP=1.000, ratio=1.070, hyp_len=29884, ref_len=27929)


### with alt.train-valid.dict 
exclusive
BLEU = 7.78, 39.0/11.0/4.6/1.9 (BP=1.000, ratio=1.179, hyp_len=32934, ref_len=27929)

inclusive
BLEU = 8.84, 42.5/12.6/5.2/2.2 (BP=1.000, ratio=1.114, hyp_len=31117, ref_len=27929)

---------

### with alt.all.dict (cleaned version)
exclusive

inclusive

### with alt.train-valid.dict (cleaned version)
exclusive

inclusive

------------

## OSM Experiment

osm: 18.90, 8.96

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/osm/osm/en-my/evaluation$ cat test.multi-bleu.1 
BLEU = 18.90, 53.6/26.0/13.2/7.0 (BP=1.000, ratio=1.006, hyp_len=59271, ref_len=58895)
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/osm/osm/my-en/evaluation$ cat test.multi-bleu.1 
BLEU = 8.96, 42.3/12.6/5.4/2.3 (BP=1.000, ratio=1.086, hyp_len=30342, ref_len=27929)

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/osm$ ./run.sh 
nohup: ignoring input and appending output to 'nohup.out'

real	1493m40.831s
user	1m23.968s
sys	0m29.541s
-------------

## Transliteration Dictionary Experiment of OSM
Baseline: 18.90

Result of -xml-input exclusive:
BLEU = 22.64, 57.4/29.9/16.4/9.4 (BP=1.000, ratio=1.032, hyp_len=60809, ref_len=58895)

Result of -xml-input inclusive:
BLEU = 22.60, 57.2/29.9/16.4/9.3 (BP=1.000, ratio=1.050, hyp_len=61824, ref_len=58895)



## HPBSMT Experiment

hpbsmt: 18.63,  

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/hiero/hiero/en-my/evaluation$ cat test.multi-bleu.1 
BLEU = 18.63, 54.4/26.1/13.1/6.8 (BP=0.991, ratio=0.991, hyp_len=58343, ref_len=58895)

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/hiero$ ./run.sh 
nohup: ignoring input and appending output to 'nohup.out'

real	1714m4.520s
user	1m32.871s
sys	0m34.240s

2nd time translation:
BLEU = 18.73, 54.7/26.2/13.2/6.8 (BP=0.987, ratio=0.987, hyp_len=58157, ref_len=58895)


*** Failed at my-en decoding!!!
-----------------

## Hybrid Translation Running with XML Tagging Note for HPBSMT

## Error 

moses_chart ကို run တဲ့အခါမှာ error ပေးနေတယ်။
-i နဲ့ input ပေး run တုန်းက error ပေးလို့.... cat နဲ့ ရိုက်ထုတ်ပြီးတော့မှ | နဲ့ moses_chart ကို parse လုပ်တော့လည်း error ပေးနေလို့
အောက်ပါအတိုင်း shell နဲ့ file ကို looping ပတ်ပြီး တစ်ကြောင်းချင်းစီ ရိုက်ထုတ်ပြီး ဘာသာပြန်ခိုင်းတော့လည်း အောက်ပါအတိုင်း error ပေးတယ်။
error အကုန်ကတော့ အတူတူပါပဲ Segmentation fault      (core dumped) ဆိုပြီး error ပေးနေတာ...

utput-factor=0
FeatureFunction: TranslationModel0 start: 3 end: 6
line=PhraseDictionaryMemory name=TranslationModel1 num-features=1 path=/home/ye/exp/smt/wat2021/hiero/hiero/en-my/model/glue-grammar.1 input-factor=0 output-factor=0 tuneable=true
FeatureFunction: TranslationModel1 start: 7 end: 7
line=KENLM name=LM0 factor=0 path=/home/ye/exp/smt/wat2021/hiero//hiero/en-my/lm/myko.binlm.1 order=6
FeatureFunction: LM0 start: 8 end: 8
Loading UnknownWordPenalty0
Loading WordPenalty0
Loading PhrasePenalty0
Loading LM0
Loading TranslationModel0
Loading TranslationModel1
Start loading text phrase table. Moses format : [0.004] seconds
Reading /home/ye/exp/smt/wat2021/hiero/hiero/en-my/model/glue-grammar.1
----5---10---15---20---25---30---35---40---45---50---55---60---65---70---75---80---85---90---95--100
****************************************************************************************************
max-chart-span: 20
max-chart-span: 1000
Created input-output object : [0.004] seconds
./run-exp.sh: line 37: 47960 Done                    printf '%s\n' "$line"
     47961 Segmentation fault      (core dumped) | ~/tool/mosesbin/ubuntu-17.04/moses/bin/moses_chart -xml-input exclusive -f ../evaluation/test.filtered.ini.1 >> en-my.xml.hyp1
Result of HPBSMT -xml-input exclusive:
BLEU = 1.27, 25.1/3.8/0.8/0.1 (BP=0.738, ratio=0.767, hyp_len=5485, ref_len=7150)

## Debugging

en-my.xml.hyp1 ကို ဝင်စစ်ကြည့်တော့...

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/hiero/hiero/en-my/xml$ wc ./en-my.xml.hyp1
  122  5485 51403 ./en-my.xml.hyp1

ကြောင်းပဲ translation လုပ်ပေးနိုင်တာကို တွေ့ရ ....

-xml-input inclusive မှာလည်း အောက်ပါအတိုင်း error အတူတူပဲ ပေးတယ်...

Loading TranslationModel0
Loading TranslationModel1
Start loading text phrase table. Moses format : [0.005] seconds
Reading /home/ye/exp/smt/wat2021/hiero/hiero/en-my/model/glue-grammar.1
----5---10---15---20---25---30---35---40---45---50---55---60---65---70---75---80---85---90---95--100
****************************************************************************************************
max-chart-span: 20
max-chart-span: 1000
Created input-output object : [0.005] seconds
./run-exp.sh: line 56: 52256 Done                    printf '%s\n' "$line"
     52257 Segmentation fault      (core dumped) | ~/tool/mosesbin/ubuntu-17.04/moses/bin/moses_chart -xml-input exclusive -f ../evaluation/test.filtered.ini.1 >> en-my.xml.hyp2
Result of HPBSMT -xml-input inclusive:
BLEU = 1.27, 25.1/3.8/0.8/0.1 (BP=0.738, ratio=0.767, hyp_len=5485, ref_len=7150)

translated output ဖိုင်ကို ဝင်ကြည့်တော့...

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/hiero/hiero/en-my/xml$ wc en-my.xml.hyp2
  122  5485 51403 en-my.xml.hyp2
  
hyp1 ရော hp2 ရော output က တူသလား ဆိုတာကို head, tail command နဲ့ စစ်ကြည့်တော့ အောက်ပါအတိုင်း တွေ့ရ...

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/hiero/hiero/en-my/xml$ head ./en-my.xml.hyp1
ထို လူ သား များ သိ သိ သာ သာ အ ထူး အ ကူး စက် တုပ် ကွေး ဖြစ် တယ် ဒါ ပေ မဲ့ ကူး စက် ဖို့ မ ဖြစ် နိုင် ဘူး ။
Initial combustible ၏ concentrations ဖုန် တွေ မြ င့် မြ င့် ရန် ဦး ဆောင် သ ည့် စုံ စမ်း စစ် ဆေး မှု များ ယ ခု အ ခါ အ ဝင် လေ ထွက် ပေါက် ကွဲ မှု ကြော င့် ဖြစ် ပေါ် လာ သော ဆင်း ရဲ ခဲ့ တယ် ၊ အ ကြံ ပြု ပါ တယ် ။
ယင်း blast shifts ပြောင်း ၇ : 18PM ၊ အ လုပ် သ မား များ ကို အ ချိန် အ ဝန်း ကျင် မှာ ဖြစ် ပျက် လာ ခဲ့ ပါ တယ် ။
အ နည်း ဆုံး တော့ လူ သုံး ယောက် အ သတ် ခံ ရ တယ် ၊ အ နည်း ဆုံး ( ၁၅ ) ဦး ဒဏ် ရာ ရ ရှိ ခဲ့ ကြ ပါ တယ် ။
ဦး စီး ဌာ န များ ၏ အ လင်း ရောင် လေ ဝင် လေ ထွက် ပေါက် ကွဲ မှု ၊ အ လုပ် သ မား တွေ ကို ညည်း တွား နေ တာ ပဲ &quot; ဟု သူ တို့ က ဖြ ည့် စွက် ပြီး နောက် &quot; ဆင်း ရဲ နွမ်း ပါး ဖြစ် ပါ သည် ။
ယင်း မ တိုင် မီ လွန် ခဲ့ တဲ့ အ ပတ် က ဒေါ် လာ ၁၀၀ ဆီ ကုန် ကြမ်း ဈေး နှုန်း များ ၏ ချဉ်း ကပ် လာ သ ည့် ရေ ထပ် မံ ချ လိုက် ပါ သည် ။
သ တင်း စာ ရှင်း လင်း ပွဲ ဝှမ်း သည် သူ့ ကို ချက် ချင်း လွတ် လပ် မှု ကို ရှာ ဖွေ ရန် သူ တို့ က အ စ စ အ ရာ ရာ ကို လုပ် နိုင် ရ မယ် အဲ ဒီ အ စိုး ရ အ ဖွဲ့ အ စည်း က ပြော ပါ တယ် ။
တ ရား ရုံး သည် အ ဆို ပါ လိ မ့် မယ် သူ့ ရဲ့ ကာ ကွယ် ရေး ထား သ ည့် အ ချိန် ကာ လ အ တွင်း ( ၆ ) ရက် သတ္တ ပတ် အ တွက် recessed အ သ င့် ပြင် ဆင် ထား ပါ တယ် ။
သူ မ ဘ ဝ နဲ့ ပတ် သက် ပြီး သူ မ ရဲ့ ကိုယ် ရေး ကိုယ် တာ မေး ခွန်း ကို ဖြေ ဖို့ တိုက် ရိုက် ငြင်း ပယ် ခဲ့ သည် ။
ယင်း ပေါက် ကွဲ လေ ထဲ ကို ဆူ ပူ အ ပျက် အ စီး နှ င့် အ ဆောက် အ အုံ များ နှ င့် expressways ပေါ် ကို ပေး ပို့ ခဲ့ ပါ သည် ။

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/hiero/hiero/en-my/xml$ tail ./en-my.xml.hyp1
အဲ ဒါ မြုပ် ၊ ခ ရီး သည် တွေ ကို အ ချိန် ပေး ဖို့ အ တွက် တစ် နာ ရီ လောက် အ ကြောင်း ကို မှ ကူး တို့ ဖြ င့် အ ပြင် ထွက် ရ မ ရ ယူ ခဲ့ ပါ သည် ။
ခ ရီး သည် တွေ အ တွက် နှ င့် အ မှု ထမ်း ( ၂ ) ၏ ငွေ စာ ရင်း သို့ ထ ည့် သွင်း ခဲ့ ကြ တယ် ၊ ဒါ ပေ မဲ့ အား လုံး နှ င့် သင်္ဘော 101 သယ် ဆောင် လာ ခဲ့ သည် ။
တ ရား ဥ ပ ဒေ စိုး မိုး ရေး ၊ အ ရေး ပေါ် အ ခြေ အ နေ အ ချိန် ကာ လ သည် အ လွန် ခဲ့ တဲ့ ရက် ပေါင်း ၃၀ ၊ &quot; အ ကြမ်း ဖက် မှု တား ဆီး ကာ ကွယ် ရေး နှ င့် ထပ် မံ ၍ ဦး သေ ဆုံး မှု များ ကို ရှောင် ရှား ရန် ပြဋ္ဌာန်း ခဲ့ သော မည် သ ည့် &quot; ပြည် သူ လူ ထု ၏ အ မိ န့် &quot; နှ င့် &quot; အ လျင် အ မြန် reestablishment သို့ ဦး တည် သွား စေ ပါ သည် ။
အဲ ဒါ သံ သ ယ ရှိ သူ အ စစ် သွေး ကြွ တွေ က အ ရိပ် ခို လို့ ရ တဲ့ အ ကြောင်း ဖြစ် သည် ဟု ယုံ ကြည် ကြ တယ် ။
သူ မ ကို မ ရောက် ခင် ခု ပဲ သူ မ ကို လွတ် မြောက် အောင် လုပ် နိုင် ခဲ့ ပြီး အာ ရုံ စိုက် trailer ကုန် စုံ အ ပိုင် ရှင် နေ တုန်း က တော့ မ ဟုတ် ဘူး ၊ တစ် ခု ထဲ ကို ထ ည့် ပေး လျက် ရှိ ပါ သည် ။
အဲ ဒီ က ဗျာ စုံ တွဲ တစ် ခု မှ ပြန် လာ ခဲ့ သည် ကို စာ ဖတ် သူ တို့ နှစ် ဦး စ လုံး ပေး ခဲ့ ပါ တယ် ။
၁၉၈၀ ခု နှစ် များ တွင် အ မှာ စာ အုပ် နှစ် အုပ် သည် ဇ နီး မောင် နှံ ခြင်း အ တူ တူ အ လုပ် လုပ် ခဲ့ တယ် ။
တစ် ချိန် တည်း မှာ ပင် အ နည်း ဆုံး လေး ကို ရဲ တပ် ဖွဲ့ ဝင် များ က အ ခြား သူ များ ကို လည်း ရပ် တ န့် ခဲ့ ကြ တယ် ၊ ဒါ ပေ မဲ့ ဖမ်း ဆီး ခြင်း မ ရှိ ခဲ့ ကြ ဘူး ။
သူ တို့ သူ မ ကို မ နောက် လိုက် ဖို့ သူ တို့ က သူ မ ကို နောက် အ မိ န့် တွင် လမ်း အ နီး ကပ် စွာ နှ င့် ခြုံ ပြု လုပ် သ ည့် အ ပြောင်း အ လဲ များ လွန်း လို့ လည်း ပြော ပါ တယ် ။
သူ တို့ က သူ မ ကို အ ရေး လက္ခ ဏာ နှ င့် ပြန် လည် လွတ် မြောက် ၊ သူ မ ကို အ တည် ပြု ရန် ရှိ ကြ သည် ဟု သိ ရှိ ရ ပါ သည် ။

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/hiero/hiero/en-my/xml$ head ./en-my.xml.hyp2
ထို လူ သား များ သိ သိ သာ သာ အ ထူး အ ကူး စက် တုပ် ကွေး ဖြစ် တယ် ဒါ ပေ မဲ့ ကူး စက် ဖို့ မ ဖြစ် နိုင် ဘူး ။
Initial combustible ၏ concentrations ဖုန် တွေ မြ င့် မြ င့် ရန် ဦး ဆောင် သ ည့် စုံ စမ်း စစ် ဆေး မှု များ ယ ခု အ ခါ အ ဝင် လေ ထွက် ပေါက် ကွဲ မှု ကြော င့် ဖြစ် ပေါ် လာ သော ဆင်း ရဲ ခဲ့ တယ် ၊ အ ကြံ ပြု ပါ တယ် ။
ယင်း blast shifts ပြောင်း ၇ : 18PM ၊ အ လုပ် သ မား များ ကို အ ချိန် အ ဝန်း ကျင် မှာ ဖြစ် ပျက် လာ ခဲ့ ပါ တယ် ။
အ နည်း ဆုံး တော့ လူ သုံး ယောက် အ သတ် ခံ ရ တယ် ၊ အ နည်း ဆုံး ( ၁၅ ) ဦး ဒဏ် ရာ ရ ရှိ ခဲ့ ကြ ပါ တယ် ။
ဦး စီး ဌာ န များ ၏ အ လင်း ရောင် လေ ဝင် လေ ထွက် ပေါက် ကွဲ မှု ၊ အ လုပ် သ မား တွေ ကို ညည်း တွား နေ တာ ပဲ &quot; ဟု သူ တို့ က ဖြ ည့် စွက် ပြီး နောက် &quot; ဆင်း ရဲ နွမ်း ပါး ဖြစ် ပါ သည် ။
ယင်း မ တိုင် မီ လွန် ခဲ့ တဲ့ အ ပတ် က ဒေါ် လာ ၁၀၀ ဆီ ကုန် ကြမ်း ဈေး နှုန်း များ ၏ ချဉ်း ကပ် လာ သ ည့် ရေ ထပ် မံ ချ လိုက် ပါ သည် ။
သ တင်း စာ ရှင်း လင်း ပွဲ ဝှမ်း သည် သူ့ ကို ချက် ချင်း လွတ် လပ် မှု ကို ရှာ ဖွေ ရန် သူ တို့ က အ စ စ အ ရာ ရာ ကို လုပ် နိုင် ရ မယ် အဲ ဒီ အ စိုး ရ အ ဖွဲ့ အ စည်း က ပြော ပါ တယ် ။
တ ရား ရုံး သည် အ ဆို ပါ လိ မ့် မယ် သူ့ ရဲ့ ကာ ကွယ် ရေး ထား သ ည့် အ ချိန် ကာ လ အ တွင်း ( ၆ ) ရက် သတ္တ ပတ် အ တွက် recessed အ သ င့် ပြင် ဆင် ထား ပါ တယ် ။
သူ မ ဘ ဝ နဲ့ ပတ် သက် ပြီး သူ မ ရဲ့ ကိုယ် ရေး ကိုယ် တာ မေး ခွန်း ကို ဖြေ ဖို့ တိုက် ရိုက် ငြင်း ပယ် ခဲ့ သည် ။
ယင်း ပေါက် ကွဲ လေ ထဲ ကို ဆူ ပူ အ ပျက် အ စီး နှ င့် အ ဆောက် အ အုံ များ နှ င့် expressways ပေါ် ကို ပေး ပို့ ခဲ့ ပါ သည် ။

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/hiero/hiero/en-my/xml$ tail ./en-my.xml.hyp2
အဲ ဒါ မြုပ် ၊ ခ ရီး သည် တွေ ကို အ ချိန် ပေး ဖို့ အ တွက် တစ် နာ ရီ လောက် အ ကြောင်း ကို မှ ကူး တို့ ဖြ င့် အ ပြင် ထွက် ရ မ ရ ယူ ခဲ့ ပါ သည် ။
ခ ရီး သည် တွေ အ တွက် နှ င့် အ မှု ထမ်း ( ၂ ) ၏ ငွေ စာ ရင်း သို့ ထ ည့် သွင်း ခဲ့ ကြ တယ် ၊ ဒါ ပေ မဲ့ အား လုံး နှ င့် သင်္ဘော 101 သယ် ဆောင် လာ ခဲ့ သည် ။
တ ရား ဥ ပ ဒေ စိုး မိုး ရေး ၊ အ ရေး ပေါ် အ ခြေ အ နေ အ ချိန် ကာ လ သည် အ လွန် ခဲ့ တဲ့ ရက် ပေါင်း ၃၀ ၊ &quot; အ ကြမ်း ဖက် မှု တား ဆီး ကာ ကွယ် ရေး နှ င့် ထပ် မံ ၍ ဦး သေ ဆုံး မှု များ ကို ရှောင် ရှား ရန် ပြဋ္ဌာန်း ခဲ့ သော မည် သ ည့် &quot; ပြည် သူ လူ ထု ၏ အ မိ န့် &quot; နှ င့် &quot; အ လျင် အ မြန် reestablishment သို့ ဦး တည် သွား စေ ပါ သည် ။
အဲ ဒါ သံ သ ယ ရှိ သူ အ စစ် သွေး ကြွ တွေ က အ ရိပ် ခို လို့ ရ တဲ့ အ ကြောင်း ဖြစ် သည် ဟု ယုံ ကြည် ကြ တယ် ။
သူ မ ကို မ ရောက် ခင် ခု ပဲ သူ မ ကို လွတ် မြောက် အောင် လုပ် နိုင် ခဲ့ ပြီး အာ ရုံ စိုက် trailer ကုန် စုံ အ ပိုင် ရှင် နေ တုန်း က တော့ မ ဟုတ် ဘူး ၊ တစ် ခု ထဲ ကို ထ ည့် ပေး လျက် ရှိ ပါ သည် ။
အဲ ဒီ က ဗျာ စုံ တွဲ တစ် ခု မှ ပြန် လာ ခဲ့ သည် ကို စာ ဖတ် သူ တို့ နှစ် ဦး စ လုံး ပေး ခဲ့ ပါ တယ် ။
၁၉၈၀ ခု နှစ် များ တွင် အ မှာ စာ အုပ် နှစ် အုပ် သည် ဇ နီး မောင် နှံ ခြင်း အ တူ တူ အ လုပ် လုပ် ခဲ့ တယ် ။
တစ် ချိန် တည်း မှာ ပင် အ နည်း ဆုံး လေး ကို ရဲ တပ် ဖွဲ့ ဝင် များ က အ ခြား သူ များ ကို လည်း ရပ် တ န့် ခဲ့ ကြ တယ် ၊ ဒါ ပေ မဲ့ ဖမ်း ဆီး ခြင်း မ ရှိ ခဲ့ ကြ ဘူး ။
သူ တို့ သူ မ ကို မ နောက် လိုက် ဖို့ သူ တို့ က သူ မ ကို နောက် အ မိ န့် တွင် လမ်း အ နီး ကပ် စွာ နှ င့် ခြုံ ပြု လုပ် သ ည့် အ ပြောင်း အ လဲ များ လွန်း လို့ လည်း ပြော ပါ တယ် ။
သူ တို့ က သူ မ ကို အ ရေး လက္ခ ဏာ နှ င့် ပြန် လည် လွတ် မြောက် ၊ သူ မ ကို အ တည် ပြု ရန် ရှိ ကြ သည် ဟု သိ ရှိ ရ ပါ သည် ။

Input XML tagged English ဖိုင်နဲ့ confirmation လုပ်ကြည့်...

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/hiero/hiero/en-my/xml$ wc ./test.xml.en 
  1018  42800 383613 ./test.xml.en
  
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/hiero/hiero/en-my/xml$ head ./test.xml.en 
It has been confirmed that eight thoroughbred race horses at <np translation="ရန်း ဝခ် မြင်း ပြိုင် ကွင်း" prob="0.8"><np translation="ရ န့် ဝခ်" prob="0.8">Randwick</np> Racecourse</np> in <np translation="ဆစ် ဒ နီ" prob="0.8">Sydney</np> have been infected with equine influenza .
<np translation="ရ န့် ဝခ်" prob="0.8">Randwick</np> has been locked down , and is expected to remain so for up to two months .
It is expected that the virulent flu will affect the majority of the 700 horses stabled at <np translation="ရ န့် ဝခ်" prob="0.8">Randwick</np> .
<np translation="အန် အက်စ် ဒ ဗ လျူ" prob="0.8">NSW</np> Minister for Primary Industries said the facility would be quarantined until 30 days after the last sign of the flu .
The cases are the first infections of race horses , despite infecting <np translation="ဒါ ဇင်" prob="0.8">dozens</np> of recreational horses across <np translation="အန် အက်စ် ဒ ဗ လျူ" prob="0.8">NSW</np> and <np translation="ကွင်း စ လန်း" prob="0.8">Queensland</np> .
The flu is highly contagious but cannot be transmitted to humans .
The national racing shutdown was costing the industry tens of millions of <np translation="ဒေါ် လာ" prob="0.8">dollars</np> every day .
Chief Executive of Racing <np translation="အန် အက်စ် ဒ ဗ လျူ" prob="0.8">NSW</np> , <np translation="ပီ တာ" prob="0.8">Peter</np> <np translation="ဗွီ" prob="0.8">V</np> &amp; apos ; <np translation="လန်း ဒီစ်" prob="0.8">Landys</np> said while racing had been disrupted since a ban on horse movements last weekend today was a &amp; quot ; grim , black day &amp; quot ; for the racing industry in <np translation="အန် အက်စ် ဒ ဗ လျူ" prob="0.8">NSW</np> .
Racing is expected to resume in all <np translation="သြ စ တြေး လျ နိုင် ငံ ၏ ပြည် နယ် များ" prob="0.8"><np translation="သြ စ တြေး လျ လူ မျိုး" prob="0.8">Australian</np> states</np> except <np translation="အန် အက်စ် ဒ ဗ လျူ" prob="0.8">NSW</np> and <np translation="ကွင်း စ လန်း" prob="0.8">Queensland</np> on the weekend .
While <np translation="ဆစ် ဒ နီ" prob="0.8">Sydney</np> &amp; apos ; <np translation="အက်စ်" prob="0.8">s</np> spring racing carnival has been canceled , <np translation="မဲလ် ဘုန်း" prob="0.8">Melbourne</np> &amp; apos ; <np translation="အက်စ်" prob="0.8">s</np> is expected to kick off this weekend with the <np translation="ကော့ ဖီးလ်" prob="0.8">Caufield</np> Cup .

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/hiero/hiero/en-my/xml$ tail test.xml.en 
<np translation="ဂျွန်း အ ဘိ" prob="0.8"><np translation="ဂျွန်း" prob="0.8">Joan</np> <np translation="အ ဘိ" prob="0.8">Abse</np></np> leaves behind her husband , a son , and two daughters .
<np translation="ဖိုး" prob="0.8">Four</np> male members of the <np translation="ပါ ပါ ရာ ဇီ" prob="0.8">paparazzi</np> were arrested and charged on <np translation="ဗုဒ္ဓ ဟူး" prob="0.8">Wednesday</np> with reckless driving in <np translation="မစ် ရှင်း တောင် ကုန်း များ" prob="0.8"><np translation="မစ် ရှင်" prob="0.8">Mission</np> Hills</np> , <np translation="ကယ် လီ ဖိုး နီး ယား ပြည် နယ်" prob="0.8">California</np> after following <np translation="ဘ ရစ် တ နီ" prob="0.8">Britney</np> <np translation="စ ပီး ယား" prob="0.8">Spears</np> back to her mansion .
At least four others were also stopped by police , but were not arrested .
According to reports , police witnessed the entire incident saying that a fleet of <np translation="ပါ ပါ ရာ ဇီ" prob="0.8">paparazzi</np> were following <np translation="စ ပီး ယား" prob="0.8">Spears</np> at a high rate of speed around 11 : 20 <np translation="ပီ . အမ်" prob="0.8">p.m</np>. <np translation="ပီ အက်စ် တီ" prob="0.8">PST</np> ( <np translation="ယူ တီ စီ - ၈" prob="0.8"><np translation="ယူ တီ စီ" prob="0.8">UTC</np>-8</np> ) .
They also say they followed her too closely and made unsafe lane changes in order to follow her .
Police also say that at least <np translation="ဝမ်း" prob="0.8">one</np> of cars following <np translation="စ ပီး ယား" prob="0.8">Spears</np> , who was driving her <np translation="ကား" prob="0.8">car</np> , tried to run her off the road , but she was not able to identify the vehicle or the occupants .
They are reported to have verified her identity , and released her .
TMZ.com reports that police were checking to see if her <np translation="လိုင် စင်" prob="0.8">license</np> was valid , and was surprised that it was .
<np translation="စ ပီး ယား" prob="0.8">Spears</np> was not charged with anything and despite the paparazzis &amp; apos ; recklessness , <np translation="စ ပီး ယား" prob="0.8">Spears</np> did not want the men arrested .
&amp; quot ; <np translation="ဘ ရစ် တ နီ" prob="0.8">Britney</np> <np translation="စ ပီး ယား" prob="0.8">Spears</np> was part of the group , but was not driving recklessly , &amp; quot ; said spokeswoman for <np translation="လော့ အင် ဂျ လိစ် ရဲ ဌာ န" prob="0.8">the <np translation="လော့စ် အိမ် ဂျ လိစ်" prob="0.8">Los Angeles</np> Police Department</np> , <np translation="ဆာ ရာ ဖက် ဒန်" prob="0.8"><np translation="ဆာ ရာ" prob="0.8">Sara</np> Faden</np> .

HPBSMT approach က ဘာသာပြန်မပေးနိုင်လို့ ကျော်သွားတာ သို့မဟုတ် output ထုတ်မပေးတာမျိုး လုပ်နေသလား?!?!

input file ရဲ့ ပထမဆုံး အကြောင်းကိုပဲ ဘာသာပြန်ခိုင်းကြည့်တော့ အောက်ပါအတိုင်း ရ

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/hiero/hiero/en-my/xml$ echo "It has been confirmed that eight thoroughbred race horses at <np translation="ရန်း ဝခ် မြင်း ပြိုင် ကွင်း" prob="0.8"><np translation="ရ န့် ဝခ်" prob="0.8">Randwick</np> Racecourse</np> in <np translation="ဆစ် ဒ နီ" prob="0.8">Sydney</np> have been infected with equine influenza ." | ~/tool/mosesbin/ubuntu-17.04/moses/bin/moses_chart -xml-input exclusive -f ../evaluation/test.filtered.ini.1
Defined parameters (per moses.ini or switch):
	config: ../evaluation/test.filtered.ini.1 
	cube-pruning-pop-limit: 1000 
	feature: UnknownWordPenalty WordPenalty PhrasePenalty PhraseDictionaryOnDisk name=TranslationModel0 num-features=4 path=/home/ye/exp/smt/wat2021/hiero//hiero/en-my/evaluation/test.filtered.1/phrase-table.0-0.1.1.bin input-factor=0 output-factor=0 PhraseDictionaryMemory name=TranslationModel1 num-features=1 path=/home/ye/exp/smt/wat2021/hiero/hiero/en-my/model/glue-grammar.1 input-factor=0 output-factor=0 tuneable=true KENLM name=LM0 factor=0 path=/home/ye/exp/smt/wat2021/hiero//hiero/en-my/lm/myko.binlm.1 order=6 
	input-factors: 0 
	inputtype: 3 
	mapping: 0 T 0 1 T 1 
	max-chart-span: 20 1000 
	non-terminals: X 
	search-algorithm: 3 
	weight: LM0= 0.0893621 WordPenalty0= -0.392274 PhrasePenalty0= 0.0265397 TranslationModel0= 0.125564 0.126011 0.0114448 0.0746226 TranslationModel1= -0.154181 UnknownWordPenalty0= 1 
	xml-input: exclusive 
line=UnknownWordPenalty
FeatureFunction: UnknownWordPenalty0 start: 0 end: 0
line=WordPenalty
FeatureFunction: WordPenalty0 start: 1 end: 1
line=PhrasePenalty
FeatureFunction: PhrasePenalty0 start: 2 end: 2
line=PhraseDictionaryOnDisk name=TranslationModel0 num-features=4 path=/home/ye/exp/smt/wat2021/hiero//hiero/en-my/evaluation/test.filtered.1/phrase-table.0-0.1.1.bin input-factor=0 output-factor=0
FeatureFunction: TranslationModel0 start: 3 end: 6
line=PhraseDictionaryMemory name=TranslationModel1 num-features=1 path=/home/ye/exp/smt/wat2021/hiero/hiero/en-my/model/glue-grammar.1 input-factor=0 output-factor=0 tuneable=true
FeatureFunction: TranslationModel1 start: 7 end: 7
line=KENLM name=LM0 factor=0 path=/home/ye/exp/smt/wat2021/hiero//hiero/en-my/lm/myko.binlm.1 order=6
FeatureFunction: LM0 start: 8 end: 8
Loading UnknownWordPenalty0
Loading WordPenalty0
Loading PhrasePenalty0
Loading LM0
Loading TranslationModel0
Loading TranslationModel1
Start loading text phrase table. Moses format : [0.005] seconds
Reading /home/ye/exp/smt/wat2021/hiero/hiero/en-my/model/glue-grammar.1
----5---10---15---20---25---30---35---40---45---50---55---60---65---70---75---80---85---90---95--100
****************************************************************************************************
max-chart-span: 20
max-chart-span: 1000
Created input-output object : [0.005] seconds
Line 0: Initialize search took 0.005 seconds total
Translating: <s> It has been confirmed that eight thoroughbred race horses at Randwick Racecourse in Sydney have been infected with equine influenza . </s>  ||| [0,0]=X (1) [0,1]=X (1) [0,2]=X (1) [0,3]=X (1) [0,4]=X (1) [0,5]=X (1) [0,6]=X (1) [0,7]=X (1) [0,8]=X (1) [0,9]=X (1) [0,10]=X (1) [0,11]=X (1) [0,12]=X (1) [0,13]=X (1) [0,14]=X (1) [0,15]=X (1) [0,16]=X (1) [0,17]=X (1) [0,18]=X (1) [0,19]=X (1) [0,20]=X (1) [0,21]=X (1) [0,22]=X (1) [1,1]=X (1) [1,2]=X (1) [1,3]=X (1) [1,4]=X (1) [1,5]=X (1) [1,6]=X (1) [1,7]=X (1) [1,8]=X (1) [1,9]=X (1) [1,10]=X (1) [1,11]=X (1) [1,12]=X (1) [1,13]=X (1) [1,14]=X (1) [1,15]=X (1) [1,16]=X (1) [1,17]=X (1) [1,18]=X (1) [1,19]=X (1) [1,20]=X (1) [1,21]=X (1) [1,22]=X (1) [2,2]=X (1) [2,3]=X (1) [2,4]=X (1) [2,5]=X (1) [2,6]=X (1) [2,7]=X (1) [2,8]=X (1) [2,9]=X (1) [2,10]=X (1) [2,11]=X (1) [2,12]=X (1) [2,13]=X (1) [2,14]=X (1) [2,15]=X (1) [2,16]=X (1) [2,17]=X (1) [2,18]=X (1) [2,19]=X (1) [2,20]=X (1) [2,21]=X (1) [2,22]=X (1) [3,3]=X (1) [3,4]=X (1) [3,5]=X (1) [3,6]=X (1) [3,7]=X (1) [3,8]=X (1) [3,9]=X (1) [3,10]=X (1) [3,11]=X (1) [3,12]=X (1) [3,13]=X (1) [3,14]=X (1) [3,15]=X (1) [3,16]=X (1) [3,17]=X (1) [3,18]=X (1) [3,19]=X (1) [3,20]=X (1) [3,21]=X (1) [3,22]=X (1) [4,4]=X (1) [4,5]=X (1) [4,6]=X (1) [4,7]=X (1) [4,8]=X (1) [4,9]=X (1) [4,10]=X (1) [4,11]=X (1) [4,12]=X (1) [4,13]=X (1) [4,14]=X (1) [4,15]=X (1) [4,16]=X (1) [4,17]=X (1) [4,18]=X (1) [4,19]=X (1) [4,20]=X (1) [4,21]=X (1) [4,22]=X (1) [5,5]=X (1) [5,6]=X (1) [5,7]=X (1) [5,8]=X (1) [5,9]=X (1) [5,10]=X (1) [5,11]=X (1) [5,12]=X (1) [5,13]=X (1) [5,14]=X (1) [5,15]=X (1) [5,16]=X (1) [5,17]=X (1) [5,18]=X (1) [5,19]=X (1) [5,20]=X (1) [5,21]=X (1) [5,22]=X (1) [6,6]=X (1) [6,7]=X (1) [6,8]=X (1) [6,9]=X (1) [6,10]=X (1) [6,11]=X (1) [6,12]=X (1) [6,13]=X (1) [6,14]=X (1) [6,15]=X (1) [6,16]=X (1) [6,17]=X (1) [6,18]=X (1) [6,19]=X (1) [6,20]=X (1) [6,21]=X (1) [6,22]=X (1) [7,7]=X (1) [7,8]=X (1) [7,9]=X (1) [7,10]=X (1) [7,11]=X (1) [7,12]=X (1) [7,13]=X (1) [7,14]=X (1) [7,15]=X (1) [7,16]=X (1) [7,17]=X (1) [7,18]=X (1) [7,19]=X (1) [7,20]=X (1) [7,21]=X (1) [7,22]=X (1) [8,8]=X (1) [8,9]=X (1) [8,10]=X (1) [8,11]=X (1) [8,12]=X (1) [8,13]=X (1) [8,14]=X (1) [8,15]=X (1) [8,16]=X (1) [8,17]=X (1) [8,18]=X (1) [8,19]=X (1) [8,20]=X (1) [8,21]=X (1) [8,22]=X (1) [9,9]=X (1) [9,10]=X (1) [9,11]=X (1) [9,12]=X (1) [9,13]=X (1) [9,14]=X (1) [9,15]=X (1) [9,16]=X (1) [9,17]=X (1) [9,18]=X (1) [9,19]=X (1) [9,20]=X (1) [9,21]=X (1) [9,22]=X (1) [10,10]=X (1) [10,11]=X (1) [10,12]=X (1) [10,13]=X (1) [10,14]=X (1) [10,15]=X (1) [10,16]=X (1) [10,17]=X (1) [10,18]=X (1) [10,19]=X (1) [10,20]=X (1) [10,21]=X (1) [10,22]=X (1) [11,11]=X (1) [11,12]=X (1) [11,13]=X (1) [11,14]=X (1) [11,15]=X (1) [11,16]=X (1) [11,17]=X (1) [11,18]=X (1) [11,19]=X (1) [11,20]=X (1) [11,21]=X (1) [11,22]=X (1) [12,12]=X (1) [12,13]=X (1) [12,14]=X (1) [12,15]=X (1) [12,16]=X (1) [12,17]=X (1) [12,18]=X (1) [12,19]=X (1) [12,20]=X (1) [12,21]=X (1) [12,22]=X (1) [13,13]=X (1) [13,14]=X (1) [13,15]=X (1) [13,16]=X (1) [13,17]=X (1) [13,18]=X (1) [13,19]=X (1) [13,20]=X (1) [13,21]=X (1) [13,22]=X (1) [14,14]=X (1) [14,15]=X (1) [14,16]=X (1) [14,17]=X (1) [14,18]=X (1) [14,19]=X (1) [14,20]=X (1) [14,21]=X (1) [14,22]=X (1) [15,15]=X (1) [15,16]=X (1) [15,17]=X (1) [15,18]=X (1) [15,19]=X (1) [15,20]=X (1) [15,21]=X (1) [15,22]=X (1) [16,16]=X (1) [16,17]=X (1) [16,18]=X (1) [16,19]=X (1) [16,20]=X (1) [16,21]=X (1) [16,22]=X (1) [17,17]=X (1) [17,18]=X (1) [17,19]=X (1) [17,20]=X (1) [17,21]=X (1) [17,22]=X (1) [18,18]=X (1) [18,19]=X (1) [18,20]=X (1) [18,21]=X (1) [18,22]=X (1) [19,19]=X (1) [19,20]=X (1) [19,21]=X (1) [19,22]=X (1) [20,20]=X (1) [20,21]=X (1) [20,22]=X (1) [21,21]=X (1) [21,22]=X (1) [22,22]=X (1) 

  0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18  19  20  21  22 
  1  20  20  20  20  20  20   1  20  20  20   1   1  20   9  20  20  20  20   1  19  20   0 
   20 200 200 200 200 200  20  20 200 200  20   0  20 178 176 200 200 200  20   9 200   0 
    200 200 200 200 200 200 200 200 200 200   0   0  60 200 200 200 200 124 147 145   0 
      200 200 200 200 200 200 200 200 200   0   0   0 200 200 200 200 200 193 200   0 
        107 200 200 200 200 200 200 200   0   0   0   0 200 200 200 200 200 200   0 
          155 200 200 200 200 200 200   0   0   0   0   0 200 200 200 200 200   0 
            117 200 177 200 200 200   0   0   0   0   0   0 200 181 200 200   0 
               93 200 200 200 200   0   0   0   0   0   0   0 183 173 200   0 
                 85 200 200 200   0   0   0   0   0   0   0   0 187 200   0 
                   74 200 160   0   0   0   0   0   0   0   0   0 200   0 
                     61 185   0   0   0   0   0   0   0   0   0   0   0 
                       78   0   0   0   0   0   0   0   0   0   0   0 
                          1   0   0   0   0   0   0   0   0   0   0 
                           21   0   0   0   0   0   0   0   0   0 
                             52   0   0   0   0   0   0   0   0 
                              135   0   0   0   0   0   0   0 
                                192   0   0   0   0   0   0 
                                  118   0   0   0   0   0 
                                     99   0   0   0   0 
                                      141   0   0   0 
                                        149   0   0 
                                          165   0 
                                              1 
BEST TRANSLATION: 165981 S  -> S </s> :0-0 : term=1-1 : nonterm=0-0 : c=-0.121 core=(0.000,-1.000,1.000,0.000,0.000,0.000,0.000,0.000,0.000)  [0..22] 164569 [total=-414.805] core=(-400.000,-38.000,26.000,-31.696,-51.326,-43.972,-56.635,4.999,-161.744) 
အဲ ဒါ အ တည် ပြု ခဲ့ သည် ရှစ် thoroughbred အဲ ဒီ ပြိုင် ပွဲ မှာ မြင်း တွေ Randwick ဆစ် ဒ နီ တွင် Racecourse equine ကွေး နှ င့် ကူး စက် ရော ဂါ ဖြစ် ခဲ့ ရ ပါ တယ် ။
Line 0: Additional reporting took 0.000 seconds total
Line 0: Translation took 0.200 seconds total
Translation took 0.198 seconds
Name:moses_chart	VmPeak:231936 kB	VmRSS:34720 kB	RSSMax:114328 kB	user:0.204	sys:0.012	CPU:0.216	real:0.216
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/hiero/hiero/en-my/xml$

အဲဒီ အကြောင်းက output hyp ဖိုင်ထဲမှာ ဘာကြောင့် မရှိရတာလဲ ?!?!

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/hiero/hiero/en-my/xml$ head -n 1 ./en-my.xml.hyp1
ထို လူ သား များ သိ သိ သာ သာ အ ထူး အ ကူး စက် တုပ် ကွေး ဖြစ် တယ် ဒါ ပေ မဲ့ ကူး စက် ဖို့ မ ဖြစ် နိုင် ဘူး ။

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/hiero/hiero/en-my/xml$ head -n 1 ./en-my.xml.hyp2
ထို လူ သား များ သိ သိ သာ သာ အ ထူး အ ကူး စက် တုပ် ကွေး ဖြစ် တယ် ဒါ ပေ မဲ့ ကူး စက် ဖို့ မ ဖြစ် နိုင် ဘူး ။


(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/hiero/hiero/en-my/xml$ wc ./en-my.xml.hyp{1,2}
   122   5485  51403 ./en-my.xml.hyp1
   122   5485  51403 ./en-my.xml.hyp2
   244  10970 102806 total

-xml-input က အလုပ်မလုပ်တာလို့ ယူဆတယ်...

## Translation without xml tag

                                          134   0   0   0   0   0   0   0   0   0   0   0   0 
                                             98   0   0   0   0   0   0   0   0   0   0   0 
                                              104   0   0   0   0   0   0   0   0   0   0 
                                                138   0   0   0   0   0   0   0   0   0 
                                                  127   0   0   0   0   0   0   0   0 
                                                    124   0   0   0   0   0   0   0 
                                                      122   0   0   0   0   0   0 
                                                         84   0   0   0   0   0 
                                                          118   0   0   0   0 
                                                             72   0   0   0 
                                                               98   0   0 
                                                                 74   0 
                                                                    1 
BEST TRANSLATION: 643777 S  -> S </s> :0-0 : term=1-1 : nonterm=0-0 : c=-0.121 core=(0.000,-1.000,1.000,0.000,0.000,0.000,0.000,0.000,0.000)  [0..33] 642173 [total=-514.466] core=(-500.000,-56.000,30.000,-29.653,-56.906,-61.836,-93.509,4.000,-201.798) 
Line 0: Additional reporting took 0.000 seconds total
Line 0: Translation took 0.871 seconds total
Translation took 0.871 seconds
Name:moses_chart	VmPeak:297704 kB	VmRSS:113028 kB	RSSMax:190500 kB	user:0.818	sys:0.108	CPU:0.926	real:0.925
Result of HPBSMT -xml-input exclusive:
BLEU = 18.73, 54.7/26.2/13.2/6.8 (BP=0.987, ratio=0.987, hyp_len=58157, ref_len=58895)

## Debug Success

--xml-brackets "{{ }}" နဲ့ အဆင်ပြေသွားပြီ။
add-xml-markup.pl ကို အရင်ပြင်တယ်။ အောက်ပါအတိုင်း
         #$sent =~ s/\b$key\b/<np translation="$markupWord{$key}" prob="0.8">$key<\/np>/g;
         $sent =~ s/\b$key\b/\{\{np translation="$markupWord{$key}" prob="0.8"\}\}$key\{\{\/np\}\}/g;
         
ပြီးမှ အောက်ပါအတိုင်း moses_chart ကို --xml-brackets option နဲ့ run ခဲ့တယ်။
~/tool/mosesbin/ubuntu-17.04/moses/bin/moses_chart -xml-input exclusive --xml-brackets "{{ }}" -i ./test.xml.en -f ../evaluation/test.filtered.ini.1 > en-my.xml.hyp1

Result of HPBSMT -xml-input exclusive:
BLEU = 23.99, 58.7/31.1/17.5/10.4 (BP=1.000, ratio=1.022, hyp_len=60217, ref_len=58895)

Result of HPBSMT -xml-input inclusive:
BLEU = 23.99, 58.7/31.1/17.5/10.4 (BP=1.000, ratio=1.022, hyp_len=60217, ref_len=58895)

Baseline: 
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/hiero/hiero/en-my/evaluation$ cat test.multi-bleu.1 
BLEU = 18.63, 54.4/26.1/13.1/6.8 (BP=0.991, ratio=0.991, hyp_len=58343, ref_len=58895)

ရလဒ်က အကောင်းဆုံးပဲ လို့ ထင်တယ် PBSMT, HPBSMT, OSM သုံးမျိုးထဲမှာ...

## Compare Results

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/hiero/hiero/en-my/xml/results$ head test.output.1 
အဲ ဒါ အ တည် ပြု ခဲ့ ပြီး အဲ ဒီ အ ပြေး ပြိုင် ပွဲ ရှစ် thoroughbred Randwick မှာ မြင်း တွေ ဆစ် ဒ နီ တွင် Racecourse equine ကွေး နှ င့် ကူး စက် ရော ဂါ ဖြစ် ခဲ့ ရ ပါ တယ် ။
ဆင်း Randwick သော့ ခတ် ထား ခဲ့ သည် ၊ နှစ် လ အ ထိ နှ င့် ဆက် လက် တည် ရှိ နေ ဖို့ မျှော် လ င့် ထား တယ် အဲ ဒါ ကြော င့် အ တွက် ဖြစ် ပါ သည် ။
အဲ ဒါ က အ Randwick မှာ မြင်း တွေ stabled ၇၀၀ virulent တုပ် ကွေး ရော ဂါ အ ကြောင်း အ များ စု ကို ထိ ခိုက် စေ လိ မ့် မယ် လို့ မျှော် လ င့် ပါ တယ် ။
NSW တုပ် ကွေး ၏ အ မှု ကို လက် မှတ် ရေး ထိုး ပြီး နောက် ရက် ပေါင်း ၃၀ အ ထိ quarantined မည် ဖြစ် ပြီး နောက် ဆုံး အ ကြီး မား အ ခြေ ခံ စက် မှု လုပ် ငန်း ဝန် ကြီး ဌာ န ဝန် ကြီး က ပြော ကြား သည် ။
အ ဆို ပါ အ မှု များ ရှိ သော် လည်း လူ မျိုး တစ် မျိုး မြင်း တွေ ၊ လူ မျိုး တွေ ရဲ့ ပ ထ မ ဦး ဆုံး အ ကြိမ် ကူး စ infecting NSW နှ င့် Queensland အ နှံ့ မှာ စိတ် အ များ အ ပြား က မြင်း တွေ ပါ တယ် ။
လူ သား တွေ ကို သိ သိ သာ သာ အ ထူး အ ကူး စက် နိုင် မည် မ ဟုတ် ပေ မဲ့ ကူး စက် တုပ် ကွေး ဖြစ် သည် ။
အ မျိုး သား ပြိုင် ပွဲ အ တွက် စက် မှု လက် မှု လုပ် ငန်း ရှင် များ အ ဖြစ် shutdown ဒေါ် လာ သန်း ပေါင်း များ စွာ ကို နေ့ တိုင်း ၏ သောင်း နဲ့ ချီ ပြီး ရှိ နေ တယ် ။
Racing ၏ အုပ် ချုပ် ရေး ချုပ် Landys NSW ၊ ပီ တာ ( ၅ ) &quot; ဒီ နေ့ ပြိုင် ပွဲ ပြီး ခဲ့ တဲ့ စ နေ တ နင်္ဂ နွေ မှာ မြင်း လှုပ် ရှား မှု အ ပေါ် က န့် သတ် တာ ပိတ် ပင် တာ တစ် ခု က တည်း က နေ ခိုက် ခဲ့ တုန်း က ပြော တယ် &quot; NSW တွင် လိုက် ၊ အ ပြေး ပြိုင် ပွဲ အ တွက် တစ် နေ့ &quot; အ မည်း ရောင် မြို့ စက် မှု လုပ် ငန်း တစ် ခု ဖြစ် ခဲ့ ပါ တယ် ။
စ နေ ၊ တ နင်္ဂ နွေ Racing ဟာ ဩ စ တြေး လျ ပြည် နယ် နှ င့် Queensland NSW က လွဲ ရင် အား လုံး အ ပေါ် တွင် ပြန် လည် ဖို့ မျှော် လ င့် ထား ပါ တယ် ။
ဆစ် ဒ နီ နေ စဉ် ရဲ့ နွေ ဦး ရာ သီ မ ပြိုင် ပွဲ ရဲ့ ဟာ ကို ဆော င့် ကန် လိုက် တာ နဲ့ အ တူ ဒီ စ နေ ၊ တ နင်္ဂ နွေ မှာ သွား ဖို့ မျှော် လ င့် ထား တာ ဖျက် သိမ်း လိုက် ၊ Melbourne carnival ခဲ့ သည် မှာ &quot; အ Caufield ခွက် ပါ ။

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/hiero/hiero/en-my/xml/results$ head ./en-my.xml.hyp1
အဲ ဒါ တွေ ဆစ် ဒ နီ တွင် ရန်း ဝခ် မြင်း ပြိုင် ကွင်း မှာ အဲ ဒီ မြင်း ရှစ် thoroughbred ပြိုင် ပွဲ ကို အ တည် ပြု ခဲ့ သည် equine ကွေး နှ င့် ကူး စက် ရော ဂါ ဖြစ် ခဲ့ ပါ တယ် ။
ဆင်း ရ န့် ဝခ် သော့ ခတ် ထား ခဲ့ သည် ၊ နှစ် လ အ ထိ နှ င့် အ တွက် ဆက် လက် တည် ရှိ နေ ဖို့ မျှော် လ င့် ထား တယ် အဲ ဒါ ကြော င့် ဖြစ် ပါ သည် ။
အဲ ဒါ က အ ရ န့် ဝခ် မှာ မြင်း တွေ stabled ၇၀၀ virulent တုပ် ကွေး ရော ဂါ အ ကြောင်း အ များ စု ကို ထိ ခိုက် စေ လိ မ့် မယ် လို့ မျှော် လ င့် ပါ တယ် ။
အန် အက်စ် ဒ ဗ လျူ ရာ အ ပြော အ ခြေ ခံ စက် မှု လုပ် ငန်း များ အား ဝန် ကြီး ဌာ န ဝန် ကြီး ၏ အ နောက် ဆုံး လက် မှတ် ရေး ထိုး ပြီး နောက် ရက် ပေါင်း ၃၀ အ ထိ quarantined တုပ် ကွေး ရော ဂါ ဖြစ် လိ မ့် မယ် ။
အ ဆို ပါ အ မှု များ ရှိ သော် လည်း လူ မျိုး တစ် မျိုး မြင်း တွေ ၊ လူ မျိုး တွေ ရဲ့ ပ ထ မ ဦး ဆုံး အ ကြိမ် ကူး စ infecting ဒါ ဇင် မှာ စိတ် အ များ ၏ အန် အက်စ် ဒ ဗ လျူ နှ င့် ကွင်း စ လန်း ကို ဖြတ် ပြီး မြင်း တွေ ပါ တယ် ။
ထို လူ သား များ သိ သိ သာ သာ အ ထူး အ ကူး စက် တုပ် ကွေး ဖြစ် တယ် ဒါ ပေ မဲ့ ကူး စက် ဖို့ မ ဖြစ် နိုင် ဘူး ။
အ မျိုး သား ပြိုင် ပွဲ အ တွက် စက် မှု လက် မှု လုပ် ငန်း ရှင် များ အ ဖြစ် shutdown သန်း ပေါင်း များ စွာ သော နေ့ တိုင်း ဒေါ် လာ သောင်း နဲ့ ချီ ပြီး ရှိ နေ တယ် ။
Racing ၏ အုပ် ချုပ် ရေး ချုပ် အန် အက်စ် ဒ ဗ လျူ ၊ ပီ တာ လန်း ဒီစ် ဗွီ &quot; ဒီ နေ့ ပြိုင် ပွဲ ကို ပျက် နေ ခဲ့ တုန်း က ပြော ပြီး ခဲ့ တဲ့ စ နေ တ နင်္ဂ နွေ မှာ မြင်း လှုပ် ရှား မှု အ ပေါ် က န့် သတ် တာ ပိတ် ပင် တာ တစ် ခု က တည်း က &quot; အန် အက်စ် ဒ ဗ လျူ တွင် လိုက် ၊ အ ပြေး ပြိုင် ပွဲ အ တွက် တစ် နေ့ &quot; အ မည်း ရောင် မြို့ စက် မှု လုပ် ငန်း တစ် ခု ဖြစ် ခဲ့ ပါ တယ် ။
စ နေ ၊ တ နင်္ဂ နွေ ပိတ် ရက် Racing ဟာ အန် အက်စ် ဒ ဗ လျူ နှ င့် ကွင်း စ လန်း က လွဲ ရင် အား လုံး သြ စ တြေး လျ နိုင် ငံ ၏ ပြည် နယ် များ တွင် ပြန် လည် ဖို့ မျှော် လ င့် ထား ပါ တယ် ။
ဆစ် ဒ နီ နေ စဉ် အက်စ် နွေ ဦး ရာ သီ မ ပြိုင် ပွဲ ကို ဆော င့် ကန် လိုက် တာ နဲ့ အ တူ ဒီ စ နေ ၊ တ နင်္ဂ နွေ မှာ ထွက် ခွာ ဖို့ carnival ဖျက် သိမ်း လိုက် ၊ အက်စ် မဲလ် ဘုန်း &quot; အ ဖြစ် မျှော် လ င့် လျှက် ရှိ ကော့ ဖီးလ် ခွက် ပါ ။
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/hiero/hiero/en-my/xml/results$ 


To Do:
dict1 ကနေ xml tagged ဖိုင်အဖြစ် ပြင်တဲ့ နေရာမှာ လက်ရှိထက် ပိုကောင်းအောင် လုပ်လို့ ရတယ်။
dict1 မှာ ဖြစ်နိုင်ချေရှိတဲ့ transliterated word, compound word တွေကို အားလုံး သိမ်းထားပြီး အစားထိုးတဲ့အခါမှာလည်း နည်းနည်း ပိုကောင်းအောင်လုပ်လို့ ရတယ်လို့ ယူဆတယ်။
*** နောက်နှစ် WAT2021 မှာ ဖြစ်ဖြစ် လုပ်ချင်တယ်။ နောက်ပြီးတော့ NMT ကိုလည်း အခုလို Hybrid လုပ်ချင်တယ်။ ကိုယ့်ဖာသာကိုယ် rule ရေးပြီးတော့...


---------------------

*** Run with Word Unit
Word Segmenter ကို ပိုကောင်းအောင် develop လုပ်ရင်း MT performance ကို evaluation လုပ်သွားရန်...
	   en-my, my-en
exp-word1:   (word segmentation 1)

=============

### WER Score ###
*** Run with Syllable Unit
		en-my, my-en
exp-syl1: 95.1, 119.2
exp-syl2: 94.8, 115.8
exp-syl3: 91.7, 97.8
exp-syl4: 91.7, 97.0
exp-syl5:
exp-syl (4+5):
exp-syl7 (failed)
exp-syl8:  (worked under exp-syl4/)

*** Run with Word Unit
	  en-my, my-en
exp-word1: (word segmentation 1)

==============
  
  
  
  ## Reference

Thesis Book: Hybrid Machine Translation Approaches for Low-Resource Languages

Statistics of UCSY English-Myanmar parallel corpus ဆိုပြီးတော့ အောက်ပါအချက်အလက်တွေကို ဖြည့်ရန်  
Sentence Pairs
Unique Sentences
Average Sentence Length
Words (number of tokens)
Vocabulary (classes)
Unigrams (tokens appear only once)


UCSY corpus sentence length analysis လုပ်ချင်တယ်။ ( x axis = sentence length, y axis = density (0.00, 0.05))

Sentence Pair
Sentence Length
Words (number of tokens)
Vocabulary
Unigrams
Vocabulary Coverage (for dev and test)
 Data distribution of EMILLE English-Urdu parallel corpus
=======================

Ref:
 
 ### Translation Mistakes
 
 Torrential rains have been plaguing the nine southernmost provinces of the country for nearly two weeks and further downpours are forecast for later this week .	ဒ လ ဟော ရွာ သော မိုး များ သည် နိုင် ငံ ၏ တောင် ဘက် ခြမ်း ပြည် နယ် ၉ ခု တွင် ၂ ပတ် နီး ပါး ကြာ အောင် ပ လိပ် ရော ဂါ ဖြစ် ပွား နေ ပြီး နောက် ထပ် ရုတ် တ ရက် မိုး သည်း ထန် စွာ ရွာ သွန်း မှု ကို ယ ခု အ ပတ် ပြီး နောက် အ ထိ ခ န့် မှန်း ကြ သည် ။
 Ottawa ultra-runner Ray Zahab , age 39 , adventure journalist and architect Kevin Vallely , age 44 , of Lynn Valley , North Vancouver and North Pole expeditionist Richard Weber , age 49 , said they completed the 700-mile ( 1,130-kilometer ) journey , at 10,000 feet altitude , finally arriving early Wednesday morning .	အ သက် ၃၉ နှစ် ရှိ ၊ အော့ တာ ဝါ မှ လွန် ကဲ - အ ပြေး သ မား ရေး ဇာ ဟတ် ၊ လင်း တောင် ကြား မှ အ သက် ၄၄ နှစ် ရှိ စွ န့် ဝံ့ သူ သ တင်း စာ ဆ ရာ နှ င့် ဗိ သု ကာ ပ ညာ ရှင် ကီ ဗင် ဗဲ လီ ၊ အ သက် ၄၉ နှစ် ရှိ ဗန် ကူး ဗား မြောက် ပိုင်း နှ င့် မြောက် ဝင် ရိုး စွန်း လေ့ လာ ရေး ခ ရီး သည် ရစ် ချတ် ဝီ ဗာ တို့ က သူ တို့ သည် မိုင် - ၇၀၀ ( ၁,၁၃၀ - ကီ လို မီ တာ ) ခ ရီး ကို အ မြ င့် ဆုံး ပေ ပေါင်း ၁၀,၀၀၀ သို့ နောက် ဆုံး တွင် ဗုဒ္ဓ ဟူး နေ့ နံ နက် ၊ အ စော ပိုင်း တွင် ရောက် ရှိ ပြီး ဆုံး ခဲ့ သည် ဟု ဆို သည် ။
 They endured a white-out but survived on a 7,000-calorie-a-day diet of pemmican , Gatorade drink powder , outdated salami , deep-fried bacon , cheese and butter .	သူ တို့ သည် ဝင် ရိုး စွန်း - ရာ သီ ဥ တု ကို ကြံ ကြံ ခံ ၍ တစ် နေ့ လျှင် - အာ ဟာ ရ - ကယ် လို ရီ - ၇,၀၀၀ ရ ရှိ သော အ မဲ သား ခြောက် ၊ ဂတ် တို ရိတ် ရေ ဖျော် သောက် သော အ မှု န့် ၊ ခေတ် ကုန် နေ သော အ စာ သွတ် ဝက် အူ ချောင်း ၊ ဆီ နစ် အောင် ကြော် ထား သော - ဝက် ဆား နယ် ခြောက် ၊ ဒိန် ခဲ နှ င့် ထော ပတ် အ စ ရှိ သော နေ ထိုင် စား သောက် မှု ပုံ စံ ဖြ င့် သာ အ သက် ရှင် သန် ခဲ့ ရ သည် ။
 outdated salami ===> ခေတ်ကုန်နေသော အစာသွတ် ဝက်အူချောင်း
 
 On October 4 and October 5 , the New York Rangers and Tampa Bay Lightning will play in Prague , Czech Republic at the Sazka Arena , and the Ottawa Senators and Pittsburgh Penguins will play in Stockholm , Sweden at the Stockholm Globe Arena .	အောက် တို ဘာ လ ၄ ရက် နှ င့် အောက် တို ဘာ လ ၅ ရက် တွင် ၊ န ယူး ယောက် ရိန်း ဂျား အ ဖွဲ့ နှ င့် တမ် ပ ဘေး လိုက် တ နင်း အ ဖွဲ့ တို့ ဟာ စီ ဇက် သမ္မ တ နိုင် ငံ ပ ရာ့ဂ် ရှိ ဆက် ဇ ကာ အား က စား ကွင်း မှာ ၊ က စား ကြ မည် ဖြစ် ပြီး ၊ အာ့ တ ဝါ ဆိ နိတ် တာစ် အ ဖွဲ့ နှ င့် ဖစ်စ် ဘာ့ဂ် ပင် ဂွင်းစ် အ ဖွဲ့ တို့ ဟာ ဆွီ ဒင် နိုင် ငံ စ တော့ ဟုဏ်း ရှိ ၊ စ တော့ ဟုဏ်း ဂ လို ဘယ် အား က စား ကွင်း မှာ က စား ကြ မည် ။
 Czech ===> စီဇက်
 
 Justice Jean-Guy Boilard of the Quebec Superior Court noted that the police didn &amp; apos ; t use a &amp; quot ; knock notice &amp; quot ; before entering Parasiris &amp; apos ; house , but rather used a battering ram to break down the door .	ကွီး ဘက် အ ထက် တန်း တ ရား ရုံး မှ ဂျစ် စ တစ် ဂျင်း - ဂိုလ်း ဘွိုင်း လော့ က ရဲ သည် ပါ ရာ ဆီ ရစ် ၏ အိမ် ကို မ ဝင် မီ “ သ တိ ပေး တံ ခါး ခေါက် ခြင်း ” တစ် ခု ကို မ ပြု လုပ် ခဲ့ ၊ ပေ မဲ့ တံ ခါး ကို ချိုး ဖျက် ရန် ဆ င့် ကာ ဆ င့် ကာ ထု ရိုက် မှု တစ် ခု ကို အ တန် အ သ င့် ပြု ခဲ့ သည် ဟု မှတ် သား ထား သည် ။
 Justice ===> ဂျစ် စ တစ်
 
 The prosecution argued that , even if it was not clear to Parasiris that police were entering his home , he should not have been so reckless with a gun .	ရဲ များ သည် သူ့ အိမ် ကို ဝင် နေ ခဲ့ တယ် လို့ ပါ ရာ ဆီ ရစ် က ၎င်း သည် မ သေ ချာ ရင် တောင် မှ ၊ သူ သည် ဤ မျှ အ ဆင် မ ခြင် သေ နတ် တစ် လက် ကို မ သုံး သ င့် ဟု ၊ တ ရား လို ဘက် က ချေ ပ ပြော ဆို သည် ။
 spelling mistake ===> အဆင်မခြင်
 
 Sale , however , lead the centre clearances 35 to Traralgon &amp; apos ; s 27 .	ဒါ ပေ မဲ့ ၊ စေးလ် က ၊ ကွင်း အ လယ် မှ ကန် ချက် ၃၅ မှာ ထ ရာ ရာ ပေါန် ကို ၂၇ ချက် နဲ့ ဦး ဆောင် ခဲ့ ပါ တယ် ။
 Traralgon ===> ထ ရာ ရာ ပေါန် (အသံထွက်မှားနေတယ်)
 
 Claire Chadourne , headmistress at the College Jean-Monnet , said , &amp; quot ; He seemed a little older than his classmates , two or three years at the most .	ဂျင်း - မို နတ် ကော လိပ် က ကျောင်း အုပ် ဆ ရာ မ ကြီး ၊ လာ ရီ ချ ဒိုး က ၊ “ သူ သည် သူ့ အ တန်း ဖော် တွေ ထက် အ များ ဆုံး ၂ နှစ် သို့ မ ဟုတ် ၃ နှစ် ၊ အ နည်း ငယ် ပို ကြီး တယ် လို့ ထင် ခဲ့ တယ် လို့ ၊ ပြော ခဲ့ တယ် ။
 Claire Chadourne ===> လာ ရီ ချ ဒိုး
 
 He managed to convince the couple that he was their son even though he had brown eyes and a heavy French accent .	သူ့ က အ ညို ရောင် မျက် လုံး နှ င့် ပြင် သစ် လေ သံ တစ် ခု အ လွန် လွှမ်း နေ သော် လည်း သူ က သူ တို့ သား ဖြစ် သော ထို စုံ တွဲ ကို ဆွဲ ဆောင် စည်း ရုံး ရန် သူ က စီ မံ နိုင် ခဲ့ သည် ။
 Translation Error, သူ တို့ သား ဖြစ် သော ထို စုံ တွဲ (the couple that he was their son ကို ဘာသာပြန်ထားတာက မှားနေ)
 
 Returning from the United States in 2003 , Bourdin showed up in the southeastern Alps , where he claimed to be Leo Balley , who went missing in 1996 when he was seven-years-old and camping with his father .	၂၀၀၃ ခု နှစ် မှာ အ မေ ရိ ကန် ပြည် ထောင် စု မှ ပြန် လာ သော ၊ ဘို ဒင်း က သူ သည် သူ့ ဖ ခင် နှ င့် အ တူ စ ခန်း ချ ခ ရီး ထွက် ခဲ့ ပြီး ခု နှစ် - နှစ် - အ ရွယ် ဖြစ် ခဲ့ သော ၁၉၉၆ တွင် ပျောက် ကျန် ရစ် ခဲ့ သော သူ ၊ လီ ယို ဘေး လီ ကို သူ က အ ခိုင် အ မာ ပြော ဆို ခဲ့ သော ၊ အဲလ် တောင် တန်း အ ရှေ့ တောင် ဖက် တွင် ရောက် ရှိ ခဲ့ သည် ။
 Very bad translation
 
 Finnish theatrical hard rock band Lordi have released Beast Loose in Paradise - which will be the soundtrack to the band &amp; apos ; s upcoming horror movie Dark Floors - as a downloadable single .	ဒေါင်း လုပ် လုပ် နိုင် သော တစ် ကိုယ် တော် တစ် ခု အ ဖြစ် - တေး ဂီ တ အ ဖွဲ့ ၏ လာ မ ည့် ထိတ် လ န့် ဖွယ် ရုပ် ရှင် ဒက်ဒ် ဖ လောစ် အ တွက် ရုပ် ရှင် ဆိုင် ရာ တေး ဂီ တ ဖြစ် လာ မည် ဖြစ် သ ည့် - ဘိစ် လုစ် ကို ပါ ရာ ဒိုက်စ် တွင် ဖန်း နစ် ဖျော် ဖြေ မှု ဆိုင် ရာ အ ပြင်း စား ရော့ခ် တေး ဂီ တ ဝိုင်း လော့ဒ် ဒီ က ထုတ် ဝေ ခွ င့် ပြု ခဲ့ သည် ။
 ဘာသာပြန်ထားတာက ဗမာစာကြောင်းမဆန်ဘူး။
 ပြီးတော့ Beast Loose in Paradise ===> ဘိစ် လုစ် ကို ပါ ရာ ဒိုက်စ် တွင်
 
 He said that he had written most of the rest between two US tours , the Ozzfest tour and a tour as the support act for American gothic doom metal band Type O Negative .	အ မေ ရိ ကန် ဂေါ့ သစ် ဒွန်းမ် မက် တယ် အ ဖွဲ့ အ မျိုး အ စား အို နက် က တစ်ဖ် အ တွက် ထောက် ပံ့ သ ည့် လုပ် ဆောင် မှု ကဲ့ သို့ ခ ရီး စ ဥ် တစ် ခု နှ င့် အော့စ် ဖိစ် ခ ရီး စ ဥ် ၊ အ မေ ရိ ကန် ခ ရီး စ ဥ် များ နှစ် ခု အ ကြား ကျန် ရှိ သော အ ပိုင်း အ များ စု ကို သူ ရေး သား ခဲ့ ပြီး ပြီ ဟု သူ က ပြော ခဲ့ သည် ။
 Encoding Error ညလေးနဲ့ အက္ခရာဥ ကိစ္စ
 
==========================

Transliteration Mistakes

Jim Swire	ဂျိန်း ဆဝိုင်း (ဂျင်မ် ဖြစ်ရမှာကို ဂျိန်း လုပ်ထား)
Al-Megrahi	အေအိုင်-မက်ဂရာဟီ (အေအလ် ဖြစ်ရမှာကို အေအိုင် လုပ်ထား)
Luxembourg	လက်အမ်ဘော့
the 12th International Wämper Triathlon	တစ်ဆယ့်နှစ် ကြိမ် မြောက် နိုင်ငံတကာ ဩစတြေးလျ အနောက်ဘက် ရှိ သုံး ကြိမ် ဆက်တိုက် ပြိုင်ပွဲ
Britain	ဗြိတသျှ (မြန်မာမှာက ဗြိတိသျှ လို့ ရေးတာက ပုံမှန်)
C-crest	စီ-စီ ကရက်စ် (စီ တစ်လုံး ပိုနေ)
Afmadow	အမာဒေါင်း (ဒိုး ဖြစ်သင့်တယ်)
Brendon Leonard	ဘရန်ဒန် မှ လီယိုနာ့ (မှ က ပါလာတာက However tries from Brendon Leonard ဆိုတဲ့ စာကြောင်းက from ကိုပါ ဆွဲယူလာတဲ့ပုံစံရှိတယ်...)
Fiji	ဖူဂျီ (Fi ကို ဖူ လို့ transliteration လုပ်ထားတယ်)

Ronan O &amp; apos ; Gara	ရိုနမ် အို့ဂါရာ
Ronan O &amp; apos ; Gara	ရိုအင် အိုဂါရာ (မငြိမ်ဘူး။ ရိုနမ် ရိုအင် အို့ အို)


Transliteration Mistakes (took from nmt-exp notebook)

Transliteration word တွေ ဆွဲထုတ်တဲ့အခါမှာ Test Data Set တစ်ခုတည်းမှာတင်တွေ့ရတဲ့ အမှားတွေ က အများကြီးပဲ တချို့ အမှား ဥပမာတွေက အောက်ပါအတိုင်း ...

The fire burned down a Los Angeles County Sheriff Department communications tower, forcing Lancaster and Palmdale-based deputies to set up mobile operations bases and coordinate their efforts using cell phones and computers.	လန်ကပ်စတာ မြို့တော် နှင့် ပန်ဒဲလ် မြို့တော် အခြေစိုက် ဌာန များ အား ရွှေ့ ပြောင်း လုပ်ဆောင်ရေး အဖွဲ့ များ စီစဉ် ထား ရန် နှင့် သူ တို့ ၏ ဆဲလ်ဖုန်း များ နှင့် ကွန်ပျူတာ များ အသုံးပြု ၍ ကြိုးပမ်းချက် များ ကို ပူးပေါင်း လုပ်ဆောင် ရန် တိုက်တွန်း ပြီး ၊ လော့စ် အိန်ဂျလိစ် စီရင်စု အုပ်ချုပ် ရေး ဌာန ဆက်သွယ်ရေး တာဝါ ကို မီးလောင်းကျွမ်း ခဲ့ သည် ။
spelling mistake: မီးလောင်းကျွမ်း

Residents of Leona Valley, Lake Elizabeth, Ritter Ranch, Rancho Vista, Ana Verde and Palmdale received Reverse 911 telephone calls last night alerting them of mandatory evacuations.	လီယိုနား တောင်ကြား ၊ အဲလီဇဘက်ခ် ရေကန် ၊ ရစ်တာ မွေးမြူရေး ခြံ ၊ ရန်ချို ရှုမျှော်ခင်း ၊ အန်နာ ဘစ်ဒီ နှင့် ပန်ဒဲလ် မြို့တော် တွင် နေထိုင် သူ များ သည် ၎င်း တို့ ကို ဥပဒေ အရ ရွှေ့ပြောင်း ရန် သတိပေး နေ သော ၉၁၁ မှ ဖုန်း ပြည်လည် ခေါ် ဆို မှု ကို မနေ့ ည က လက်ခံ ရရှိ ခဲ့ ပါ သည် ။
spelling mistake: ပြည်လည်

Absent an announcement from the Chinese government, it's unclear what the conditions were that caused the site to be accessible from within China.	တရုတ် အစိုးရ ထံ မှ ကြော်ငြာ ချက် တစ် ရပ် ထုတ်ပြန် ရန် ပျက်ကွက် ခဲ့ မှု သည် ၊ ၎င်း က ဘယ် အခြေအနေ များ သည် တရုတ် နိုင်ငံ အတွင်း မှ ဖတ်ရှုခွင့် ရ ဆိုက် ဖြစ် စေ ခဲ့ သည် ဆိုတာ မ ရှင်းလင်း ပါ ။
translation mistake?! announcement vs ကြော်ငြာ

"Wikipedia is not a haven for dissidents but an encyclopedia."	“ ဝီကီပီးဒီးယားး သည် အတိုက်အခံ များ အတွက် စိတ်ချလုံခြုံ တဲ့ နေရာ မ ဟုတ် ပေမဲ့ စွယ်စုံကျမ်း တစ် ခု ပါ ။ ”
"About 99.9 percent of Wikipedia has topics that are not of interest to the Chinese Government."	“ တရုတ် အစိုးရ ၏ စိတ်ဝင်စား မှု မ ရရှိ စေ သော အကြောင်းအရာ များ သည် ဝီကီပီးဒီးယားး ၏ ၉၉.၉ ရာခိုင်နှုန်း ခန့် ရှိ သည် ။ ”
The third block of Wikipedia, which was implemented 19 October 2005, was issued without explanation or an expected length.	၂၀၀၅ အောက်တိုဘာ ၁၉ တွင် အကောင်အထည်ဖော် ခဲ့ သည့် ဝီကီပီးဒီးယားး ၏ တတိယ ပိတ်ဆို့ မှု ကို ရှင်းလင်း ချက် သို့မဟုတ် ရေရှည် မျှော်လင့် ချက် မ ရှိ ဘဲ ထုတ်ပြန် ခဲ့ သည် ။
Wikipedia has been blocked twice before, the first from 2-21 June 2004, due to the 15th anniversary of the Tian'anmen Square Incident.	၂-၂၁ ဇွန် လ ၂၀၀၄ မှာ ပထမဆုံး ၊ တီယန် မင် ရင်ပြင် မတော်တဆ မှု ၁၅ နှစ် ပတ်ပတ်လည် ကြောင့် ၊ ဝီကီပီးဒီးယားး ကို ယခင် က နှစ် ကြိမ် ပိတ်ဆို့ ခဲ့ သည် ။
spelling mistake: ဝီကီပီးဒီးယားး

He told a government inquiry, "There are no powerful groups in society that can come along to governments or anybody and say 'we can do what we like when we like and there's nothing you should do about it'."	သူ သည် ၊ " အစိုးရ သို့မဟုတ် မည်သူ မျ နှင့်အတူ လိုက် ပါ ဆောင်ရွက် နိုင် သော လူ့ အဖွဲ့အစည်း တွင် အာဏာ အပြည့်အဝ ရှိ သော အဖွဲ့ များ တစ် ခု မျှ မ ရှိ ကြောင်း နှင့် ' ကျွန်ုပ် တို့ သည် ကျွန်တော် တို့ ကြိုက် သည့် အချိန် တွင် ကြိုက် သည့် အရာ ကို လုပ် နိုင် ပြီး ၎င်း အကြောင်းအရာ ကို သင် လုပ် သင့် သော မည်သည့် အရာ မှ မ ရှိ ဟု ပြော သည် ' " ကို အစိုးရ ထောက်လှမ်း ရေး ဌာန ကို ပြော ခဲ့ သည် ။
spelling mistake: မည်သူ မျ နှင့်

Finkelstein is also on the record as stating that self regulation by the industry through their own organization has failed.	ဖရန်ကလင်စတိန်း သည် သူ တို့ ၏ ကိုယ်ပိုင် အဖွဲ့အစည်း ကို ကျော် ကာ စက်ရုံ က ကိုယ်ပိုင် စည်းမျဉ်း သည် ကျရုံး ခဲ့ သည် ဟု ဖော်ပြ သကဲ့သို့ မှတ်တမ်း ထဲတွင် လည်း ဖြစ် သည် ။
spelling mistake: ကျရုံး

There are at least two big winners in Tuesday night's US$370 million Mega Millions lottery drawing which is held in 12 U.S. states.	အင်္ဂါ နေ့ ည က အမေရိကန် ပြည်နယ် ၁၂ ခု တွင် ကျင်းပ သော အမေရိကန် ဒေါ်လာ သန်း ၃၇၀ မီဂါမီလျှံ ထီ ဖွင့်ပွဲ တွင် အနည်းဆုံး ကံထူးရှင် ကြီး နှစ် ဦး ရှိ ကြ သည် ။
spelling mistake: မီဂါမီလျှံ

Their study of WASP-18b was published in the August 27 issue of the journal Nature.	သူ တို့ ရဲ့ WASP-18b လေ့လာ မှု ကို ဩဂုတ် လ ၂၇ ရက် နေ့ ထွက် သော သဘာဝ ဂျာနယ် မှာ ဖော်ပြ ခဲ့ တယ် ။
တချို့ စာလုံးတွေမှာက ဗမာလို ပြန်ထားတာ မဟုတ်ပဲ တိုက်ရိုက်ယူသုံးထားတာမို့ XML markup က အဆင်မပြေပြန်ဘူး...

Some Muslim news agencies are still reacting to last week's Newsweek article alleging Korans had been thrown into Guantanamo Bay toilets.	တချို့ မူဆလင် သတင်း ဌာန များ က ကိုရမ်ကျမ်းစာ များ ကို ဂွမ်တန်နိုမို ပင်လယ်အော် အိမ်သာ ထဲ ကို လွှတ်ပစ် ခဲ့ သည် ဟု ပြီး ခဲ့ သော သတင်းပတ် က ခေါင်းစဉ် တွင် အခိုင်အမာဖော်ပြ ၍ တုံ့ပြန် ခဲ့ သည် ။
Transliteration error: Guantanamo ဂွမ်တန်နိုမို

The new “price indexing” formula will reduce individual benefits and overall Social Security outlays because the inflation rate typically is much lower than the rise in wages.	ပုံမှန် အားဖြင့် ငွေကြေး ဖောင်းပွ မှု နုန်း သည် လုပ်အားခ များ မြှင့် တက် ခြင်း ထက် အ များ ကြီး နိမ့်ကျ သောကြောင့် “ ဈေးနှုန်း အညွှန်း ” စည်းမျဉ် အသစ် သည် ပုဂ္ဂလိက အကျိုးခံစားခွင့် များ နှင့် ယေဘုယျ လူမှုဖူလုံရေး သုံးစွဲ သည့် ငွေ များ လျှော့ချ နိုင် လိမ့်မည် ။
spelling mistake: နုန်း, စည်းမျဉ်

The Bush Administration proposal, which will be offered to Congress in February or March 2005, is part of an overall Social Security reform package that also would create “personal investment accounts” into which individual taxpayers could divert part of their payroll taxes.	ဖေဖော်ဝါရီ လ သို့မဟုတ် မတ် လ ၂၀၀၅ ခုနှစ် တွင် ဆွေးနွေး ညှိနှိုင်း ပွဲ သို့ တင်ပြ တော့ မည့် ၊ အသစ် ပြန်လည် ပြုပြင် ထား သော ယေဘုယျ အားဖြင့် လူမှုဖူလုံရေး ၏ တစ်စိတ်တစ်ပိုင်း ဖြစ် သော ၊ ဘုရ် အုပ်ချုပ် ရေး အဆို ပြု ချက် သည် ပုဂ္ဂလိက အခွန်ထမ်းဆောင် သူ တို့ မှ သူ တို့ ပေးဆောင် ရ မည့် အခွန် များ မှ တချို့ ကို လွှဲဖယ် နိုင် သည့် “ ကိုယ်ပိုင် ရင်းနှီးမြှုပ်နှံ မှု အကောင့် ” အဖြစ် ကို လည်း ဖန်တီး နိုင် သည် ။
transliteration mistake: Bush ==> ဘုရ်

Under the Bush proposal, rather than adjusting benefits on the basis of earnings growth, the calculation would be based on the increase in the consumer price index over those years.	ဘုရ်ဝှ် အဆို ပြု ချက် ကို အခြေခံ ၍ ၊ အကျိုးခံစားခွင့် များ ကို အခြေခံ ဝင်ငွေ ၏ တိုးတက် မှု ပေါ်တွင် ညှိယူ ခြင်း ထက် ၊ ထို နှစ် များ အတွင်း စားသုံး သူ ဈေးနှုန်း အညွှန်းကိန်း တိုးမြှင့်လာ မှု အပေါ် တွင် အခြေခံ ၍ တွက်ချက် ပါ လိမ့်မည် ။
transliteration inconsistance: ဘုရ်ဝှ်

However, Rother says that price indexing has to be linked to Bush’s private investment accounts as income from the accounts give retirees the chance to make up the shortfalls.	သို့သော် ၊ ဘုရှ် ) ရဲ့ ကိုယ်ပိုင် ရင်းနှီးမြှုပ်နှံ မှု ငွေ စာရင်း ဝင်ငွေ မှ အငြိမ်းစားယူ သူ များ ၏ ငွေကြေး မ လုံလောက် မှု များ ဖြေရှင်း ရန် အခွင့်အလမ်း ရရှိ စေ သောကြောင့် ထို ငွေ စာရင်း ကို ဈေးနှုန်း အညွှန်း နှင့် ချိတ်ဆက် ဖွယ် ရှိ သည် ဟု ရော်သာ က ပြော သည် ။
extra punctuation mark: ဘုရှ် )

Future Heathrow believe that Heathrow airport is crucial to prosperity of the Thames Valley region, and are in favour of building a third runway at the airport.	အနာဂတ် ဟက်ထရို လေကြောင်း လိုင်း က ဟက်ထရို လေဆိပ် သည် တိမ်းစ် တောင်ကြား ဒေသ ၏ အလားအလာ အဖြစ် ဆုံးဖြတ် ချက် ကို ယုံကြည် ကြောင်း ၊ နှင့် လေဆိပ် ၌ တတိယ အကြိမ် မြောက် လေယာဉ် ပြေးလမ်း ကို တည်ဆောက် ရန် ဆန္ဒ ရှိ သည် ။
transliteration/pronunciation error: Heathrow ==> ဟက်ထရို

Clothes and furniture are scattered around the wrecked houses and pieces of trees are scattered about.	ပျက်ဆီး နေ သော အိမ် များ ပတ်ပတ်လည် တွင် အဝတ်အစား နှင့် ပရိဘောဂ များ ပြန့်ကျဲ နေ ခဲ့ ပြီး သစ်ပင် အပိုင်းအစ များ က အနီးတဝိုက် တွင် ပြန့်ကျဲ နေ ခဲ့ သည် ။
spelling error: ပျက်ဆီး (ပျက်စီး ဖြစ်ရမယ်)

He said: "The Charity Commission guidance is quite clear that trustees must invest for the best possible financial return, while taking a level of risk appropriate for money in their care.	" ပရဟိတ အဖွဲ့ ကော်မရှင် လမ်းညွှန် မှု ဟာ အတော် ရှင်းလင်း သောကြောင့် ၎င်း တို့ ၏ စောင့်ရှောက် မှု ဖြင့် ငွေကြေး အတွက် သင့်လျော် သော စွန့်စား မှု အဆင့် တစ် ခု ကို ပြုလုပ် စဉ် ၊ ယုံကြည် စွာ အပ်နှံ သူ များ သည် အ ကောင်း ဆုံး ဖြစ် နိုင် သော စီးပွားရေး အမြတ်အစွန်း အတွက် ရင်းနှီးမြှုပ်နှံ ရ မည် ဟု : သူ က ပြော ခဲ့ ပါ သည် ။
we don't use colon in Burmese! ရင်းနှီးမြှုပ်နှံ ရ မည် ဟု : သူ က

Thomas	သော မတ်
Thomas	သော မတ်စ်
Blois	ဘ လွိင်း

Good example of alignment required within a transliteration word:
Mount Redoubt	ရက် ဒေါ့ တောင်

Symbols/Punctuation characters also contained:
icesave.nl	အိုက်စ် ဆေ့ဗ် ၊ အန် အယ်လ်
WASP-18b	ဒယ် ဘ လူ အေ အက်စ် ပီ - ၈ ဘီ
James "Duke" Aiona	ဂျိမ်းစ် " ဒုတ်ခ် " အေ ရို န
Vancouver, B.C..	ဗန် ကို ဗာ ၊ ဘီ 

Removed Punctuation characters:
Camille Saint-Saens	ကင် မီ လီ စိ န့် ဆ ရန်
Spain's	စ ပိန် ၏
Peter Bennett-Jones	ပီ တာ ဘန်း နတ် ဂျွန်းစ်
Ban Ki-moon	ဘန် ကီ မွန်း

long word/name example:
Abdelbaset Ali Mohmed Al-Megrahi	အယ် ဘ ဒါ ဘား ဆက် အ လီ မို ဟာ မက် အေ အိုင် - မက် ဂ ရက် 

=====================================


Very good example of why we built NER and Transliteration Dictionary:
Isaia Toeava , Ali Williams , Aaron Mauger , Jerry Collins , Chris Masoe and Andrew Hore each added tries as New Zealand ended the half with a 52-3 lead .	နယူးဇီလန် က ၅၂-၃ မှတ် နှင့် တစ်ဝက် ကို အဆုံးသတ် ခဲ့ သောကြောင့် အိုင်စာ အီအာ တိုးအာဘာ ၊ အလီ ဝီလီရမ် ၊ အာရုန် မော်ဂျော် ၊ ဂျယ်ရီ ကိုလင်း ၊ ခရစ်မာဆိုး နှင့် အင်ဒရူး ဟိုး တို့ က တစ် ဦး ချင်း စီ က ကြိုးစား ပြီး ထပ် ပြော ခဲ့ ပါ သည် ။

အထက်ပါ ပြထားတဲ့ ဥပမာအရ စာကြောင်းတစ်ကြောင်းမှာ personal name တွေ ဘယ်လောက် ပါနေသလဲ ဆိုတာကို ဥပမာပြရန်... စာတမ်းထဲမှာ...


## Decoding Error of Moses

post-editing အတွက် ဒေတာပြင်တဲ့အခါမှာ decoding လုပ်တဲ့အခါမှာ training data အာလုံးကို decode လုပ်မပေးနိုင်ပဲ
moses ရော moses2 ပရိုဂရမ်ရော ရပ်ရပ်သွားတယ်။

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4-tran$ /home/ye/tool/mosesbin/ubuntu-17.04/moses/bin/moses -threads all --max-phrase-length 200 -f /home/ye/exp/smt/wat2021/exp-syl4/baseline/my-en/tuning/moses.tuned.ini.1 -i /home/ye/exp/smt/wat2021/exp-syl4/data/train.my > ./my-en/train.myen.hyp
Defined parameters (per moses.ini or switch):
	config: /home/ye/exp/smt/wat2021/exp-syl4/baseline/my-en/tuning/moses.tuned.ini.1 
	distortion-limit: 6 
	feature: UnknownWordPenalty WordPenalty PhrasePenalty PhraseDictionaryMemory name=TranslationModel0 num-features=4 path=/home/ye/exp/smt/wat2021/exp-syl4/baseline/my-en/model/phrase-table.1.gz input-factor=0 output-factor=0 LexicalReordering name=LexicalReordering0 num-features=6 type=wbe-msd-bidirectional-fe-allff input-factor=0 output-factor=0 path=/home/ye/exp/smt/wat2021/exp-syl4/baseline/my-en/model/reordering-table.1.wbe-msd-bidirectional-fe.gz Distortion KENLM name=LM0 factor=0 path=/home/ye/exp/smt/wat2021/exp-syl4//baseline/my-en/lm/myrk.binlm.1 order=6 
	input-factors: 0 
	input-file: /home/ye/exp/smt/wat2021/exp-syl4/data/train.my 
	mapping: 0 T 0 
	max-phrase-length: 200 
	threads: all 
	weight: LexicalReordering0= 0.0295063 0.144319 0.114957 0.0621906 -0.0220501 0.0307571 Distortion0= 0.0628715 LM0= 0.0865004 WordPenalty0= -0.224658 PhrasePenalty0= -0.026615 TranslationModel0= -0.00641249 0.0654316 0.0872244 0.0365068 UnknownWordPenalty0= 1 
line=UnknownWordPenalty
FeatureFunction: UnknownWordPenalty0 start: 0 end: 0
line=WordPenalty
FeatureFunction: WordPenalty0 start: 1 end: 1
line=PhrasePenalty
FeatureFunction: PhrasePenalty0 start: 2 end: 2
line=PhraseDictionaryMemory name=TranslationModel0 num-features=4 path=/home/ye/exp/smt/wat2021/exp-syl4/baseline/my-en/model/phrase-table.1.gz input-factor=0 output-factor=0
FeatureFunction: TranslationModel0 start: 3 end: 6
line=LexicalReordering name=LexicalReordering0 num-features=6 type=wbe-msd-bidirectional-fe-allff input-factor=0 output-factor=0 path=/home/ye/exp/smt/wat2021/exp-syl4/baseline/my-en/model/reordering-table.1.wbe-msd-bidirectional-fe.gz
Initializing Lexical Reordering Feature..
FeatureFunction: LexicalReordering0 start: 7 end: 12
line=Distortion
FeatureFunction: Distortion0 start: 13 end: 13
line=KENLM name=LM0 factor=0 path=/home/ye/exp/smt/wat2021/exp-syl4//baseline/my-en/lm/myrk.binlm.1 order=6
FeatureFunction: LM0 start: 14 end: 14
Loading UnknownWordPenalty0
Loading WordPenalty0
Loading PhrasePenalty0
Loading LexicalReordering0
Loading table into memory...done.
Loading Distortion0
Loading LM0
Loading TranslationModel0
Start loading text phrase table. Moses format : [34.377] seconds
Reading /home/ye/exp/smt/wat2021/exp-syl4/baseline/my-en/model/phrase-table.1.gz
----5---10---15---20---25---30---35---40---45---50---55---60---65---70---75---80---85---90---95--100
************************************************************************************Killed
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4-tran$

## Hypothesis Stack Size (Beam)

(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4-tran$ /home/ye/tool/mosesbin/ubuntu-17.04/moses/bin/moses -threads all --max-phrase-length 200 -f /home/ye/exp/smt/wat2021/exp-syl4/baseline/my-en/tuning/moses.tuned.ini.1 -s 100 -i /home/ye/exp/smt/wat2021/exp-syl4/data/train.my > ./my-en/train.myen.hyp
Defined parameters (per moses.ini or switch):
	config: /home/ye/exp/smt/wat2021/exp-syl4/baseline/my-en/tuning/moses.tuned.ini.1 
	distortion-limit: 6 
	feature: UnknownWordPenalty WordPenalty PhrasePenalty PhraseDictionaryMemory name=TranslationModel0 num-features=4 path=/home/ye/exp/smt/wat2021/exp-syl4/baseline/my-en/model/phrase-table.1.gz input-factor=0 output-factor=0 LexicalReordering name=LexicalReordering0 num-features=6 type=wbe-msd-bidirectional-fe-allff input-factor=0 output-factor=0 path=/home/ye/exp/smt/wat2021/exp-syl4/baseline/my-en/model/reordering-table.1.wbe-msd-bidirectional-fe.gz Distortion KENLM name=LM0 factor=0 path=/home/ye/exp/smt/wat2021/exp-syl4//baseline/my-en/lm/myrk.binlm.1 order=6 
	input-factors: 0 
	input-file: /home/ye/exp/smt/wat2021/exp-syl4/data/train.my 
	mapping: 0 T 0 
	max-phrase-length: 200 
	stack: 100 
	threads: all 
	weight: LexicalReordering0= 0.0295063 0.144319 0.114957 0.0621906 -0.0220501 0.0307571 Distortion0= 0.0628715 LM0= 0.0865004 WordPenalty0= -0.224658 PhrasePenalty0= -0.026615 TranslationModel0= -0.00641249 0.0654316 0.0872244 0.0365068 UnknownWordPenalty0= 1 
line=UnknownWordPenalty
FeatureFunction: UnknownWordPenalty0 start: 0 end: 0
line=WordPenalty
FeatureFunction: WordPenalty0 start: 1 end: 1
line=PhrasePenalty
FeatureFunction: PhrasePenalty0 start: 2 end: 2
line=PhraseDictionaryMemory name=TranslationModel0 num-features=4 path=/home/ye/exp/smt/wat2021/exp-syl4/baseline/my-en/model/phrase-table.1.gz input-factor=0 output-factor=0
FeatureFunction: TranslationModel0 start: 3 end: 6
line=LexicalReordering name=LexicalReordering0 num-features=6 type=wbe-msd-bidirectional-fe-allff input-factor=0 output-factor=0 path=/home/ye/exp/smt/wat2021/exp-syl4/baseline/my-en/model/reordering-table.1.wbe-msd-bidirectional-fe.gz
Initializing Lexical Reordering Feature..
FeatureFunction: LexicalReordering0 start: 7 end: 12
line=Distortion
FeatureFunction: Distortion0 start: 13 end: 13
line=KENLM name=LM0 factor=0 path=/home/ye/exp/smt/wat2021/exp-syl4//baseline/my-en/lm/myrk.binlm.1 order=6
FeatureFunction: LM0 start: 14 end: 14
Loading UnknownWordPenalty0
Loading WordPenalty0
Loading PhrasePenalty0
Loading LexicalReordering0
Loading table into memory...done.
Loading Distortion0
Loading LM0
Loading TranslationModel0
Start loading text phrase table. Moses format : [34.073] seconds
Reading /home/ye/exp/smt/wat2021/exp-syl4/baseline/my-en/model/phrase-table.1.gz
----5---10---15---20---25---30---35---40---45---50---55---60---65---70---75---80---85---90---95--100
******************************************************************Killed
(base) ye@administrator-HP-Z2-Tower-G4-Workstation:~/exp/smt/wat2021/exp-syl4-tran$

အဆင်မပြေခဲ့...



Simulated Post-editing Options:
  --spe-src                             Simulated post-editing. Source filename
  --spe-trg                             Simulated post-editing. Target filename
  --spe-aln                             Simulated post-editing. Alignment 
                                        filename

 
 
